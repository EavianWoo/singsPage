var Xe=Object.defineProperty;var Ce=rt=>{throw TypeError(rt)};var ze=(rt,g,K)=>g in rt?Xe(rt,g,{enumerable:!0,configurable:!0,writable:!0,value:K}):rt[g]=K;var wt=(rt,g,K)=>ze(rt,typeof g!="symbol"?g+"":g,K),re=(rt,g,K)=>g.has(rt)||Ce("Cannot "+K);var P=(rt,g,K)=>(re(rt,g,"read from private field"),K?K.call(rt):g.get(rt)),ht=(rt,g,K)=>g.has(rt)?Ce("Cannot add the same private member more than once"):g instanceof WeakSet?g.add(rt):g.set(rt,K),dt=(rt,g,K,C)=>(re(rt,g,"write to private field"),C?C.call(rt,K):g.set(rt,K),K),ct=(rt,g,K)=>(re(rt,g,"access private method"),K);var ae=(rt,g,K,C)=>({set _(S){dt(rt,g,S,K)},get _(){return P(rt,g,C)}});import{g as getAugmentedNamespace,a as getDefaultExportFromCjs}from"./index-D_pim9b4.js";function _mergeNamespaces(rt,g){for(var K=0;K<g.length;K++){const C=g[K];if(typeof C!="string"&&!Array.isArray(C)){for(const S in C)if(S!=="default"&&!(S in rt)){const Y=Object.getOwnPropertyDescriptor(C,S);Y&&Object.defineProperty(rt,S,Y.get?Y:{enumerable:!0,get:()=>C[S]})}}}return Object.freeze(Object.defineProperty(rt,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(rt){throw new Error('Could not dynamically require "'+rt+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);var hasRequiredPdf;function requirePdf(){return hasRequiredPdf||(hasRequiredPdf=1,function(module,exports){(function(g,K){module.exports=K()})(globalThis,()=>(()=>{var __webpack_modules__=[,(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.VerbosityLevel=g.Util=g.UnknownErrorException=g.UnexpectedResponseException=g.UNSUPPORTED_FEATURES=g.TextRenderingMode=g.StreamType=g.RenderingIntentFlag=g.PermissionFlag=g.PasswordResponses=g.PasswordException=g.PageActionEventType=g.OPS=g.MissingPDFException=g.LINE_FACTOR=g.LINE_DESCENT_FACTOR=g.InvalidPDFException=g.ImageKind=g.IDENTITY_MATRIX=g.FormatError=g.FontType=g.FeatureTest=g.FONT_IDENTITY_MATRIX=g.DocumentActionEventType=g.CMapCompressionType=g.BaseException=g.AnnotationType=g.AnnotationStateModelType=g.AnnotationReviewState=g.AnnotationReplyType=g.AnnotationMode=g.AnnotationMarkedState=g.AnnotationFlag=g.AnnotationFieldFlag=g.AnnotationEditorType=g.AnnotationEditorPrefix=g.AnnotationEditorParamsType=g.AnnotationBorderStyleType=g.AnnotationActionEventType=g.AbortException=void 0,g.arrayByteLength=F,g.arraysToBytes=Z,g.assert=h,g.bytesToString=x,g.createPromiseCapability=Ut,g.createValidAbsoluteUrl=w,g.escapeString=yt,g.getModificationDate=jt,g.getVerbosityLevel=et,g.info=lt,g.isArrayBuffer=Ct,g.isArrayEqual=Dt,g.isAscii=xt,g.objectFromMap=Q,g.objectSize=V,g.setVerbosityLevel=H,g.shadow=O,g.string32=j,g.stringToBytes=u,g.stringToPDFString=At,g.stringToUTF16BEString=vt,g.stringToUTF8String=Pt,g.unreachable=U,g.utf8StringToString=Et,g.warn=ft,K(2);const C=[1,0,0,1,0,0];g.IDENTITY_MATRIX=C;const S=[.001,0,0,.001,0,0];g.FONT_IDENTITY_MATRIX=S;const Y=1.35;g.LINE_FACTOR=Y;const G=.35;g.LINE_DESCENT_FACTOR=G;const tt={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};g.RenderingIntentFlag=tt;const q={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};g.AnnotationMode=q;const A="pdfjs_internal_editor_";g.AnnotationEditorPrefix=A;const k={DISABLE:-1,NONE:0,FREETEXT:3,INK:15};g.AnnotationEditorType=k;const M={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13};g.AnnotationEditorParamsType=M;const T={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};g.PermissionFlag=T;const E={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};g.TextRenderingMode=E;const c={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};g.ImageKind=c;const t={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};g.AnnotationType=t;const r={MARKED:"Marked",REVIEW:"Review"};g.AnnotationStateModelType=r;const o={MARKED:"Marked",UNMARKED:"Unmarked"};g.AnnotationMarkedState=o;const b={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};g.AnnotationReviewState=b;const f={GROUP:"Group",REPLY:"R"};g.AnnotationReplyType=f;const l={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};g.AnnotationFlag=l;const n={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};g.AnnotationFieldFlag=n;const i={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};g.AnnotationBorderStyleType=i;const e={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};g.AnnotationActionEventType=e;const m={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};g.DocumentActionEventType=m;const y={O:"PageOpen",C:"PageClose"};g.PageActionEventType=y;const N={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};g.StreamType=N;const L={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};g.FontType=L;const nt={ERRORS:0,WARNINGS:1,INFOS:5};g.VerbosityLevel=nt;const at={NONE:0,BINARY:1,STREAM:2};g.CMapCompressionType=at;const J={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};g.OPS=J;const $={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"};g.UNSUPPORTED_FEATURES=$;const B={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};g.PasswordResponses=B;let W=nt.WARNINGS;function H(it){Number.isInteger(it)&&(W=it)}function et(){return W}function lt(it){W>=nt.INFOS&&console.log(`Info: ${it}`)}function ft(it){W>=nt.WARNINGS&&console.log(`Warning: ${it}`)}function U(it){throw new Error(it)}function h(it,X){it||U(X)}function a(it){if(!it)return!1;switch(it.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function w(it,X=null,z=null){if(!it)return null;try{if(z&&typeof it=="string"){if(z.addDefaultProtocol&&it.startsWith("www.")){const _t=it.match(/\./g);_t&&_t.length>=2&&(it=`http://${it}`)}if(z.tryConvertEncoding)try{it=Pt(it)}catch{}}const pt=X?new URL(it,X):new URL(it);if(a(pt))return pt}catch{}return null}function O(it,X,z){return Object.defineProperty(it,X,{value:z,enumerable:!0,configurable:!0,writable:!1}),z}const D=function(){function X(z,pt){this.constructor===X&&U("Cannot initialize BaseException."),this.message=z,this.name=pt}return X.prototype=new Error,X.constructor=X,X}();g.BaseException=D;class I extends D{constructor(X,z){super(X,"PasswordException"),this.code=z}}g.PasswordException=I;class s extends D{constructor(X,z){super(X,"UnknownErrorException"),this.details=z}}g.UnknownErrorException=s;class d extends D{constructor(X){super(X,"InvalidPDFException")}}g.InvalidPDFException=d;class _ extends D{constructor(X){super(X,"MissingPDFException")}}g.MissingPDFException=_;class p extends D{constructor(X,z){super(X,"UnexpectedResponseException"),this.status=z}}g.UnexpectedResponseException=p;class v extends D{constructor(X){super(X,"FormatError")}}g.FormatError=v;class R extends D{constructor(X){super(X,"AbortException")}}g.AbortException=R;function x(it){(typeof it!="object"||it===null||it.length===void 0)&&U("Invalid argument for bytesToString");const X=it.length,z=8192;if(X<z)return String.fromCharCode.apply(null,it);const pt=[];for(let _t=0;_t<X;_t+=z){const Tt=Math.min(_t+z,X),St=it.subarray(_t,Tt);pt.push(String.fromCharCode.apply(null,St))}return pt.join("")}function u(it){typeof it!="string"&&U("Invalid argument for stringToBytes");const X=it.length,z=new Uint8Array(X);for(let pt=0;pt<X;++pt)z[pt]=it.charCodeAt(pt)&255;return z}function F(it){if(it.length!==void 0)return it.length;if(it.byteLength!==void 0)return it.byteLength;U("Invalid argument for arrayByteLength")}function Z(it){const X=it.length;if(X===1&&it[0]instanceof Uint8Array)return it[0];let z=0;for(let Tt=0;Tt<X;Tt++)z+=F(it[Tt]);let pt=0;const _t=new Uint8Array(z);for(let Tt=0;Tt<X;Tt++){let St=it[Tt];St instanceof Uint8Array||(typeof St=="string"?St=u(St):St=new Uint8Array(St));const It=St.byteLength;_t.set(St,pt),pt+=It}return _t}function j(it){return String.fromCharCode(it>>24&255,it>>16&255,it>>8&255,it&255)}function V(it){return Object.keys(it).length}function Q(it){const X=Object.create(null);for(const[z,pt]of it)X[z]=pt;return X}function ot(){const it=new Uint8Array(4);return it[0]=1,new Uint32Array(it.buffer,0,1)[0]===1}function ut(){try{return new Function(""),!0}catch{return!1}}class st{static get isLittleEndian(){return O(this,"isLittleEndian",ot())}static get isEvalSupported(){return O(this,"isEvalSupported",ut())}static get isOffscreenCanvasSupported(){return O(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}}g.FeatureTest=st;const bt=[...Array(256).keys()].map(it=>it.toString(16).padStart(2,"0"));class mt{static makeHexColor(X,z,pt){return`#${bt[X]}${bt[z]}${bt[pt]}`}static scaleMinMax(X,z){let pt;X[0]?(X[0]<0&&(pt=z[0],z[0]=z[1],z[1]=pt),z[0]*=X[0],z[1]*=X[0],X[3]<0&&(pt=z[2],z[2]=z[3],z[3]=pt),z[2]*=X[3],z[3]*=X[3]):(pt=z[0],z[0]=z[2],z[2]=pt,pt=z[1],z[1]=z[3],z[3]=pt,X[1]<0&&(pt=z[2],z[2]=z[3],z[3]=pt),z[2]*=X[1],z[3]*=X[1],X[2]<0&&(pt=z[0],z[0]=z[1],z[1]=pt),z[0]*=X[2],z[1]*=X[2]),z[0]+=X[4],z[1]+=X[4],z[2]+=X[5],z[3]+=X[5]}static transform(X,z){return[X[0]*z[0]+X[2]*z[1],X[1]*z[0]+X[3]*z[1],X[0]*z[2]+X[2]*z[3],X[1]*z[2]+X[3]*z[3],X[0]*z[4]+X[2]*z[5]+X[4],X[1]*z[4]+X[3]*z[5]+X[5]]}static applyTransform(X,z){const pt=X[0]*z[0]+X[1]*z[2]+z[4],_t=X[0]*z[1]+X[1]*z[3]+z[5];return[pt,_t]}static applyInverseTransform(X,z){const pt=z[0]*z[3]-z[1]*z[2],_t=(X[0]*z[3]-X[1]*z[2]+z[2]*z[5]-z[4]*z[3])/pt,Tt=(-X[0]*z[1]+X[1]*z[0]+z[4]*z[1]-z[5]*z[0])/pt;return[_t,Tt]}static getAxialAlignedBoundingBox(X,z){const pt=mt.applyTransform(X,z),_t=mt.applyTransform(X.slice(2,4),z),Tt=mt.applyTransform([X[0],X[3]],z),St=mt.applyTransform([X[2],X[1]],z);return[Math.min(pt[0],_t[0],Tt[0],St[0]),Math.min(pt[1],_t[1],Tt[1],St[1]),Math.max(pt[0],_t[0],Tt[0],St[0]),Math.max(pt[1],_t[1],Tt[1],St[1])]}static inverseTransform(X){const z=X[0]*X[3]-X[1]*X[2];return[X[3]/z,-X[1]/z,-X[2]/z,X[0]/z,(X[2]*X[5]-X[4]*X[3])/z,(X[4]*X[1]-X[5]*X[0])/z]}static apply3dTransform(X,z){return[X[0]*z[0]+X[1]*z[1]+X[2]*z[2],X[3]*z[0]+X[4]*z[1]+X[5]*z[2],X[6]*z[0]+X[7]*z[1]+X[8]*z[2]]}static singularValueDecompose2dScale(X){const z=[X[0],X[2],X[1],X[3]],pt=X[0]*z[0]+X[1]*z[2],_t=X[0]*z[1]+X[1]*z[3],Tt=X[2]*z[0]+X[3]*z[2],St=X[2]*z[1]+X[3]*z[3],It=(pt+St)/2,Bt=Math.sqrt((pt+St)**2-4*(pt*St-Tt*_t))/2,Nt=It+Bt||1,Ft=It-Bt||1;return[Math.sqrt(Nt),Math.sqrt(Ft)]}static normalizeRect(X){const z=X.slice(0);return X[0]>X[2]&&(z[0]=X[2],z[2]=X[0]),X[1]>X[3]&&(z[1]=X[3],z[3]=X[1]),z}static intersect(X,z){const pt=Math.max(Math.min(X[0],X[2]),Math.min(z[0],z[2])),_t=Math.min(Math.max(X[0],X[2]),Math.max(z[0],z[2]));if(pt>_t)return null;const Tt=Math.max(Math.min(X[1],X[3]),Math.min(z[1],z[3])),St=Math.min(Math.max(X[1],X[3]),Math.max(z[1],z[3]));return Tt>St?null:[pt,Tt,_t,St]}static bezierBoundingBox(X,z,pt,_t,Tt,St,It,Bt){const Nt=[],Ft=[[],[]];let qt,Lt,$t,kt,Yt,Kt,se,ne;for(let ie=0;ie<2;++ie){if(ie===0?(Lt=6*X-12*pt+6*Tt,qt=-3*X+9*pt-9*Tt+3*It,$t=3*pt-3*X):(Lt=6*z-12*_t+6*St,qt=-3*z+9*_t-9*St+3*Bt,$t=3*_t-3*z),Math.abs(qt)<1e-12){if(Math.abs(Lt)<1e-12)continue;kt=-$t/Lt,0<kt&&kt<1&&Nt.push(kt);continue}se=Lt*Lt-4*$t*qt,ne=Math.sqrt(se),!(se<0)&&(Yt=(-Lt+ne)/(2*qt),0<Yt&&Yt<1&&Nt.push(Yt),Kt=(-Lt-ne)/(2*qt),0<Kt&&Kt<1&&Nt.push(Kt))}let Gt=Nt.length,Rt;const Xt=Gt;for(;Gt--;)kt=Nt[Gt],Rt=1-kt,Ft[0][Gt]=Rt*Rt*Rt*X+3*Rt*Rt*kt*pt+3*Rt*kt*kt*Tt+kt*kt*kt*It,Ft[1][Gt]=Rt*Rt*Rt*z+3*Rt*Rt*kt*_t+3*Rt*kt*kt*St+kt*kt*kt*Bt;return Ft[0][Xt]=X,Ft[1][Xt]=z,Ft[0][Xt+1]=It,Ft[1][Xt+1]=Bt,Ft[0].length=Ft[1].length=Xt+2,[Math.min(...Ft[0]),Math.min(...Ft[1]),Math.max(...Ft[0]),Math.max(...Ft[1])]}}g.Util=mt;const gt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function At(it){if(it[0]>="ï"){let z;if(it[0]==="þ"&&it[1]==="ÿ"?z="utf-16be":it[0]==="ÿ"&&it[1]==="þ"?z="utf-16le":it[0]==="ï"&&it[1]==="»"&&it[2]==="¿"&&(z="utf-8"),z)try{const pt=new TextDecoder(z,{fatal:!0}),_t=u(it);return pt.decode(_t)}catch(pt){ft(`stringToPDFString: "${pt}".`)}}const X=[];for(let z=0,pt=it.length;z<pt;z++){const _t=gt[it.charCodeAt(z)];X.push(_t?String.fromCharCode(_t):it.charAt(z))}return X.join("")}function yt(it){return it.replace(/([()\\\n\r])/g,X=>X===`
`?"\\n":X==="\r"?"\\r":`\\${X}`)}function xt(it){return/^[\x00-\x7F]*$/.test(it)}function vt(it){const X=["þÿ"];for(let z=0,pt=it.length;z<pt;z++){const _t=it.charCodeAt(z);X.push(String.fromCharCode(_t>>8&255),String.fromCharCode(_t&255))}return X.join("")}function Pt(it){return decodeURIComponent(escape(it))}function Et(it){return unescape(encodeURIComponent(it))}function Ct(it){return typeof it=="object"&&it!==null&&it.byteLength!==void 0}function Dt(it,X){if(it.length!==X.length)return!1;for(let z=0,pt=it.length;z<pt;z++)if(it[z]!==X[z])return!1;return!0}function jt(it=new Date){return[it.getUTCFullYear().toString(),(it.getUTCMonth()+1).toString().padStart(2,"0"),it.getUTCDate().toString().padStart(2,"0"),it.getUTCHours().toString().padStart(2,"0"),it.getUTCMinutes().toString().padStart(2,"0"),it.getUTCSeconds().toString().padStart(2,"0")].join("")}function Ut(){const it=Object.create(null);let X=!1;return Object.defineProperty(it,"settled",{get(){return X}}),it.promise=new Promise(function(z,pt){it.resolve=function(_t){X=!0,z(_t)},it.reject=function(_t){X=!0,pt(_t)}}),it}},(rt,g,K)=>{K(3)},(rt,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.isNodeJS=void 0;const K=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");g.isNodeJS=K},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var rt,K,C,S,Y,G,tt,q,A,oe,M,T;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:c,NodeCMapReaderFactory:t,NodeStandardFontDataFactory:r}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=c,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=t,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=r}let createPDFNetworkStream;function setPDFNetworkStreamFactory(c){createPDFNetworkStream=c}function getDocument(c){const t=new PDFDocumentLoadingTask;let r;if(typeof c=="string"||c instanceof URL)r={url:c};else if((0,_util.isArrayBuffer)(c))r={data:c};else if(c instanceof PDFDataRangeTransport)r={range:c};else{if(typeof c!="object")throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!c.url&&!c.data&&!c.range)throw new Error("Invalid parameter object: need either .data, .range or .url");r=c}const o=Object.create(null);let b=null,f=null;for(const n in r){const i=r[n];switch(n){case"url":if(typeof window<"u")try{o[n]=new URL(i,window.location).href;continue}catch(e){(0,_util.warn)(`Cannot create valid URL: "${e}".`)}else if(typeof i=="string"||i instanceof URL){o[n]=i.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":b=i;continue;case"worker":f=i;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)o[n]=new Uint8Array(i);else{if(i instanceof Uint8Array)break;if(typeof i=="string")o[n]=(0,_util.stringToBytes)(i);else if(typeof i=="object"&&i!==null&&!isNaN(i.length))o[n]=new Uint8Array(i);else if((0,_util.isArrayBuffer)(i))o[n]=new Uint8Array(i);else throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}continue}o[n]=i}if(o.CMapReaderFactory=o.CMapReaderFactory||DefaultCMapReaderFactory,o.StandardFontDataFactory=o.StandardFontDataFactory||DefaultStandardFontDataFactory,o.ignoreErrors=o.stopAtErrors!==!0,o.fontExtraProperties=o.fontExtraProperties===!0,o.pdfBug=o.pdfBug===!0,o.enableXfa=o.enableXfa===!0,(!Number.isInteger(o.rangeChunkSize)||o.rangeChunkSize<1)&&(o.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),(typeof o.docBaseUrl!="string"||(0,_display_utils.isDataScheme)(o.docBaseUrl))&&(o.docBaseUrl=null),(!Number.isInteger(o.maxImageSize)||o.maxImageSize<-1)&&(o.maxImageSize=-1),typeof o.cMapUrl!="string"&&(o.cMapUrl=null),typeof o.standardFontDataUrl!="string"&&(o.standardFontDataUrl=null),typeof o.useWorkerFetch!="boolean"&&(o.useWorkerFetch=o.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&o.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),typeof o.isEvalSupported!="boolean"&&(o.isEvalSupported=!0),typeof o.disableFontFace!="boolean"&&(o.disableFontFace=_is_node.isNodeJS),typeof o.useSystemFonts!="boolean"&&(o.useSystemFonts=!_is_node.isNodeJS&&!o.disableFontFace),(typeof o.ownerDocument!="object"||o.ownerDocument===null)&&(o.ownerDocument=globalThis.document),typeof o.disableRange!="boolean"&&(o.disableRange=!1),typeof o.disableStream!="boolean"&&(o.disableStream=!1),typeof o.disableAutoFetch!="boolean"&&(o.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(o.verbosity),!f){const n={verbosity:o.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};f=n.port?PDFWorker.fromPort(n):new PDFWorker(n),t._worker=f}const l=t.docId;return f.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");const n=_fetchDocument(f,o,b,l),i=new Promise(function(e){let m;b?m=new _transport_stream.PDFDataTransportStream({length:o.length,initialData:o.initialData,progressiveDone:o.progressiveDone,contentDispositionFilename:o.contentDispositionFilename,disableRange:o.disableRange,disableStream:o.disableStream},b):o.data||(m=createPDFNetworkStream({url:o.url,length:o.length,httpHeaders:o.httpHeaders,withCredentials:o.withCredentials,rangeChunkSize:o.rangeChunkSize,disableRange:o.disableRange,disableStream:o.disableStream})),e(m)});return Promise.all([n,i]).then(function([e,m]){if(t.destroyed)throw new Error("Loading aborted");const y=new _message_handler.MessageHandler(l,e,f.port),N=new WorkerTransport(y,t,m,o);t._transport=N,y.send("Ready",null)})}).catch(t._capability.reject),t}async function _fetchDocument(c,t,r,o){if(c.destroyed)throw new Error("Worker was destroyed");r&&(t.length=r.length,t.initialData=r.initialData,t.progressiveDone=r.progressiveDone,t.contentDispositionFilename=r.contentDispositionFilename);const b=await c.messageHandler.sendWithPromise("GetDocRequest",{docId:o,apiVersion:"2.16.105",source:{data:t.data,url:t.url,password:t.password,disableAutoFetch:t.disableAutoFetch,rangeChunkSize:t.rangeChunkSize,length:t.length},maxImageSize:t.maxImageSize,disableFontFace:t.disableFontFace,docBaseUrl:t.docBaseUrl,ignoreErrors:t.ignoreErrors,isEvalSupported:t.isEvalSupported,fontExtraProperties:t.fontExtraProperties,enableXfa:t.enableXfa,useSystemFonts:t.useSystemFonts,cMapUrl:t.useWorkerFetch?t.cMapUrl:null,standardFontDataUrl:t.useWorkerFetch?t.standardFontDataUrl:null});if(t.data&&(t.data=null),c.destroyed)throw new Error("Worker was destroyed");return b}const g=class g{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId=`d${ae(g,rt)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}async destroy(){var t;this.destroyed=!0,await((t=this._transport)==null?void 0:t.destroy()),this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};rt=new WeakMap,ht(g,rt,0);let PDFDocumentLoadingTask=g;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(t,r,o=!1,b=null){this.length=t,this.initialData=r,this.progressiveDone=o,this.contentDispositionFilename=b,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,r){for(const o of this._rangeListeners)o(t,r)}onDataProgress(t,r){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(t,r)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const r of this._progressiveReadListeners)r(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,r){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(t,r){this._pdfInfo=t,this._transport=r,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:async()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),this.stats||{streamTypes:{},fontTypes:{}})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(t,r,o,b,f=!1){this._pageIndex=t,this._pageInfo=r,this._ownerDocument=b,this._transport=o,this._stats=f?new _display_utils.StatTimer:null,this._pdfBug=f,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:r=this.rotate,offsetX:o=0,offsetY:b=0,dontFlip:f=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:t,rotation:r,offsetX:o,offsetY:b,dontFlip:f})}getAnnotations({intent:t="display"}={}){const r=this._transport.getRenderingIntent(t);let o=this._annotationPromises.get(r.cacheKey);return o||(o=this._transport.getAnnotations(this._pageIndex,r.renderingIntent),this._annotationPromises.set(r.cacheKey,o),o=o.then(b=>{for(const f of b)f.titleObj!==void 0&&Object.defineProperty(f,"title",{get(){return(0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),f.titleObj.str}}),f.contentsObj!==void 0&&Object.defineProperty(f,"contents",{get(){return(0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),f.contentsObj.str}});return b})),o}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:r,intent:o="display",annotationMode:b=_util.AnnotationMode.ENABLE,transform:f=null,imageLayer:l=null,canvasFactory:n=null,background:i=null,optionalContentConfigPromise:e=null,annotationCanvasMap:m=null,pageColors:y=null,printAnnotationStorage:N=null}){var H,et;((H=arguments[0])==null?void 0:H.renderInteractiveForms)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),arguments[0].renderInteractiveForms===!0&&b===_util.AnnotationMode.ENABLE&&(b=_util.AnnotationMode.ENABLE_FORMS)),((et=arguments[0])==null?void 0:et.includeAnnotationStorage)!==void 0&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),arguments[0].includeAnnotationStorage===!0&&b===_util.AnnotationMode.ENABLE&&(b=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const L=this._transport.getRenderingIntent(o,b,N);this.pendingCleanup=!1,e||(e=this._transport.getOptionalContentConfig());let nt=this._intentStates.get(L.cacheKey);nt||(nt=Object.create(null),this._intentStates.set(L.cacheKey,nt)),nt.streamReaderCancelTimeout&&(clearTimeout(nt.streamReaderCancelTimeout),nt.streamReaderCancelTimeout=null);const at=n||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),J=!!(L.renderingIntent&_util.RenderingIntentFlag.PRINT);nt.displayReadyCapability||(nt.displayReadyCapability=(0,_util.createPromiseCapability)(),nt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(L));const $=lt=>{nt.renderTasks.delete(B),(this.cleanupAfterRender||J)&&(this.pendingCleanup=!0),this._tryCleanup(),lt?(B.capability.reject(lt),this._abortOperatorList({intentState:nt,reason:lt instanceof Error?lt:new Error(lt)})):B.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},B=new InternalRenderTask({callback:$,params:{canvasContext:t,viewport:r,transform:f,imageLayer:l,background:i},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:m,operatorList:nt.operatorList,pageIndex:this._pageIndex,canvasFactory:at,useRequestAnimationFrame:!J,pdfBug:this._pdfBug,pageColors:y});(nt.renderTasks||(nt.renderTasks=new Set)).add(B);const W=B.task;return Promise.all([nt.displayReadyCapability.promise,e]).then(([lt,ft])=>{if(this.pendingCleanup){$();return}this._stats&&this._stats.time("Rendering"),B.initializeGraphics({transparency:lt,optionalContentConfig:ft}),B.operatorListChanged()}).catch($),W}getOperatorList({intent:t="display",annotationMode:r=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function b(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(n))}const f=this._transport.getRenderingIntent(t,r,o,!0);let l=this._intentStates.get(f.cacheKey);l||(l=Object.create(null),this._intentStates.set(f.cacheKey,l));let n;return l.opListReadCapability||(n=Object.create(null),n.operatorListChanged=b,l.opListReadCapability=(0,_util.createPromiseCapability)(),(l.renderTasks||(l.renderTasks=new Set)).add(n),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(f)),l.opListReadCapability.promise}streamTextContent({disableCombineTextItems:t=!1,includeMarkedContent:r=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:t!==!0,includeMarkedContent:r===!0},{highWaterMark:100,size(b){return b.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const r=this.streamTextContent(t);return new Promise(function(o,b){function f(){l.read().then(function({value:i,done:e}){if(e){o(n);return}Object.assign(n.styles,i.styles),n.items.push(...i.items),f()},b)}const l=r.getReader(),n={items:[],styles:Object.create(null)};f()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const t=[];for(const r of this._intentStates.values())if(this._abortOperatorList({intentState:r,reason:new Error("Page was destroyed."),force:!0}),!r.opListReadCapability)for(const o of r.renderTasks)t.push(o.completed),o.cancel();this.objs.clear();for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(t)}cleanup(t=!1){return this.pendingCleanup=!0,this._tryCleanup(t)}_tryCleanup(t=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:r,operatorList:o}of this._intentStates.values())if(r.size>0||!o.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,t&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const r of this._bitmaps)r.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(t,r){const o=this._intentStates.get(r);o&&(this._stats&&this._stats.timeEnd("Page Request"),o.displayReadyCapability&&o.displayReadyCapability.resolve(t))}_renderPageChunk(t,r){for(let o=0,b=t.length;o<b;o++)r.operatorList.fnArray.push(t.fnArray[o]),r.operatorList.argsArray.push(t.argsArray[o]);r.operatorList.lastChunk=t.lastChunk,r.operatorList.separateAnnots=t.separateAnnots;for(const o of r.renderTasks)o.operatorListChanged();t.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:t,cacheKey:r,annotationStorageMap:o}){const f=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:r,annotationStorage:o}).getReader(),l=this._intentStates.get(r);l.streamReader=f;const n=()=>{f.read().then(({value:i,done:e})=>{if(e){l.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(i,l),n())},i=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();this._tryCleanup()}if(l.displayReadyCapability)l.displayReadyCapability.reject(i);else if(l.opListReadCapability)l.opListReadCapability.reject(i);else throw i}})};n()}_abortOperatorList({intentState:t,reason:r,force:o=!1}){if(t.streamReader){if(!o){if(t.renderTasks.size>0)return;if(r instanceof _display_utils.RenderingCancelledException){t.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:t,reason:r,force:!0}),t.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(t.streamReader.cancel(new _util.AbortException(r.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[b,f]of this._intentStates)if(f===t){this._intentStates.delete(b);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(t,r){const o={data:structuredClone(t,r)};this._deferred.then(()=>{for(const b of this._listeners)b.call(this,o)})}addEventListener(t,r){this._listeners.push(r)}removeEventListener(t,r){const o=this._listeners.indexOf(r);this._listeners.splice(o,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_is_node.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const c=(K=document==null?void 0:document.currentScript)==null?void 0:K.src;c&&(PDFWorkerUtil.fallbackWorkerSrc=c.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(c,t){let r;try{if(r=new URL(c),!r.origin||r.origin==="null")return!1}catch{return!1}const o=new URL(t,r);return r.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(c){const t=`importScripts("${c}");`;return URL.createObjectURL(new Blob([t]))}}const _PDFWorker=class _PDFWorker{constructor({name:c=null,port:t=null,verbosity:r=(0,_util.getVerbosityLevel)()}={}){if(t&&P(_PDFWorker,C).has(t))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=c,this.destroyed=!1,this.verbosity=r,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,t){P(_PDFWorker,C).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(c){this._port=c,this._messageHandler=new _message_handler.MessageHandler("main","worker",c),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:c}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,c)||(c=PDFWorkerUtil.createCDNWrapper(new URL(c,window.location).href));const t=new Worker(c),r=new _message_handler.MessageHandler("main","worker",t),o=()=>{t.removeEventListener("error",b),r.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},b=()=>{this._webWorker||o()};t.addEventListener("error",b),r.on("test",l=>{if(t.removeEventListener("error",b),this.destroyed){o();return}l?(this._messageHandler=r,this._port=t,this._webWorker=t,this._readyCapability.resolve(),r.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),r.destroy(),t.terminate())}),r.on("ready",l=>{if(t.removeEventListener("error",b),this.destroyed){o();return}try{f()}catch{this._setupFakeWorker()}});const f=()=>{const l=new Uint8Array;r.send("test",l,[l.buffer])};f();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(c=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new LoopbackPort;this._port=t;const r=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(r+"_worker",r,t);c.setup(o,t);const b=new _message_handler.MessageHandler(r,r+"_worker",t);this._messageHandler=b,this._readyCapability.resolve(),b.send("configure",{verbosity:this.verbosity})}).catch(c=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${c.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),P(_PDFWorker,C).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(c){if(!(c!=null&&c.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return P(this,C).has(c.port)?P(this,C).get(c.port):new _PDFWorker(c)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var c;try{return((c=globalThis.pdfjsWorker)==null?void 0:c.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};C=new WeakMap,ht(_PDFWorker,C,new WeakMap);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(t,r,o,b){ht(this,S,null);ht(this,Y,new Map);ht(this,G,new Map);ht(this,tt,null);this.messageHandler=t,this.loadingTask=r,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:r.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:b.ownerDocument,styleElement:b.styleElement}),this._params=b,b.useWorkerFetch||(this.CMapReaderFactory=new b.CMapReaderFactory({baseUrl:b.cMapUrl,isCompressed:b.cMapPacked}),this.StandardFontDataFactory=new b.StandardFontDataFactory({baseUrl:b.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return P(this,S)}getRenderingIntent(t,r=_util.AnnotationMode.ENABLE,o=null,b=!1){let f=_util.RenderingIntentFlag.DISPLAY,l=null;switch(t){case"any":f=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":f=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${t}`)}switch(r){case _util.AnnotationMode.DISABLE:f+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:f+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:f+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,l=(f&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${r}`)}return b&&(f+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:f,cacheKey:`${f}_${_annotation_storage.AnnotationStorage.getHash(l)}`,annotationStorageMap:l}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const o of P(this,Y).values())t.push(o._destroy());P(this,Y).clear(),P(this,G).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const r=this.messageHandler.sendWithPromise("Terminate",null);return t.push(r),Promise.all(t).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),dt(this,tt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:r}=this;t.on("GetReader",(o,b)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=f=>{this._lastProgress={loaded:f.loaded,total:f.total}},b.onPull=()=>{this._fullReader.read().then(function({value:f,done:l}){if(l){b.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(f),"GetReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(f),1,[f])}).catch(f=>{b.error(f)})},b.onCancel=f=>{this._fullReader.cancel(f),b.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("ReaderHeadersReady",o=>{const b=(0,_util.createPromiseCapability)(),f=this._fullReader;return f.headersReady.then(()=>{var l;(!f.isStreamingSupported||!f.isRangeSupported)&&(this._lastProgress&&((l=r.onProgress)==null||l.call(r,this._lastProgress)),f.onProgress=n=>{var i;(i=r.onProgress)==null||i.call(r,{loaded:n.loaded,total:n.total})}),b.resolve({isStreamingSupported:f.isStreamingSupported,isRangeSupported:f.isRangeSupported,contentLength:f.contentLength})},b.reject),b.promise}),t.on("GetRangeReader",(o,b)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const f=this._networkStream.getRangeReader(o.begin,o.end);if(!f){b.close();return}b.onPull=()=>{f.read().then(function({value:l,done:n}){if(n){b.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(l),"GetRangeReader - expected an ArrayBuffer."),b.enqueue(new Uint8Array(l),1,[l])}).catch(l=>{b.error(l)})},b.onCancel=l=>{f.cancel(l),b.ready.catch(n=>{if(!this.destroyed)throw n})}}),t.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,r._capability.resolve(new PDFDocumentProxy(o,this))}),t.on("DocException",function(o){let b;switch(o.name){case"PasswordException":b=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":b=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":b=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":b=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":b=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}r._capability.reject(b)}),t.on("PasswordRequest",o=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),r.onPassword){const b=f=>{f instanceof Error?this._passwordCapability.reject(f):this._passwordCapability.resolve({password:f})};try{r.onPassword(b,o.code)}catch(f){this._passwordCapability.reject(f)}}else this._passwordCapability.reject(new _util.PasswordException(o.message,o.code));return this._passwordCapability.promise}),t.on("DataLoaded",o=>{var b;(b=r.onProgress)==null||b.call(r,{loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),t.on("StartRenderPage",o=>{if(this.destroyed)return;P(this,Y).get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),t.on("commonobj",([o,b,f])=>{var l;if(!this.destroyed&&!this.commonObjs.has(o))switch(b){case"Font":const n=this._params;if("error"in f){const m=f.error;(0,_util.warn)(`Error during font loading: ${m}`),this.commonObjs.resolve(o,m);break}let i=null;n.pdfBug&&((l=globalThis.FontInspector)!=null&&l.enabled)&&(i={registerFont(m,y){globalThis.FontInspector.fontAdded(m,y)}});const e=new _font_loader.FontFaceObject(f,{isEvalSupported:n.isEvalSupported,disableFontFace:n.disableFontFace,ignoreErrors:n.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:i});this.fontLoader.bind(e).catch(m=>t.sendWithPromise("FontFallback",{id:o})).finally(()=>{!n.fontExtraProperties&&e.data&&(e.data=null),this.commonObjs.resolve(o,e)});break;case"FontPath":case"Image":this.commonObjs.resolve(o,f);break;default:throw new Error(`Got unknown common object type ${b}`)}}),t.on("obj",([o,b,f,l])=>{var i;if(this.destroyed)return;const n=P(this,Y).get(b);if(!n.objs.has(o))switch(f){case"Image":n.objs.resolve(o,l);const e=8e6;if(l){let m;if(l.bitmap){const{bitmap:y,width:N,height:L}=l;m=N*L*4,n._bitmaps.add(y)}else m=((i=l.data)==null?void 0:i.length)||0;m>e&&(n.cleanupAfterRender=!0)}break;case"Pattern":n.objs.resolve(o,l);break;default:throw new Error(`Got unknown object type ${f}`)}}),t.on("DocProgress",o=>{var b;this.destroyed||(b=r.onProgress)==null||b.call(r,{loaded:o.loaded,total:o.total})}),t.on("DocStats",o=>{this.destroyed||dt(this,S,Object.freeze({streamTypes:Object.freeze(o.streamTypes),fontTypes:Object.freeze(o.fontTypes)}))}),t.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),t.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),t.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:t}){var r,o;this.destroyed||(o=(r=this.loadingTask).onUnsupportedFeature)==null||o.call(r,t)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const r=t-1,o=P(this,G).get(r);if(o)return o;const b=this.messageHandler.sendWithPromise("GetPage",{pageIndex:r}).then(f=>{if(this.destroyed)throw new Error("Transport destroyed");const l=new PDFPageProxy(r,f,this,this._params.ownerDocument,this._params.pdfBug);return P(this,Y).set(r,l),l});return P(this,G).set(r,b),b}getPageIndex(t){return typeof t!="object"||t===null||!Number.isInteger(t.num)||t.num<0||!Number.isInteger(t.gen)||t.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen})}getAnnotations(t,r){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:r})}saveDocument(){var t;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:((t=this._fullReader)==null?void 0:t.filename)??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(t=>new _optional_content_config.OptionalContentConfig(t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return P(this,tt)||dt(this,tt,this.messageHandler.sendWithPromise("GetMetadata",null).then(t=>{var r,o;return{info:t[0],metadata:t[1]?new _metadata.Metadata(t[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(await this.messageHandler.sendWithPromise("Cleanup",null),!this.destroyed){for(const r of P(this,Y).values())if(!r.cleanup())throw new Error(`startCleanup: Page ${r.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),dt(this,tt,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null}}get loadingParams(){const t=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:t.disableAutoFetch,enableXfa:t.enableXfa})}}S=new WeakMap,Y=new WeakMap,G=new WeakMap,tt=new WeakMap;class PDFObjects{constructor(){ht(this,A);ht(this,q,Object.create(null))}get(t,r=null){if(r){const b=ct(this,A,oe).call(this,t);return b.capability.promise.then(()=>r(b.data)),null}const o=P(this,q)[t];if(!(o!=null&&o.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${t}.`);return o.data}has(t){const r=P(this,q)[t];return(r==null?void 0:r.capability.settled)||!1}resolve(t,r=null){const o=ct(this,A,oe).call(this,t);o.data=r,o.capability.resolve()}clear(){dt(this,q,Object.create(null))}}q=new WeakMap,A=new WeakSet,oe=function(t){const r=P(this,q)[t];return r||(P(this,q)[t]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(t){ht(this,M,null);dt(this,M,t),this.onContinue=null}get promise(){return P(this,M).capability.promise}cancel(){P(this,M).cancel()}get separateAnnots(){const{separateAnnots:t}=P(this,M).operatorList;if(!t)return!1;const{annotationCanvasMap:r}=P(this,M);return t.form||t.canvas&&(r==null?void 0:r.size)>0}}M=new WeakMap,exports.RenderTask=RenderTask;const E=class E{constructor({callback:t,params:r,objs:o,commonObjs:b,annotationCanvasMap:f,operatorList:l,pageIndex:n,canvasFactory:i,useRequestAnimationFrame:e=!1,pdfBug:m=!1,pageColors:y=null}){this.callback=t,this.params=r,this.objs=o,this.commonObjs=b,this.annotationCanvasMap=f,this.operatorListIdx=null,this.operatorList=l,this._pageIndex=n,this.canvasFactory=i,this._pdfBug=m,this.pageColors=y,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=e===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=r.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:r}){var i;if(this.cancelled)return;if(this._canvas){if(P(E,T).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");P(E,T).add(this._canvas)}this._pdfBug&&((i=globalThis.StepperManager)!=null&&i.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:b,transform:f,imageLayer:l,background:n}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,l,r,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:f,viewport:b,transparency:t,background:n}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(t=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&P(E,T).delete(this._canvas),this.callback(t||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&P(E,T).delete(this._canvas),this.callback())))}};T=new WeakMap,ht(E,T,new WeakSet);let InternalRenderTask=E;const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(rt,g,K)=>{var q,Te,k;Object.defineProperty(g,"__esModule",{value:!0}),g.PrintAnnotationStorage=g.AnnotationStorage=void 0;var C=K(1),S=K(6),Y=K(10);class G{constructor(){ht(this,q);this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(T,E){const c=this._storage.get(T);return c===void 0?E:Object.assign(E,c)}getRawValue(T){return this._storage.get(T)}remove(T){if(this._storage.delete(T),this._storage.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const E of this._storage.values())if(E instanceof S.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(T,E){const c=this._storage.get(T);let t=!1;if(c!==void 0)for(const[r,o]of Object.entries(E))c[r]!==o&&(t=!0,c[r]=o);else t=!0,this._storage.set(T,E);t&&ct(this,q,Te).call(this),E instanceof S.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(E.constructor._type)}has(T){return this._storage.has(T)}getAll(){return this._storage.size>0?(0,C.objectFromMap)(this._storage):null}get size(){return this._storage.size}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new tt(this)}get serializable(){if(this._storage.size===0)return null;const T=new Map;for(const[E,c]of this._storage){const t=c instanceof S.AnnotationEditor?c.serialize():c;t&&T.set(E,t)}return T}static getHash(T){if(!T)return"";const E=new Y.MurmurHash3_64;for(const[c,t]of T)E.update(`${c}:${JSON.stringify(t)}`);return E.hexdigest()}}q=new WeakSet,Te=function(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())},g.AnnotationStorage=G;class tt extends G{constructor(E){super();ht(this,k,null);dt(this,k,structuredClone(E.serializable))}get print(){(0,C.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return P(this,k)}}k=new WeakMap,g.PrintAnnotationStorage=tt},(rt,g,K)=>{var G,tt,q,A,k,M;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditor=void 0;var C=K(7),S=K(1);const T=class T{constructor(c){ht(this,G,this.focusin.bind(this));ht(this,tt,this.focusout.bind(this));ht(this,q,!1);ht(this,A,!1);ht(this,k,!1);ht(this,M,T._zIndex++);this.constructor===T&&(0,S.unreachable)("Cannot initialize AnnotationEditor."),this.parent=c.parent,this.id=c.id,this.width=this.height=null,this.pageIndex=c.parent.pageIndex,this.name=c.name,this.div=null;const[t,r]=this.parent.viewportBaseDimensions;this.x=c.x/t,this.y=c.y/r,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,S.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=P(this,M)}focusin(c){P(this,q)?dt(this,q,!1):this.parent.setSelected(this)}focusout(c){if(!this.isAttachedToDOM)return;const t=c.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(c.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(c){const t=this.parent.div.getBoundingClientRect();this.startX=c.clientX-t.x,this.startY=c.clientY-t.y,c.dataTransfer.setData("text/plain",this.id),c.dataTransfer.effectAllowed="move"}setAt(c,t,r,o){const[b,f]=this.parent.viewportBaseDimensions;[r,o]=this.screenToPageTranslation(r,o),this.x=(c+r)/b,this.y=(t+o)/f,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}translate(c,t){const[r,o]=this.parent.viewportBaseDimensions;[c,t]=this.screenToPageTranslation(c,t),this.x+=c/r,this.y+=t/o,this.div.style.left=`${100*this.x}%`,this.div.style.top=`${100*this.y}%`}screenToPageTranslation(c,t){const{rotation:r}=this.parent.viewport;switch(r){case 90:return[t,-c];case 180:return[-c,-t];case 270:return[-t,c];default:return[c,t]}}setDims(c,t){const[r,o]=this.parent.viewportBaseDimensions;this.div.style.width=`${100*c/r}%`,this.div.style.height=`${100*t/o}%`}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",P(this,G)),this.div.addEventListener("focusout",P(this,tt));const[c,t]=this.getInitialTranslation();return this.translate(c,t),(0,C.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(c){const t=C.KeyboardManager.platform.isMac;if(c.button!==0||c.ctrlKey&&t){c.preventDefault();return}c.ctrlKey&&!t||c.shiftKey||c.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this),dt(this,q,!0)}getRect(c,t){const[r,o]=this.parent.viewportBaseDimensions,[b,f]=this.parent.pageDimensions,l=b*c/r,n=f*t/o,i=this.x*b,e=this.y*f,m=this.width*b,y=this.height*f;switch(this.rotation){case 0:return[i+l,f-e-n-y,i+l+m,f-e-n];case 90:return[i+n,f-e+l,i+n+y,f-e+l+m];case 180:return[i-l-m,f-e+n,i-l,f-e+n+y];case 270:return[i-n-y,f-e-l-m,i-n,f-e-l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(c,t){const[r,o,b,f]=c,l=b-r,n=f-o;switch(this.rotation){case 0:return[r,t-f,l,n];case 90:return[r,t-o,n,l];case 180:return[b,t-o,l,n];case 270:return[b,t-f,n,l];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){dt(this,k,!0)}disableEditMode(){dt(this,k,!1)}isInEditMode(){return P(this,k)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var c;(c=this.div)==null||c.addEventListener("focusin",P(this,G))}serialize(){(0,S.unreachable)("An editor must be serializable")}static deserialize(c,t){const r=new this.prototype.constructor({parent:t,id:t.getNextId()});r.rotation=c.rotation;const[o,b]=t.pageDimensions,[f,l,n,i]=r.getRectInCurrentCoords(c.rect,b);return r.x=f/o,r.y=l/b,r.width=n/o,r.height=i/b,r}remove(){this.div.removeEventListener("focusin",P(this,G)),this.div.removeEventListener("focusout",P(this,tt)),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){var c;(c=this.div)==null||c.classList.add("selectedEditor")}unselect(){var c;(c=this.div)==null||c.classList.remove("selectedEditor")}updateParams(c,t){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return P(this,A)}set isEditing(c){dt(this,A,c),c?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}};G=new WeakMap,tt=new WeakMap,q=new WeakMap,A=new WeakMap,k=new WeakMap,M=new WeakMap,wt(T,"_colorManager",new C.ColorManager),wt(T,"_zIndex",1);let Y=T;g.AnnotationEditor=Y},(rt,g,K)=>{var E,c,t,r,o,b,xe,n,e,m,y,N,L,nt,at,J,$,B,W,H,et,lt,ft,U,h,a,Pe,le,Mt,zt,we,ke,ce,Vt,Jt;Object.defineProperty(g,"__esModule",{value:!0}),g.KeyboardManager=g.CommandManager=g.ColorManager=g.AnnotationEditorUIManager=void 0,g.bindEvents=Y,g.opacityToHex=G;var C=K(1),S=K(8);function Y(x,u,F){for(const Z of F)u.addEventListener(Z,x[Z].bind(x))}function G(x){return Math.round(Math.min(255,Math.max(1,255*x))).toString(16).padStart(2,"0")}class tt{constructor(){ht(this,E,0)}getId(){return`${C.AnnotationEditorPrefix}${ae(this,E)._++}`}}E=new WeakMap;class q{constructor(u=128){ht(this,c,[]);ht(this,t,!1);ht(this,r);ht(this,o,-1);dt(this,r,u)}add({cmd:u,undo:F,mustExec:Z,type:j=NaN,overwriteIfSameType:V=!1,keepUndo:Q=!1}){if(Z&&u(),P(this,t))return;const ot={cmd:u,undo:F,type:j};if(P(this,o)===-1){P(this,c).length>0&&(P(this,c).length=0),dt(this,o,0),P(this,c).push(ot);return}if(V&&P(this,c)[P(this,o)].type===j){Q&&(ot.undo=P(this,c)[P(this,o)].undo),P(this,c)[P(this,o)]=ot;return}const ut=P(this,o)+1;ut===P(this,r)?P(this,c).splice(0,1):(dt(this,o,ut),ut<P(this,c).length&&P(this,c).splice(ut)),P(this,c).push(ot)}undo(){P(this,o)!==-1&&(dt(this,t,!0),P(this,c)[P(this,o)].undo(),dt(this,t,!1),dt(this,o,P(this,o)-1))}redo(){P(this,o)<P(this,c).length-1&&(dt(this,o,P(this,o)+1),dt(this,t,!0),P(this,c)[P(this,o)].cmd(),dt(this,t,!1))}hasSomethingToUndo(){return P(this,o)!==-1}hasSomethingToRedo(){return P(this,o)<P(this,c).length-1}destroy(){dt(this,c,null)}}c=new WeakMap,t=new WeakMap,r=new WeakMap,o=new WeakMap,g.CommandManager=q;const l=class l{constructor(u){ht(this,b);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const F=l.platform.isMac;for(const[Z,j]of u)for(const V of Z){const Q=V.startsWith("mac+");F&&Q?(this.callbacks.set(V.slice(4),j),this.allKeys.add(V.split("+").at(-1))):!F&&!Q&&(this.callbacks.set(V,j),this.allKeys.add(V.split("+").at(-1)))}}static get platform(){const u=typeof navigator<"u"?navigator.platform:"";return(0,C.shadow)(this,"platform",{isWin:u.includes("Win"),isMac:u.includes("Mac")})}exec(u,F){if(!this.allKeys.has(F.key))return;const Z=this.callbacks.get(ct(this,b,xe).call(this,F));Z&&(Z.bind(u)(),F.stopPropagation(),F.preventDefault())}};b=new WeakSet,xe=function(u){u.altKey&&this.buffer.push("alt"),u.ctrlKey&&this.buffer.push("ctrl"),u.metaKey&&this.buffer.push("meta"),u.shiftKey&&this.buffer.push("shift"),this.buffer.push(u.key);const F=this.buffer.join("+");return this.buffer.length=0,F};let A=l;g.KeyboardManager=A;class k{constructor(){ht(this,n,null)}copy(u){u&&(Array.isArray(u)?dt(this,n,u.map(F=>F.serialize())):dt(this,n,[u.serialize()]),dt(this,n,P(this,n).filter(F=>!!F)),P(this,n).length===0&&dt(this,n,null))}paste(){return P(this,n)}isEmpty(){return P(this,n)===null}destroy(){dt(this,n,null)}}n=new WeakMap;const i=class i{get _colors(){const u=new Map([["CanvasText",null],["Canvas",null]]);return(0,S.getColorValues)(u),(0,C.shadow)(this,"_colors",u)}convert(u){const F=(0,S.getRGB)(u);if(!window.matchMedia("(forced-colors: active)").matches)return F;for(const[Z,j]of this._colors)if(j.every((V,Q)=>V===F[Q]))return i._colorsMapping.get(Z);return F}getHexCode(u){const F=this._colors.get(u);return F?C.Util.makeHexColor(...F):u}};wt(i,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let M=i;g.ColorManager=M;const R=class R{constructor(u,F){ht(this,a);ht(this,e,null);ht(this,m,new Map);ht(this,y,new Map);ht(this,N,new k);ht(this,L,new q);ht(this,nt,0);ht(this,at,null);ht(this,J,null);ht(this,$,new tt);ht(this,B,!1);ht(this,W,C.AnnotationEditorType.NONE);ht(this,H,new Set);ht(this,et,this.keydown.bind(this));ht(this,lt,this.onEditingAction.bind(this));ht(this,ft,this.onPageChanging.bind(this));ht(this,U,{isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});ht(this,h,null);dt(this,h,u),dt(this,J,F),P(this,J)._on("editingaction",P(this,lt)),P(this,J)._on("pagechanging",P(this,ft))}destroy(){ct(this,a,le).call(this),P(this,J)._off("editingaction",P(this,lt)),P(this,J)._off("pagechanging",P(this,ft));for(const u of P(this,y).values())u.destroy();P(this,y).clear(),P(this,m).clear(),dt(this,e,null),P(this,H).clear(),P(this,N).destroy(),P(this,L).destroy()}onPageChanging({pageNumber:u}){dt(this,nt,u-1)}focusMainContainer(){P(this,h).focus()}keydown(u){var F;(F=this.getActive())!=null&&F.shouldGetKeyboardEvents()||R._keyboardManager.exec(this,u)}onEditingAction(u){["undo","redo","cut","copy","paste","delete","selectAll"].includes(u.name)&&this[u.name]()}setEditingState(u){u?(ct(this,a,Pe).call(this),ct(this,a,Mt).call(this,{isEditing:P(this,W)!==C.AnnotationEditorType.NONE,isEmpty:ct(this,a,Vt).call(this),hasSomethingToUndo:P(this,L).hasSomethingToUndo(),hasSomethingToRedo:P(this,L).hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:P(this,N).isEmpty()})):(ct(this,a,le).call(this),ct(this,a,Mt).call(this,{isEditing:!1}))}registerEditorTypes(u){dt(this,at,u);for(const F of P(this,at))ct(this,a,zt).call(this,F.defaultPropertiesToUpdate)}getId(){return P(this,$).getId()}addLayer(u){P(this,y).set(u.pageIndex,u),P(this,B)?u.enable():u.disable()}removeLayer(u){P(this,y).delete(u.pageIndex)}updateMode(u){if(dt(this,W,u),u===C.AnnotationEditorType.NONE)this.setEditingState(!1),ct(this,a,ke).call(this);else{this.setEditingState(!0),ct(this,a,we).call(this);for(const F of P(this,y).values())F.updateMode(u)}}updateToolbar(u){u!==P(this,W)&&P(this,J).dispatch("switchannotationeditormode",{source:this,mode:u})}updateParams(u,F){for(const Z of P(this,H))Z.updateParams(u,F);for(const Z of P(this,at))Z.updateDefaultParams(u,F)}getEditors(u){const F=[];for(const Z of P(this,m).values())Z.pageIndex===u&&F.push(Z);return F}getEditor(u){return P(this,m).get(u)}addEditor(u){P(this,m).set(u.id,u)}removeEditor(u){P(this,m).delete(u.id),this.unselect(u)}setActiveEditor(u){P(this,e)!==u&&(dt(this,e,u),u&&ct(this,a,zt).call(this,u.propertiesToUpdate))}toggleSelected(u){if(P(this,H).has(u)){P(this,H).delete(u),u.unselect(),ct(this,a,Mt).call(this,{hasSelectedEditor:this.hasSelection});return}P(this,H).add(u),u.select(),ct(this,a,zt).call(this,u.propertiesToUpdate),ct(this,a,Mt).call(this,{hasSelectedEditor:!0})}setSelected(u){for(const F of P(this,H))F!==u&&F.unselect();P(this,H).clear(),P(this,H).add(u),u.select(),ct(this,a,zt).call(this,u.propertiesToUpdate),ct(this,a,Mt).call(this,{hasSelectedEditor:!0})}isSelected(u){return P(this,H).has(u)}unselect(u){u.unselect(),P(this,H).delete(u),ct(this,a,Mt).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return P(this,H).size!==0}undo(){P(this,L).undo(),ct(this,a,Mt).call(this,{hasSomethingToUndo:P(this,L).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ct(this,a,Vt).call(this)})}redo(){P(this,L).redo(),ct(this,a,Mt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:P(this,L).hasSomethingToRedo(),isEmpty:ct(this,a,Vt).call(this)})}addCommands(u){P(this,L).add(u),ct(this,a,Mt).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ct(this,a,Vt).call(this)})}delete(){if(P(this,e)&&P(this,e).commitOrRemove(),!this.hasSelection)return;const u=[...P(this,H)],F=()=>{for(const j of u)j.remove()},Z=()=>{for(const j of u)ct(this,a,ce).call(this,j)};this.addCommands({cmd:F,undo:Z,mustExec:!0})}copy(){if(P(this,e)&&P(this,e).commitOrRemove(),this.hasSelection){const u=[];for(const F of P(this,H))F.isEmpty()||u.push(F);if(u.length===0)return;P(this,N).copy(u),ct(this,a,Mt).call(this,{hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(P(this,N).isEmpty())return;this.unselectAll();const u=P(this,y).get(P(this,nt)),F=P(this,N).paste().map(V=>u.deserialize(V)),Z=()=>{for(const V of F)ct(this,a,ce).call(this,V);ct(this,a,Jt).call(this,F)},j=()=>{for(const V of F)V.remove()};this.addCommands({cmd:Z,undo:j,mustExec:!0})}selectAll(){for(const u of P(this,H))u.commit();ct(this,a,Jt).call(this,P(this,m).values())}unselectAll(){if(P(this,e)){P(this,e).commitOrRemove();return}if(ct(this,a,Jt).size!==0){for(const u of P(this,H))u.unselect();P(this,H).clear(),ct(this,a,Mt).call(this,{hasSelectedEditor:!1})}}isActive(u){return P(this,e)===u}getActive(){return P(this,e)}getMode(){return P(this,W)}};e=new WeakMap,m=new WeakMap,y=new WeakMap,N=new WeakMap,L=new WeakMap,nt=new WeakMap,at=new WeakMap,J=new WeakMap,$=new WeakMap,B=new WeakMap,W=new WeakMap,H=new WeakMap,et=new WeakMap,lt=new WeakMap,ft=new WeakMap,U=new WeakMap,h=new WeakMap,a=new WeakSet,Pe=function(){P(this,h).addEventListener("keydown",P(this,et))},le=function(){P(this,h).removeEventListener("keydown",P(this,et))},Mt=function(u){Object.entries(u).some(([Z,j])=>P(this,U)[Z]!==j)&&P(this,J).dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(P(this,U),u)})},zt=function(u){P(this,J).dispatch("annotationeditorparamschanged",{source:this,details:u})},we=function(){if(!P(this,B)){dt(this,B,!0);for(const u of P(this,y).values())u.enable()}},ke=function(){if(this.unselectAll(),P(this,B)){dt(this,B,!1);for(const u of P(this,y).values())u.disable()}},ce=function(u){const F=P(this,y).get(u.pageIndex);F?F.addOrRebuild(u):this.addEditor(u)},Vt=function(){if(P(this,m).size===0)return!0;if(P(this,m).size===1)for(const u of P(this,m).values())return u.isEmpty();return!1},Jt=function(u){P(this,H).clear();for(const F of u)F.isEmpty()||(P(this,H).add(F),F.select());ct(this,a,Mt).call(this,{hasSelectedEditor:!0})},wt(R,"_keyboardManager",new A([[["ctrl+a","mac+meta+a"],R.prototype.selectAll],[["ctrl+c","mac+meta+c"],R.prototype.copy],[["ctrl+v","mac+meta+v"],R.prototype.paste],[["ctrl+x","mac+meta+x"],R.prototype.cut],[["ctrl+z","mac+meta+z"],R.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],R.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],R.prototype.delete],[["Escape","mac+Escape"],R.prototype.unselectAll]]));let T=R;g.AnnotationEditorUIManager=T},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.StatTimer=g.RenderingCancelledException=g.PixelsPerInch=g.PageViewport=g.PDFDateString=g.DOMStandardFontDataFactory=g.DOMSVGFactory=g.DOMCanvasFactory=g.DOMCMapReaderFactory=g.AnnotationPrefix=void 0,g.deprecated=i,g.getColorValues=L,g.getCurrentTransform=nt,g.getCurrentTransformInverse=at,g.getFilenameFromUrl=o,g.getPdfFilenameFromUrl=b,g.getRGB=N,g.getXfaPageViewport=y,g.isDataScheme=t,g.isPdfFile=r,g.isValidFetchUrl=l,g.loadScript=n;var C=K(9),S=K(1);const Y="http://www.w3.org/2000/svg",G="pdfjs_internal_id_";g.AnnotationPrefix=G;const J=class J{};wt(J,"CSS",96),wt(J,"PDF",72),wt(J,"PDF_TO_CSS_UNITS",J.CSS/J.PDF);let tt=J;g.PixelsPerInch=tt;class q extends C.BaseCanvasFactory{constructor({ownerDocument:B=globalThis.document}={}){super(),this._document=B}_createCanvas(B,W){const H=this._document.createElement("canvas");return H.width=B,H.height=W,H}}g.DOMCanvasFactory=q;async function A($,B=!1){if(l($,document.baseURI)){const W=await fetch($);if(!W.ok)throw new Error(W.statusText);return B?new Uint8Array(await W.arrayBuffer()):(0,S.stringToBytes)(await W.text())}return new Promise((W,H)=>{const et=new XMLHttpRequest;et.open("GET",$,!0),B&&(et.responseType="arraybuffer"),et.onreadystatechange=()=>{if(et.readyState===XMLHttpRequest.DONE){if(et.status===200||et.status===0){let lt;if(B&&et.response?lt=new Uint8Array(et.response):!B&&et.responseText&&(lt=(0,S.stringToBytes)(et.responseText)),lt){W(lt);return}}H(new Error(et.statusText))}},et.send(null)})}class k extends C.BaseCMapReaderFactory{_fetchData(B,W){return A(B,this.isCompressed).then(H=>({cMapData:H,compressionType:W}))}}g.DOMCMapReaderFactory=k;class M extends C.BaseStandardFontDataFactory{_fetchData(B){return A(B,!0)}}g.DOMStandardFontDataFactory=M;class T extends C.BaseSVGFactory{_createSVG(B){return document.createElementNS(Y,B)}}g.DOMSVGFactory=T;class E{constructor({viewBox:B,scale:W,rotation:H,offsetX:et=0,offsetY:lt=0,dontFlip:ft=!1}){this.viewBox=B,this.scale=W,this.rotation=H,this.offsetX=et,this.offsetY=lt;const U=(B[2]+B[0])/2,h=(B[3]+B[1])/2;let a,w,O,D;switch(H%=360,H<0&&(H+=360),H){case 180:a=-1,w=0,O=0,D=1;break;case 90:a=0,w=1,O=1,D=0;break;case 270:a=0,w=-1,O=-1,D=0;break;case 0:a=1,w=0,O=0,D=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}ft&&(O=-O,D=-D);let I,s,d,_;a===0?(I=Math.abs(h-B[1])*W+et,s=Math.abs(U-B[0])*W+lt,d=Math.abs(B[3]-B[1])*W,_=Math.abs(B[2]-B[0])*W):(I=Math.abs(U-B[0])*W+et,s=Math.abs(h-B[1])*W+lt,d=Math.abs(B[2]-B[0])*W,_=Math.abs(B[3]-B[1])*W),this.transform=[a*W,w*W,O*W,D*W,I-a*W*U-O*W*h,s-w*W*U-D*W*h],this.width=d,this.height=_}clone({scale:B=this.scale,rotation:W=this.rotation,offsetX:H=this.offsetX,offsetY:et=this.offsetY,dontFlip:lt=!1}={}){return new E({viewBox:this.viewBox.slice(),scale:B,rotation:W,offsetX:H,offsetY:et,dontFlip:lt})}convertToViewportPoint(B,W){return S.Util.applyTransform([B,W],this.transform)}convertToViewportRectangle(B){const W=S.Util.applyTransform([B[0],B[1]],this.transform),H=S.Util.applyTransform([B[2],B[3]],this.transform);return[W[0],W[1],H[0],H[1]]}convertToPdfPoint(B,W){return S.Util.applyInverseTransform([B,W],this.transform)}}g.PageViewport=E;class c extends S.BaseException{constructor(B,W){super(B,"RenderingCancelledException"),this.type=W}}g.RenderingCancelledException=c;function t($){const B=$.length;let W=0;for(;W<B&&$[W].trim()==="";)W++;return $.substring(W,W+5).toLowerCase()==="data:"}function r($){return typeof $=="string"&&/\.pdf$/i.test($)}function o($){const B=$.indexOf("#"),W=$.indexOf("?"),H=Math.min(B>0?B:$.length,W>0?W:$.length);return $.substring($.lastIndexOf("/",H)+1,H)}function b($,B="document.pdf"){if(typeof $!="string")return B;if(t($))return(0,S.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),B;const W=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,H=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,et=W.exec($);let lt=H.exec(et[1])||H.exec(et[2])||H.exec(et[3]);if(lt&&(lt=lt[0],lt.includes("%")))try{lt=H.exec(decodeURIComponent(lt))[0]}catch{}return lt||B}class f{constructor(){this.started=Object.create(null),this.times=[]}time(B){B in this.started&&(0,S.warn)(`Timer is already running for ${B}`),this.started[B]=Date.now()}timeEnd(B){B in this.started||(0,S.warn)(`Timer has not been started for ${B}`),this.times.push({name:B,start:this.started[B],end:Date.now()}),delete this.started[B]}toString(){const B=[];let W=0;for(const H of this.times){const et=H.name;et.length>W&&(W=et.length)}for(const H of this.times){const et=H.end-H.start;B.push(`${H.name.padEnd(W)} ${et}ms
`)}return B.join("")}}g.StatTimer=f;function l($,B){try{const{protocol:W}=B?new URL($,B):new URL($);return W==="http:"||W==="https:"}catch{return!1}}function n($,B=!1){return new Promise((W,H)=>{const et=document.createElement("script");et.src=$,et.onload=function(lt){B&&et.remove(),W(lt)},et.onerror=function(){H(new Error(`Cannot load script at: ${et.src}`))},(document.head||document.documentElement).append(et)})}function i($){console.log("Deprecated API usage: "+$)}let e;class m{static toDateObject(B){if(!B||typeof B!="string")return null;e||(e=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const W=e.exec(B);if(!W)return null;const H=parseInt(W[1],10);let et=parseInt(W[2],10);et=et>=1&&et<=12?et-1:0;let lt=parseInt(W[3],10);lt=lt>=1&&lt<=31?lt:1;let ft=parseInt(W[4],10);ft=ft>=0&&ft<=23?ft:0;let U=parseInt(W[5],10);U=U>=0&&U<=59?U:0;let h=parseInt(W[6],10);h=h>=0&&h<=59?h:0;const a=W[7]||"Z";let w=parseInt(W[8],10);w=w>=0&&w<=23?w:0;let O=parseInt(W[9],10)||0;return O=O>=0&&O<=59?O:0,a==="-"?(ft+=w,U+=O):a==="+"&&(ft-=w,U-=O),new Date(Date.UTC(H,et,lt,ft,U,h))}}g.PDFDateString=m;function y($,{scale:B=1,rotation:W=0}){const{width:H,height:et}=$.attributes.style,lt=[0,0,parseInt(H),parseInt(et)];return new E({viewBox:lt,scale:B,rotation:W})}function N($){if($.startsWith("#")){const B=parseInt($.slice(1),16);return[(B&16711680)>>16,(B&65280)>>8,B&255]}return $.startsWith("rgb(")?$.slice(4,-1).split(",").map(B=>parseInt(B)):$.startsWith("rgba(")?$.slice(5,-1).split(",").map(B=>parseInt(B)).slice(0,3):((0,S.warn)(`Not a valid color format: "${$}"`),[0,0,0])}function L($){const B=document.createElement("span");B.style.visibility="hidden",document.body.append(B);for(const W of $.keys()){B.style.color=W;const H=window.getComputedStyle(B).color;$.set(W,N(H))}B.remove()}function nt($){const{a:B,b:W,c:H,d:et,e:lt,f:ft}=$.getTransform();return[B,W,H,et,lt,ft]}function at($){const{a:B,b:W,c:H,d:et,e:lt,f:ft}=$.getTransform().invertSelf();return[B,W,H,et,lt,ft]}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.BaseStandardFontDataFactory=g.BaseSVGFactory=g.BaseCanvasFactory=g.BaseCMapReaderFactory=void 0;var C=K(1);class S{constructor(){this.constructor===S&&(0,C.unreachable)("Cannot initialize BaseCanvasFactory.")}create(A,k){if(A<=0||k<=0)throw new Error("Invalid canvas size");const M=this._createCanvas(A,k);return{canvas:M,context:M.getContext("2d")}}reset(A,k,M){if(!A.canvas)throw new Error("Canvas is not specified");if(k<=0||M<=0)throw new Error("Invalid canvas size");A.canvas.width=k,A.canvas.height=M}destroy(A){if(!A.canvas)throw new Error("Canvas is not specified");A.canvas.width=0,A.canvas.height=0,A.canvas=null,A.context=null}_createCanvas(A,k){(0,C.unreachable)("Abstract method `_createCanvas` called.")}}g.BaseCanvasFactory=S;class Y{constructor({baseUrl:A=null,isCompressed:k=!1}){this.constructor===Y&&(0,C.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=A,this.isCompressed=k}async fetch({name:A}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!A)throw new Error("CMap name must be specified.");const k=this.baseUrl+A+(this.isCompressed?".bcmap":""),M=this.isCompressed?C.CMapCompressionType.BINARY:C.CMapCompressionType.NONE;return this._fetchData(k,M).catch(T=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${k}`)})}_fetchData(A,k){(0,C.unreachable)("Abstract method `_fetchData` called.")}}g.BaseCMapReaderFactory=Y;class G{constructor({baseUrl:A=null}){this.constructor===G&&(0,C.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=A}async fetch({filename:A}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!A)throw new Error("Font filename must be specified.");const k=`${this.baseUrl}${A}`;return this._fetchData(k).catch(M=>{throw new Error(`Unable to load font data at: ${k}`)})}_fetchData(A){(0,C.unreachable)("Abstract method `_fetchData` called.")}}g.BaseStandardFontDataFactory=G;class tt{constructor(){this.constructor===tt&&(0,C.unreachable)("Cannot initialize BaseSVGFactory.")}create(A,k,M=!1){if(A<=0||k<=0)throw new Error("Invalid SVG dimensions");const T=this._createSVG("svg:svg");return T.setAttribute("version","1.1"),M||(T.setAttribute("width",`${A}px`),T.setAttribute("height",`${k}px`)),T.setAttribute("preserveAspectRatio","none"),T.setAttribute("viewBox",`0 0 ${A} ${k}`),T}createElement(A){if(typeof A!="string")throw new Error("Invalid SVG element type");return this._createSVG(A)}_createSVG(A){(0,C.unreachable)("Abstract method `_createSVG` called.")}}g.BaseSVGFactory=tt},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.MurmurHash3_64=void 0;var C=K(1);const S=3285377520,Y=4294901760,G=65535;class tt{constructor(A){this.h1=A?A&4294967295:S,this.h2=A?A&4294967295:S}update(A){let k,M;if(typeof A=="string"){k=new Uint8Array(A.length*2),M=0;for(let e=0,m=A.length;e<m;e++){const y=A.charCodeAt(e);y<=255?k[M++]=y:(k[M++]=y>>>8,k[M++]=y&255)}}else if((0,C.isArrayBuffer)(A))k=A.slice(),M=k.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const T=M>>2,E=M-T*4,c=new Uint32Array(k.buffer,0,T);let t=0,r=0,o=this.h1,b=this.h2;const f=3432918353,l=461845907,n=f&G,i=l&G;for(let e=0;e<T;e++)e&1?(t=c[e],t=t*f&Y|t*n&G,t=t<<15|t>>>17,t=t*l&Y|t*i&G,o^=t,o=o<<13|o>>>19,o=o*5+3864292196):(r=c[e],r=r*f&Y|r*n&G,r=r<<15|r>>>17,r=r*l&Y|r*i&G,b^=r,b=b<<13|b>>>19,b=b*5+3864292196);switch(t=0,E){case 3:t^=k[T*4+2]<<16;case 2:t^=k[T*4+1]<<8;case 1:t^=k[T*4],t=t*f&Y|t*n&G,t=t<<15|t>>>17,t=t*l&Y|t*i&G,T&1?o^=t:b^=t}this.h1=o,this.h2=b}hexdigest(){let A=this.h1,k=this.h2;A^=k>>>1,A=A*3981806797&Y|A*36045&G,k=k*4283543511&Y|((k<<16|A>>>16)*2950163797&Y)>>>16,A^=k>>>1,A=A*444984403&Y|A*60499&G,k=k*3301882366&Y|((k<<16|A>>>16)*3120437893&Y)>>>16,A^=k>>>1;const M=(A>>>0).toString(16),T=(k>>>0).toString(16);return M.padStart(8,"0")+T.padStart(8,"0")}}g.MurmurHash3_64=tt},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.FontLoader=g.FontFaceObject=void 0;var C=K(1);class S{constructor({docId:q,onUnsupportedFeature:A,ownerDocument:k=globalThis.document,styleElement:M=null}){this.constructor===S&&(0,C.unreachable)("Cannot initialize BaseFontLoader."),this.docId=q,this._onUnsupportedFeature=A,this._document=k,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(q){this.nativeFontFaces.push(q),this._document.fonts.add(q)}insertRule(q){let A=this.styleElement;A||(A=this.styleElement=this._document.createElement("style"),A.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(A));const k=A.sheet;k.insertRule(q,k.cssRules.length)}clear(){for(const q of this.nativeFontFaces)this._document.fonts.delete(q);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(q){if(q.attached||q.missingFile)return;if(q.attached=!0,this.isFontLoadingAPISupported){const k=q.createNativeFontFace();if(k){this.addNativeFontFace(k);try{await k.loaded}catch(M){throw this._onUnsupportedFeature({featureId:C.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,C.warn)(`Failed to load font '${k.family}': '${M}'.`),q.disableFontFace=!0,M}}return}const A=q.createFontFaceRule();if(A){if(this.insertRule(A),this.isSyncFontLoadingSupported)return;await new Promise(k=>{const M=this._queueLoadingCallback(k);this._prepareFontLoadEvent([A],[q],M)})}}_queueLoadingCallback(q){(0,C.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var A;const q=!!((A=this._document)!=null&&A.fonts);return(0,C.shadow)(this,"isFontLoadingAPISupported",q)}get isSyncFontLoadingSupported(){(0,C.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,C.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(q,A,k){(0,C.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let Y;g.FontLoader=Y,g.FontLoader=Y=class extends S{constructor(q){super(q),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let q=!1;if(typeof navigator>"u")q=!0;else{const A=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(A==null?void 0:A[1])>=14&&(q=!0)}return(0,C.shadow)(this,"isSyncFontLoadingSupported",q)}_queueLoadingCallback(q){function A(){for((0,C.assert)(!M.done,"completeRequest() cannot be called twice."),M.done=!0;k.requests.length>0&&k.requests[0].done;){const T=k.requests.shift();setTimeout(T.callback,0)}}const k=this.loadingContext,M={id:`pdfjs-font-loading-${k.nextRequestId++}`,done:!1,complete:A,callback:q};return k.requests.push(M),M}get _loadTestFont(){const q=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,C.shadow)(this,"_loadTestFont",q())}_prepareFontLoadEvent(q,A,k){function M(at,J){return at.charCodeAt(J)<<24|at.charCodeAt(J+1)<<16|at.charCodeAt(J+2)<<8|at.charCodeAt(J+3)&255}function T(at,J,$,B){const W=at.substring(0,J),H=at.substring(J+$);return W+B+H}let E,c;const t=this._document.createElement("canvas");t.width=1,t.height=1;const r=t.getContext("2d");let o=0;function b(at,J){if(o++,o>30){(0,C.warn)("Load test font never loaded."),J();return}if(r.font="30px "+at,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0){J();return}setTimeout(b.bind(null,at,J))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let l=this._loadTestFont;l=T(l,976,f.length,f);const i=16,e=1482184792;let m=M(l,i);for(E=0,c=f.length-3;E<c;E+=4)m=m-e+M(f,E)|0;E<f.length&&(m=m-e+M(f+"XXX",E)|0),l=T(l,i,4,(0,C.string32)(m));const y=`url(data:font/opentype;base64,${btoa(l)});`,N=`@font-face {font-family:"${f}";src:${y}}`;this.insertRule(N);const L=[];for(const at of A)L.push(at.loadedName);L.push(f);const nt=this._document.createElement("div");nt.style.visibility="hidden",nt.style.width=nt.style.height="10px",nt.style.position="absolute",nt.style.top=nt.style.left="0px";for(const at of L){const J=this._document.createElement("span");J.textContent="Hi",J.style.fontFamily=at,nt.append(J)}this._document.body.append(nt),b(f,()=>{nt.remove(),k.complete()})}};class G{constructor(q,{isEvalSupported:A=!0,disableFontFace:k=!1,ignoreErrors:M=!1,onUnsupportedFeature:T,fontRegistry:E=null}){this.compiledGlyphs=Object.create(null);for(const c in q)this[c]=q[c];this.isEvalSupported=A!==!1,this.disableFontFace=k===!0,this.ignoreErrors=M===!0,this._onUnsupportedFeature=T,this.fontRegistry=E}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let q;if(!this.cssFontInfo)q=new FontFace(this.loadedName,this.data,{});else{const A={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(A.style=`oblique ${this.cssFontInfo.italicAngle}deg`),q=new FontFace(this.cssFontInfo.fontFamily,this.data,A)}return this.fontRegistry&&this.fontRegistry.registerFont(this),q}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const q=(0,C.bytesToString)(this.data),A=`url(data:${this.mimetype};base64,${btoa(q)});`;let k;if(!this.cssFontInfo)k=`@font-face {font-family:"${this.loadedName}";src:${A}}`;else{let M=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(M+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),k=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${M}src:${A}}`}return this.fontRegistry&&this.fontRegistry.registerFont(this,A),k}getPathGenerator(q,A){if(this.compiledGlyphs[A]!==void 0)return this.compiledGlyphs[A];let k;try{k=q.get(this.loadedName+"_path_"+A)}catch(M){if(!this.ignoreErrors)throw M;return this._onUnsupportedFeature({featureId:C.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,C.warn)(`getPathGenerator - ignoring character: "${M}".`),this.compiledGlyphs[A]=function(T,E){}}if(this.isEvalSupported&&C.FeatureTest.isEvalSupported){const M=[];for(const T of k){const E=T.args!==void 0?T.args.join(","):"";M.push("c.",T.cmd,"(",E,`);
`)}return this.compiledGlyphs[A]=new Function("c","size",M.join(""))}return this.compiledGlyphs[A]=function(M,T){for(const E of k)E.cmd==="scale"&&(E.args=[T,-T]),M[E.cmd].apply(M,E.args)}}}g.FontFaceObject=G},(rt,g,K)=>{var et,he;Object.defineProperty(g,"__esModule",{value:!0}),g.CanvasGraphics=void 0;var C=K(8),S=K(1),Y=K(13),G=K(14),tt=K(3);const q=16,A=100,k=4096,M=15,T=10,E=tt.isNodeJS&&typeof Path2D>"u"?-1:1e3,c=16;function t(U,h){if(U._removeMirroring)throw new Error("Context is already forwarding operations.");U.__originalSave=U.save,U.__originalRestore=U.restore,U.__originalRotate=U.rotate,U.__originalScale=U.scale,U.__originalTranslate=U.translate,U.__originalTransform=U.transform,U.__originalSetTransform=U.setTransform,U.__originalResetTransform=U.resetTransform,U.__originalClip=U.clip,U.__originalMoveTo=U.moveTo,U.__originalLineTo=U.lineTo,U.__originalBezierCurveTo=U.bezierCurveTo,U.__originalRect=U.rect,U.__originalClosePath=U.closePath,U.__originalBeginPath=U.beginPath,U._removeMirroring=()=>{U.save=U.__originalSave,U.restore=U.__originalRestore,U.rotate=U.__originalRotate,U.scale=U.__originalScale,U.translate=U.__originalTranslate,U.transform=U.__originalTransform,U.setTransform=U.__originalSetTransform,U.resetTransform=U.__originalResetTransform,U.clip=U.__originalClip,U.moveTo=U.__originalMoveTo,U.lineTo=U.__originalLineTo,U.bezierCurveTo=U.__originalBezierCurveTo,U.rect=U.__originalRect,U.closePath=U.__originalClosePath,U.beginPath=U.__originalBeginPath,delete U._removeMirroring},U.save=function(){h.save(),this.__originalSave()},U.restore=function(){h.restore(),this.__originalRestore()},U.translate=function(w,O){h.translate(w,O),this.__originalTranslate(w,O)},U.scale=function(w,O){h.scale(w,O),this.__originalScale(w,O)},U.transform=function(w,O,D,I,s,d){h.transform(w,O,D,I,s,d),this.__originalTransform(w,O,D,I,s,d)},U.setTransform=function(w,O,D,I,s,d){h.setTransform(w,O,D,I,s,d),this.__originalSetTransform(w,O,D,I,s,d)},U.resetTransform=function(){h.resetTransform(),this.__originalResetTransform()},U.rotate=function(w){h.rotate(w),this.__originalRotate(w)},U.clip=function(w){h.clip(w),this.__originalClip(w)},U.moveTo=function(a,w){h.moveTo(a,w),this.__originalMoveTo(a,w)},U.lineTo=function(a,w){h.lineTo(a,w),this.__originalLineTo(a,w)},U.bezierCurveTo=function(a,w,O,D,I,s){h.bezierCurveTo(a,w,O,D,I,s),this.__originalBezierCurveTo(a,w,O,D,I,s)},U.rect=function(a,w,O,D){h.rect(a,w,O,D),this.__originalRect(a,w,O,D)},U.closePath=function(){h.closePath(),this.__originalClosePath()},U.beginPath=function(){h.beginPath(),this.__originalBeginPath()}}class r{constructor(h){this.canvasFactory=h,this.cache=Object.create(null)}getCanvas(h,a,w){let O;return this.cache[h]!==void 0?(O=this.cache[h],this.canvasFactory.reset(O,a,w)):(O=this.canvasFactory.create(a,w),this.cache[h]=O),O}delete(h){delete this.cache[h]}clear(){for(const h in this.cache){const a=this.cache[h];this.canvasFactory.destroy(a),delete this.cache[h]}}}function o(U,h,a,w,O,D,I,s,d,_){const[p,v,R,x,u,F]=(0,C.getCurrentTransform)(U);if(v===0&&R===0){const V=I*p+u,Q=Math.round(V),ot=s*x+F,ut=Math.round(ot),st=(I+d)*p+u,bt=Math.abs(Math.round(st)-Q)||1,mt=(s+_)*x+F,gt=Math.abs(Math.round(mt)-ut)||1;return U.setTransform(Math.sign(p),0,0,Math.sign(x),Q,ut),U.drawImage(h,a,w,O,D,0,0,bt,gt),U.setTransform(p,v,R,x,u,F),[bt,gt]}if(p===0&&x===0){const V=s*R+u,Q=Math.round(V),ot=I*v+F,ut=Math.round(ot),st=(s+_)*R+u,bt=Math.abs(Math.round(st)-Q)||1,mt=(I+d)*v+F,gt=Math.abs(Math.round(mt)-ut)||1;return U.setTransform(0,Math.sign(v),Math.sign(R),0,Q,ut),U.drawImage(h,a,w,O,D,0,0,gt,bt),U.setTransform(p,v,R,x,u,F),[gt,bt]}U.drawImage(h,a,w,O,D,I,s,d,_);const Z=Math.hypot(p,v),j=Math.hypot(R,x);return[Z*d,j*_]}function b(U){const{width:h,height:a}=U;if(h>E||a>E)return null;const w=1e3,O=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),D=h+1;let I=new Uint8Array(D*(a+1)),s,d,_;const p=h+7&-8;let v=new Uint8Array(p*a),R=0;for(const j of U.data){let V=128;for(;V>0;)v[R++]=j&V?0:255,V>>=1}let x=0;for(R=0,v[R]!==0&&(I[0]=1,++x),d=1;d<h;d++)v[R]!==v[R+1]&&(I[d]=v[R]?2:1,++x),R++;for(v[R]!==0&&(I[d]=2,++x),s=1;s<a;s++){R=s*p,_=s*D,v[R-p]!==v[R]&&(I[_]=v[R]?1:8,++x);let j=(v[R]?4:0)+(v[R-p]?8:0);for(d=1;d<h;d++)j=(j>>2)+(v[R+1]?4:0)+(v[R-p+1]?8:0),O[j]&&(I[_+d]=O[j],++x),R++;if(v[R-p]!==v[R]&&(I[_+d]=v[R]?2:4,++x),x>w)return null}for(R=p*(a-1),_=s*D,v[R]!==0&&(I[_]=8,++x),d=1;d<h;d++)v[R]!==v[R+1]&&(I[_+d]=v[R]?4:8,++x),R++;if(v[R]!==0&&(I[_+d]=4,++x),x>w)return null;const u=new Int32Array([0,D,-1,0,-D,0,0,0,1]),F=new Path2D;for(s=0;x&&s<=a;s++){let j=s*D;const V=j+h;for(;j<V&&!I[j];)j++;if(j===V)continue;F.moveTo(j%D,s);const Q=j;let ot=I[j];do{const ut=u[ot];do j+=ut;while(!I[j]);const st=I[j];st!==5&&st!==10?(ot=st,I[j]=0):(ot=st&51*ot>>4,I[j]&=ot>>2|ot<<2),F.lineTo(j%D,j/D|0),I[j]||--x}while(Q!==j);--s}return v=null,I=null,function(j){j.save(),j.scale(1/h,-1/a),j.translate(0,-a),j.fill(F),j.beginPath(),j.restore()}}class f{constructor(h,a){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=S.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=S.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=S.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,h,a])}clone(){const h=Object.create(this);return h.clipBox=this.clipBox.slice(),h}setCurrentPoint(h,a){this.x=h,this.y=a}updatePathMinMax(h,a,w){[a,w]=S.Util.applyTransform([a,w],h),this.minX=Math.min(this.minX,a),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,a),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(h,a){const w=S.Util.applyTransform(a,h),O=S.Util.applyTransform(a.slice(2),h);this.minX=Math.min(this.minX,w[0],O[0]),this.minY=Math.min(this.minY,w[1],O[1]),this.maxX=Math.max(this.maxX,w[0],O[0]),this.maxY=Math.max(this.maxY,w[1],O[1])}updateScalingPathMinMax(h,a){S.Util.scaleMinMax(h,a),this.minX=Math.min(this.minX,a[0]),this.maxX=Math.max(this.maxX,a[1]),this.minY=Math.min(this.minY,a[2]),this.maxY=Math.max(this.maxY,a[3])}updateCurvePathMinMax(h,a,w,O,D,I,s,d,_,p){const v=S.Util.bezierBoundingBox(a,w,O,D,I,s,d,_);if(p){p[0]=Math.min(p[0],v[0],v[2]),p[1]=Math.max(p[1],v[0],v[2]),p[2]=Math.min(p[2],v[1],v[3]),p[3]=Math.max(p[3],v[1],v[3]);return}this.updateRectMinMax(h,v)}getPathBoundingBox(h=Y.PathType.FILL,a=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(h===Y.PathType.STROKE){a||(0,S.unreachable)("Stroke bounding box must include transform.");const O=S.Util.singularValueDecompose2dScale(a),D=O[0]*this.lineWidth/2,I=O[1]*this.lineWidth/2;w[0]-=D,w[1]-=I,w[2]+=D,w[3]+=I}return w}updateClipFromPath(){const h=S.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(h||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(h){this.clipBox=h,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(h=Y.PathType.FILL,a=null){return S.Util.intersect(this.clipBox,this.getPathBoundingBox(h,a))}}function l(U,h,a=null){if(typeof ImageData<"u"&&h instanceof ImageData){U.putImageData(h,0,0);return}const w=h.height,O=h.width,D=w%c,I=(w-D)/c,s=D===0?I:I+1,d=U.createImageData(O,c);let _=0,p;const v=h.data,R=d.data;let x,u,F,Z,j,V,Q,ot;if(a)switch(a.length){case 1:j=a[0],V=a[0],Q=a[0],ot=a[0];break;case 4:j=a[0],V=a[1],Q=a[2],ot=a[3];break}if(h.kind===S.ImageKind.GRAYSCALE_1BPP){const ut=v.byteLength,st=new Uint32Array(R.buffer,0,R.byteLength>>2),bt=st.length,mt=O+7>>3;let gt=4294967295,At=S.FeatureTest.isLittleEndian?4278190080:255;for(ot&&ot[0]===255&&ot[255]===0&&([gt,At]=[At,gt]),x=0;x<s;x++){for(F=x<I?c:D,p=0,u=0;u<F;u++){const yt=ut-_;let xt=0;const vt=yt>mt?O:yt*8-7,Pt=vt&-8;let Et=0,Ct=0;for(;xt<Pt;xt+=8)Ct=v[_++],st[p++]=Ct&128?gt:At,st[p++]=Ct&64?gt:At,st[p++]=Ct&32?gt:At,st[p++]=Ct&16?gt:At,st[p++]=Ct&8?gt:At,st[p++]=Ct&4?gt:At,st[p++]=Ct&2?gt:At,st[p++]=Ct&1?gt:At;for(;xt<vt;xt++)Et===0&&(Ct=v[_++],Et=128),st[p++]=Ct&Et?gt:At,Et>>=1}for(;p<bt;)st[p++]=0;U.putImageData(d,0,x*c)}}else if(h.kind===S.ImageKind.RGBA_32BPP){const ut=!!(j||V||Q);for(u=0,Z=O*c*4,x=0;x<I;x++){if(R.set(v.subarray(_,_+Z)),_+=Z,ut)for(let st=0;st<Z;st+=4)j&&(R[st+0]=j[R[st+0]]),V&&(R[st+1]=V[R[st+1]]),Q&&(R[st+2]=Q[R[st+2]]);U.putImageData(d,0,u),u+=c}if(x<s){if(Z=O*D*4,R.set(v.subarray(_,_+Z)),ut)for(let st=0;st<Z;st+=4)j&&(R[st+0]=j[R[st+0]]),V&&(R[st+1]=V[R[st+1]]),Q&&(R[st+2]=Q[R[st+2]]);U.putImageData(d,0,u)}}else if(h.kind===S.ImageKind.RGB_24BPP){const ut=!!(j||V||Q);for(F=c,Z=O*F,x=0;x<s;x++){for(x>=I&&(F=D,Z=O*F),p=0,u=Z;u--;)R[p++]=v[_++],R[p++]=v[_++],R[p++]=v[_++],R[p++]=255;if(ut)for(let st=0;st<p;st+=4)j&&(R[st+0]=j[R[st+0]]),V&&(R[st+1]=V[R[st+1]]),Q&&(R[st+2]=Q[R[st+2]]);U.putImageData(d,0,x*c)}}else throw new Error(`bad image kind: ${h.kind}`)}function n(U,h){if(h.bitmap){U.drawImage(h.bitmap,0,0);return}const a=h.height,w=h.width,O=a%c,D=(a-O)/c,I=O===0?D:D+1,s=U.createImageData(w,c);let d=0;const _=h.data,p=s.data;for(let v=0;v<I;v++){const R=v<D?c:O;({srcPos:d}=(0,G.applyMaskImageData)({src:_,srcPos:d,dest:p,width:w,height:R})),U.putImageData(s,0,v*c)}}function i(U,h){const a=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let w=0,O=a.length;w<O;w++){const D=a[w];U[D]!==void 0&&(h[D]=U[D])}U.setLineDash!==void 0&&(h.setLineDash(U.getLineDash()),h.lineDashOffset=U.lineDashOffset)}function e(U,h){U.strokeStyle=U.fillStyle=h||"#000000",U.fillRule="nonzero",U.globalAlpha=1,U.lineWidth=1,U.lineCap="butt",U.lineJoin="miter",U.miterLimit=10,U.globalCompositeOperation="source-over",U.font="10px sans-serif",U.setLineDash!==void 0&&(U.setLineDash([]),U.lineDashOffset=0)}function m(U,h,a,w){const O=U.length;for(let D=3;D<O;D+=4){const I=U[D];if(I===0)U[D-3]=h,U[D-2]=a,U[D-1]=w;else if(I<255){const s=255-I;U[D-3]=U[D-3]*I+h*s>>8,U[D-2]=U[D-2]*I+a*s>>8,U[D-1]=U[D-1]*I+w*s>>8}}}function y(U,h,a){const w=U.length,O=1/255;for(let D=3;D<w;D+=4){const I=a?a[U[D]]:U[D];h[D]=h[D]*I*O|0}}function N(U,h,a){const w=U.length;for(let O=3;O<w;O+=4){const D=U[O-3]*77+U[O-2]*152+U[O-1]*28;h[O]=a?h[O]*a[D>>8]>>8:h[O]*D>>16}}function L(U,h,a,w,O,D,I,s,d,_,p){const v=!!D,R=v?D[0]:0,x=v?D[1]:0,u=v?D[2]:0;let F;O==="Luminosity"?F=N:F=y;const j=Math.min(w,Math.ceil(1048576/a));for(let V=0;V<w;V+=j){const Q=Math.min(j,w-V),ot=U.getImageData(s-_,V+(d-p),a,Q),ut=h.getImageData(s,V+d,a,Q);v&&m(ot.data,R,x,u),F(ot.data,ut.data,I),h.putImageData(ut,s,V+d)}}function nt(U,h,a,w){const O=w[0],D=w[1],I=w[2]-O,s=w[3]-D;I===0||s===0||(L(h.context,a,I,s,h.subtype,h.backdrop,h.transferMap,O,D,h.offsetX,h.offsetY),U.save(),U.globalAlpha=1,U.globalCompositeOperation="source-over",U.setTransform(1,0,0,1,0,0),U.drawImage(a.canvas,0,0),U.restore())}function at(U,h){const a=S.Util.singularValueDecompose2dScale(U);a[0]=Math.fround(a[0]),a[1]=Math.fround(a[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*C.PixelsPerInch.PDF_TO_CSS_UNITS);return h!==void 0?h:a[0]<=w||a[1]<=w}const J=["butt","round","square"],$=["miter","round","bevel"],B={},W={},ft=class ft{constructor(h,a,w,O,D,I,s,d){ht(this,et);this.ctx=h,this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=a,this.objs=w,this.canvasFactory=O,this.imageLayer=D,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=I,this.cachedCanvases=new r(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=s,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(d==null?void 0:d.background)||null,this.foregroundColor=(d==null?void 0:d.foreground)||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(h,a=null){return typeof h=="string"?h.startsWith("g_")?this.commonObjs.get(h):this.objs.get(h):a}beginDrawing({transform:h,viewport:a,transparency:w=!1,background:O=null}){const D=this.ctx.canvas.width,I=this.ctx.canvas.height,s=O||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const d=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const _=this.backgroundColor=this.ctx.fillStyle;let p=!0,v=s;if(this.ctx.fillStyle=s,v=this.ctx.fillStyle,p=typeof v=="string"&&/^#[0-9A-Fa-f]{6}$/.test(v),d==="#000000"&&_==="#ffffff"||d===_||!p)this.foregroundColor=this.backgroundColor=null;else{const[R,x,u]=(0,C.getRGB)(v),F=j=>(j/=255,j<=.03928?j/12.92:((j+.055)/1.055)**2.4),Z=Math.round(.2126*F(R)+.7152*F(x)+.0722*F(u));this.selectColor=(j,V,Q)=>{const ot=.2126*F(j)+.7152*F(V)+.0722*F(Q);return Math.round(ot)===Z?_:d}}}if(this.ctx.fillStyle=this.backgroundColor||s,this.ctx.fillRect(0,0,D,I),this.ctx.restore(),w){const d=this.cachedCanvases.getCanvas("transparent",D,I);this.compositeCtx=this.ctx,this.transparentCanvas=d.canvas,this.ctx=d.context,this.ctx.save(),this.ctx.transform(...(0,C.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),e(this.ctx,this.foregroundColor),h&&(this.ctx.transform(...h),this.outputScaleX=h[0],this.outputScaleY=h[0]),this.ctx.transform(...a.transform),this.viewportScale=a.scale,this.baseTransform=(0,C.getCurrentTransform)(this.ctx),this.imageLayer&&((0,C.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(h,a,w,O){const D=h.argsArray,I=h.fnArray;let s=a||0;const d=D.length;if(d===s)return s;const _=d-s>T&&typeof w=="function",p=_?Date.now()+M:0;let v=0;const R=this.commonObjs,x=this.objs;let u;for(;;){if(O!==void 0&&s===O.nextBreakPoint)return O.breakIt(s,w),s;if(u=I[s],u!==S.OPS.dependency)this[u].apply(this,D[s]);else for(const F of D[s]){const Z=F.startsWith("g_")?R:x;if(!Z.has(F))return Z.get(F,w),s}if(s++,s===d)return s;if(_&&++v>T){if(Date.now()>p)return w(),s;v=0}}}endDrawing(){ct(this,et,he).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const h of this._cachedBitmapsMap.values()){for(const a of h.values())typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&(a.width=a.height=0);h.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(h,a){const w=h.width,O=h.height;let D=Math.max(Math.hypot(a[0],a[1]),1),I=Math.max(Math.hypot(a[2],a[3]),1),s=w,d=O,_="prescale1",p,v;for(;D>2&&s>1||I>2&&d>1;){let R=s,x=d;D>2&&s>1&&(R=Math.ceil(s/2),D/=s/R),I>2&&d>1&&(x=Math.ceil(d/2),I/=d/x),p=this.cachedCanvases.getCanvas(_,R,x),v=p.context,v.clearRect(0,0,R,x),v.drawImage(h,0,0,s,d,0,0,R,x),h=p.canvas,s=R,d=x,_=_==="prescale1"?"prescale2":"prescale1"}return{img:h,paintWidth:s,paintHeight:d}}_createMaskCanvas(h){const a=this.ctx,{width:w,height:O}=h,D=this.current.fillColor,I=this.current.patternFill,s=(0,C.getCurrentTransform)(a);let d,_,p,v;if((h.bitmap||h.data)&&h.count>1){const bt=h.bitmap||h.data.buffer,mt=s.slice(0,4);_=JSON.stringify(I?mt:[mt,D]),d=this._cachedBitmapsMap.get(bt),d||(d=new Map,this._cachedBitmapsMap.set(bt,d));const gt=d.get(_);if(gt&&!I){const At=Math.round(Math.min(s[0],s[2])+s[4]),yt=Math.round(Math.min(s[1],s[3])+s[5]);return{canvas:gt,offsetX:At,offsetY:yt}}p=gt}p||(v=this.cachedCanvases.getCanvas("maskCanvas",w,O),n(v.context,h));let R=S.Util.transform(s,[1/w,0,0,-1/O,0,0]);R=S.Util.transform(R,[1,0,0,1,0,-O]);const x=S.Util.applyTransform([0,0],R),u=S.Util.applyTransform([w,O],R),F=S.Util.normalizeRect([x[0],x[1],u[0],u[1]]),Z=Math.round(F[2]-F[0])||1,j=Math.round(F[3]-F[1])||1,V=this.cachedCanvases.getCanvas("fillCanvas",Z,j),Q=V.context,ot=Math.min(x[0],u[0]),ut=Math.min(x[1],u[1]);Q.translate(-ot,-ut),Q.transform(...R),p||(p=this._scaleImage(v.canvas,(0,C.getCurrentTransformInverse)(Q)),p=p.img,d&&I&&d.set(_,p)),Q.imageSmoothingEnabled=at((0,C.getCurrentTransform)(Q),h.interpolate),o(Q,p,0,0,p.width,p.height,0,0,w,O),Q.globalCompositeOperation="source-in";const st=S.Util.transform((0,C.getCurrentTransformInverse)(Q),[1,0,0,1,-ot,-ut]);return Q.fillStyle=I?D.getPattern(a,this,st,Y.PathType.FILL):D,Q.fillRect(0,0,w,O),d&&!I&&(this.cachedCanvases.delete("fillCanvas"),d.set(_,V.canvas)),{canvas:V.canvas,offsetX:Math.round(ot),offsetY:Math.round(ut)}}setLineWidth(h){h!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=h,this.ctx.lineWidth=h}setLineCap(h){this.ctx.lineCap=J[h]}setLineJoin(h){this.ctx.lineJoin=$[h]}setMiterLimit(h){this.ctx.miterLimit=h}setDash(h,a){const w=this.ctx;w.setLineDash!==void 0&&(w.setLineDash(h),w.lineDashOffset=a)}setRenderingIntent(h){}setFlatness(h){}setGState(h){for(let a=0,w=h.length;a<w;a++){const O=h[a],D=O[0],I=O[1];switch(D){case"LW":this.setLineWidth(I);break;case"LC":this.setLineCap(I);break;case"LJ":this.setLineJoin(I);break;case"ML":this.setMiterLimit(I);break;case"D":this.setDash(I[0],I[1]);break;case"RI":this.setRenderingIntent(I);break;case"FL":this.setFlatness(I);break;case"Font":this.setFont(I[0],I[1]);break;case"CA":this.current.strokeAlpha=O[1];break;case"ca":this.current.fillAlpha=O[1],this.ctx.globalAlpha=O[1];break;case"BM":this.ctx.globalCompositeOperation=I;break;case"SMask":this.current.activeSMask=I?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=I}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const h=this.inSMaskMode;this.current.activeSMask&&!h?this.beginSMaskMode():!this.current.activeSMask&&h&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const h=this.ctx.canvas.width,a=this.ctx.canvas.height,w="smaskGroupAt"+this.groupLevel,O=this.cachedCanvases.getCanvas(w,h,a);this.suspendedCtx=this.ctx,this.ctx=O.context;const D=this.ctx;D.setTransform(...(0,C.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,D),t(D,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(h){if(!this.current.activeSMask)return;h?(h[0]=Math.floor(h[0]),h[1]=Math.floor(h[1]),h[2]=Math.ceil(h[2]),h[3]=Math.ceil(h[3])):h=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const a=this.current.activeSMask,w=this.suspendedCtx;nt(w,a,this.ctx,h),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const h=this.current;this.stateStack.push(h),this.current=h.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(h,a,w,O,D,I){this.ctx.transform(h,a,w,O,D,I),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(h,a,w){const O=this.ctx,D=this.current;let I=D.x,s=D.y,d,_;const p=(0,C.getCurrentTransform)(O),v=p[0]===0&&p[3]===0||p[1]===0&&p[2]===0,R=v?w.slice(0):null;for(let x=0,u=0,F=h.length;x<F;x++)switch(h[x]|0){case S.OPS.rectangle:I=a[u++],s=a[u++];const Z=a[u++],j=a[u++],V=I+Z,Q=s+j;O.moveTo(I,s),Z===0||j===0?O.lineTo(V,Q):(O.lineTo(V,s),O.lineTo(V,Q),O.lineTo(I,Q)),v||D.updateRectMinMax(p,[I,s,V,Q]),O.closePath();break;case S.OPS.moveTo:I=a[u++],s=a[u++],O.moveTo(I,s),v||D.updatePathMinMax(p,I,s);break;case S.OPS.lineTo:I=a[u++],s=a[u++],O.lineTo(I,s),v||D.updatePathMinMax(p,I,s);break;case S.OPS.curveTo:d=I,_=s,I=a[u+4],s=a[u+5],O.bezierCurveTo(a[u],a[u+1],a[u+2],a[u+3],I,s),D.updateCurvePathMinMax(p,d,_,a[u],a[u+1],a[u+2],a[u+3],I,s,R),u+=6;break;case S.OPS.curveTo2:d=I,_=s,O.bezierCurveTo(I,s,a[u],a[u+1],a[u+2],a[u+3]),D.updateCurvePathMinMax(p,d,_,I,s,a[u],a[u+1],a[u+2],a[u+3],R),I=a[u+2],s=a[u+3],u+=4;break;case S.OPS.curveTo3:d=I,_=s,I=a[u+2],s=a[u+3],O.bezierCurveTo(a[u],a[u+1],I,s,I,s),D.updateCurvePathMinMax(p,d,_,a[u],a[u+1],I,s,I,s,R),u+=4;break;case S.OPS.closePath:O.closePath();break}v&&D.updateScalingPathMinMax(p,R),D.setCurrentPoint(I,s)}closePath(){this.ctx.closePath()}stroke(h){h=typeof h<"u"?h:!0;const a=this.ctx,w=this.current.strokeColor;a.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof w=="object"&&(w!=null&&w.getPattern)?(a.save(),a.strokeStyle=w.getPattern(a,this,(0,C.getCurrentTransformInverse)(a),Y.PathType.STROKE),this.rescaleAndStroke(!1),a.restore()):this.rescaleAndStroke(!0)),h&&this.consumePath(this.current.getClippedPathBoundingBox()),a.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(h){h=typeof h<"u"?h:!0;const a=this.ctx,w=this.current.fillColor,O=this.current.patternFill;let D=!1;O&&(a.save(),a.fillStyle=w.getPattern(a,this,(0,C.getCurrentTransformInverse)(a),Y.PathType.FILL),D=!0);const I=this.current.getClippedPathBoundingBox();this.contentVisible&&I!==null&&(this.pendingEOFill?(a.fill("evenodd"),this.pendingEOFill=!1):a.fill()),D&&a.restore(),h&&this.consumePath(I)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=B}eoClip(){this.pendingClip=W}beginText(){this.current.textMatrix=S.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const h=this.pendingTextPaths,a=this.ctx;if(h===void 0){a.beginPath();return}a.save(),a.beginPath();for(const w of h)a.setTransform(...w.transform),a.translate(w.x,w.y),w.addToPath(a,w.fontSize);a.restore(),a.clip(),a.beginPath(),delete this.pendingTextPaths}setCharSpacing(h){this.current.charSpacing=h}setWordSpacing(h){this.current.wordSpacing=h}setHScale(h){this.current.textHScale=h/100}setLeading(h){this.current.leading=-h}setFont(h,a){const w=this.commonObjs.get(h),O=this.current;if(!w)throw new Error(`Can't find font for ${h}`);if(O.fontMatrix=w.fontMatrix||S.FONT_IDENTITY_MATRIX,(O.fontMatrix[0]===0||O.fontMatrix[3]===0)&&(0,S.warn)("Invalid font matrix for font "+h),a<0?(a=-a,O.fontDirection=-1):O.fontDirection=1,this.current.font=w,this.current.fontSize=a,w.isType3Font)return;const D=w.loadedName||"sans-serif";let I="normal";w.black?I="900":w.bold&&(I="bold");const s=w.italic?"italic":"normal",d=`"${D}", ${w.fallbackName}`;let _=a;a<q?_=q:a>A&&(_=A),this.current.fontSizeScale=a/_,this.ctx.font=`${s} ${I} ${_}px ${d}`}setTextRenderingMode(h){this.current.textRenderingMode=h}setTextRise(h){this.current.textRise=h}moveText(h,a){this.current.x=this.current.lineX+=h,this.current.y=this.current.lineY+=a}setLeadingMoveText(h,a){this.setLeading(-a),this.moveText(h,a)}setTextMatrix(h,a,w,O,D,I){this.current.textMatrix=[h,a,w,O,D,I],this.current.textMatrixScale=Math.hypot(h,a),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(h,a,w,O){const D=this.ctx,I=this.current,s=I.font,d=I.textRenderingMode,_=I.fontSize/I.fontSizeScale,p=d&S.TextRenderingMode.FILL_STROKE_MASK,v=!!(d&S.TextRenderingMode.ADD_TO_PATH_FLAG),R=I.patternFill&&!s.missingFile;let x;(s.disableFontFace||v||R)&&(x=s.getPathGenerator(this.commonObjs,h)),s.disableFontFace||R?(D.save(),D.translate(a,w),D.beginPath(),x(D,_),O&&D.setTransform(...O),(p===S.TextRenderingMode.FILL||p===S.TextRenderingMode.FILL_STROKE)&&D.fill(),(p===S.TextRenderingMode.STROKE||p===S.TextRenderingMode.FILL_STROKE)&&D.stroke(),D.restore()):((p===S.TextRenderingMode.FILL||p===S.TextRenderingMode.FILL_STROKE)&&D.fillText(h,a,w),(p===S.TextRenderingMode.STROKE||p===S.TextRenderingMode.FILL_STROKE)&&D.strokeText(h,a,w)),v&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,C.getCurrentTransform)(D),x:a,y:w,fontSize:_,addToPath:x})}get isFontSubpixelAAEnabled(){const{context:h}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);h.scale(1.5,1),h.fillText("I",0,10);const a=h.getImageData(0,0,10,10).data;let w=!1;for(let O=3;O<a.length;O+=4)if(a[O]>0&&a[O]<255){w=!0;break}return(0,S.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(h){const a=this.current,w=a.font;if(w.isType3Font)return this.showType3Text(h);const O=a.fontSize;if(O===0)return;const D=this.ctx,I=a.fontSizeScale,s=a.charSpacing,d=a.wordSpacing,_=a.fontDirection,p=a.textHScale*_,v=h.length,R=w.vertical,x=R?1:-1,u=w.defaultVMetrics,F=O*a.fontMatrix[0],Z=a.textRenderingMode===S.TextRenderingMode.FILL&&!w.disableFontFace&&!a.patternFill;D.save(),D.transform(...a.textMatrix),D.translate(a.x,a.y+a.textRise),_>0?D.scale(p,-1):D.scale(p,1);let j;if(a.patternFill){D.save();const st=a.fillColor.getPattern(D,this,(0,C.getCurrentTransformInverse)(D),Y.PathType.FILL);j=(0,C.getCurrentTransform)(D),D.restore(),D.fillStyle=st}let V=a.lineWidth;const Q=a.textMatrixScale;if(Q===0||V===0){const st=a.textRenderingMode&S.TextRenderingMode.FILL_STROKE_MASK;(st===S.TextRenderingMode.STROKE||st===S.TextRenderingMode.FILL_STROKE)&&(V=this.getSinglePixelWidth())}else V/=Q;I!==1&&(D.scale(I,I),V/=I),D.lineWidth=V;let ot=0,ut;for(ut=0;ut<v;++ut){const st=h[ut];if(typeof st=="number"){ot+=x*st*O/1e3;continue}let bt=!1;const mt=(st.isSpace?d:0)+s,gt=st.fontChar,At=st.accent;let yt,xt,vt=st.width;if(R){const Et=st.vmetric||u,Ct=-(st.vmetric?Et[1]:vt*.5)*F,Dt=Et[2]*F;vt=Et?-Et[0]:vt,yt=Ct/I,xt=(ot+Dt)/I}else yt=ot/I,xt=0;if(w.remeasure&&vt>0){const Et=D.measureText(gt).width*1e3/O*I;if(vt<Et&&this.isFontSubpixelAAEnabled){const Ct=vt/Et;bt=!0,D.save(),D.scale(Ct,1),yt/=Ct}else vt!==Et&&(yt+=(vt-Et)/2e3*O/I)}if(this.contentVisible&&(st.isInFont||w.missingFile)){if(Z&&!At)D.fillText(gt,yt,xt);else if(this.paintChar(gt,yt,xt,j),At){const Et=yt+O*At.offset.x/I,Ct=xt-O*At.offset.y/I;this.paintChar(At.fontChar,Et,Ct,j)}}let Pt;R?Pt=vt*F-mt*_:Pt=vt*F+mt*_,ot+=Pt,bt&&D.restore()}R?a.y-=ot:a.x+=ot*p,D.restore(),this.compose()}showType3Text(h){const a=this.ctx,w=this.current,O=w.font,D=w.fontSize,I=w.fontDirection,s=O.vertical?1:-1,d=w.charSpacing,_=w.wordSpacing,p=w.textHScale*I,v=w.fontMatrix||S.FONT_IDENTITY_MATRIX,R=h.length,x=w.textRenderingMode===S.TextRenderingMode.INVISIBLE;let u,F,Z,j;if(!(x||D===0)){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,a.save(),a.transform(...w.textMatrix),a.translate(w.x,w.y),a.scale(p,I),u=0;u<R;++u){if(F=h[u],typeof F=="number"){j=s*F*D/1e3,this.ctx.translate(j,0),w.x+=j*p;continue}const V=(F.isSpace?_:0)+d,Q=O.charProcOperatorList[F.operatorListId];if(!Q){(0,S.warn)(`Type3 character "${F.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=F,this.save(),a.scale(D,D),a.transform(...v),this.executeOperatorList(Q),this.restore()),Z=S.Util.applyTransform([F.width,0],v)[0]*D+V,a.translate(Z,0),w.x+=Z*p}a.restore(),this.processingType3=null}}setCharWidth(h,a){}setCharWidthAndBounds(h,a,w,O,D,I){this.ctx.rect(w,O,D-w,I-O),this.ctx.clip(),this.endPath()}getColorN_Pattern(h){let a;if(h[0]==="TilingPattern"){const w=h[1],O=this.baseTransform||(0,C.getCurrentTransform)(this.ctx),D={createCanvasGraphics:I=>new ft(I,this.commonObjs,this.objs,this.canvasFactory)};a=new Y.TilingPattern(h,w,this.ctx,D,O)}else a=this._getPattern(h[1],h[2]);return a}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(h,a,w){var D;const O=((D=this.selectColor)==null?void 0:D.call(this,h,a,w))||S.Util.makeHexColor(h,a,w);this.ctx.strokeStyle=O,this.current.strokeColor=O}setFillRGBColor(h,a,w){var D;const O=((D=this.selectColor)==null?void 0:D.call(this,h,a,w))||S.Util.makeHexColor(h,a,w);this.ctx.fillStyle=O,this.current.fillColor=O,this.current.patternFill=!1}_getPattern(h,a=null){let w;return this.cachedPatterns.has(h)?w=this.cachedPatterns.get(h):(w=(0,Y.getShadingPattern)(this.objs.get(h)),this.cachedPatterns.set(h,w)),a&&(w.matrix=a),w}shadingFill(h){if(!this.contentVisible)return;const a=this.ctx;this.save();const w=this._getPattern(h);a.fillStyle=w.getPattern(a,this,(0,C.getCurrentTransformInverse)(a),Y.PathType.SHADING);const O=(0,C.getCurrentTransformInverse)(a);if(O){const D=a.canvas,I=D.width,s=D.height,d=S.Util.applyTransform([0,0],O),_=S.Util.applyTransform([0,s],O),p=S.Util.applyTransform([I,0],O),v=S.Util.applyTransform([I,s],O),R=Math.min(d[0],_[0],p[0],v[0]),x=Math.min(d[1],_[1],p[1],v[1]),u=Math.max(d[0],_[0],p[0],v[0]),F=Math.max(d[1],_[1],p[1],v[1]);this.ctx.fillRect(R,x,u-R,F-x)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,S.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,S.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(h,a){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(h)&&h.length===6&&this.transform(...h),this.baseTransform=(0,C.getCurrentTransform)(this.ctx),a)){const w=a[2]-a[0],O=a[3]-a[1];this.ctx.rect(a[0],a[1],w,O),this.current.updateRectMinMax((0,C.getCurrentTransform)(this.ctx),a),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(h){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const a=this.ctx;h.isolated||(0,S.info)("TODO: Support non-isolated groups."),h.knockout&&(0,S.warn)("Knockout groups not supported.");const w=(0,C.getCurrentTransform)(a);if(h.matrix&&a.transform(...h.matrix),!h.bbox)throw new Error("Bounding box is required.");let O=S.Util.getAxialAlignedBoundingBox(h.bbox,(0,C.getCurrentTransform)(a));const D=[0,0,a.canvas.width,a.canvas.height];O=S.Util.intersect(O,D)||[0,0,0,0];const I=Math.floor(O[0]),s=Math.floor(O[1]);let d=Math.max(Math.ceil(O[2])-I,1),_=Math.max(Math.ceil(O[3])-s,1),p=1,v=1;d>k&&(p=d/k,d=k),_>k&&(v=_/k,_=k),this.current.startNewPathAndClipBox([0,0,d,_]);let R="groupAt"+this.groupLevel;h.smask&&(R+="_smask_"+this.smaskCounter++%2);const x=this.cachedCanvases.getCanvas(R,d,_),u=x.context;u.scale(1/p,1/v),u.translate(-I,-s),u.transform(...w),h.smask?this.smaskStack.push({canvas:x.canvas,context:u,offsetX:I,offsetY:s,scaleX:p,scaleY:v,subtype:h.smask.subtype,backdrop:h.smask.backdrop,transferMap:h.smask.transferMap||null,startTransformInverse:null}):(a.setTransform(1,0,0,1,0,0),a.translate(I,s),a.scale(p,v),a.save()),i(a,u),this.ctx=u,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(a),this.groupLevel++}endGroup(h){if(!this.contentVisible)return;this.groupLevel--;const a=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,h.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const O=(0,C.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...O);const D=S.Util.getAxialAlignedBoundingBox([0,0,a.canvas.width,a.canvas.height],O);this.ctx.drawImage(a.canvas,0,0),this.ctx.restore(),this.compose(D)}}beginAnnotation(h,a,w,O,D){if(ct(this,et,he).call(this),e(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(a)&&a.length===4){const I=a[2]-a[0],s=a[3]-a[1];if(D&&this.annotationCanvasMap){w=w.slice(),w[4]-=a[0],w[5]-=a[1],a=a.slice(),a[0]=a[1]=0,a[2]=I,a[3]=s;const[d,_]=S.Util.singularValueDecompose2dScale((0,C.getCurrentTransform)(this.ctx)),{viewportScale:p}=this,v=Math.ceil(I*this.outputScaleX*p),R=Math.ceil(s*this.outputScaleY*p);this.annotationCanvas=this.canvasFactory.create(v,R);const{canvas:x,context:u}=this.annotationCanvas;this.annotationCanvasMap.set(h,x),this.annotationCanvas.savedCtx=this.ctx,this.ctx=u,this.ctx.setTransform(d,0,0,-_,0,s*_),e(this.ctx,this.foregroundColor)}else e(this.ctx,this.foregroundColor),this.ctx.rect(a[0],a[1],I,s),this.ctx.clip(),this.endPath()}this.current=new f(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...O)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(h){if(!this.contentVisible)return;const a=h.count;h=this.getObject(h.data,h),h.count=a;const w=this.ctx,O=this.processingType3;if(O&&(O.compiled===void 0&&(O.compiled=b(h)),O.compiled)){O.compiled(w);return}const D=this._createMaskCanvas(h),I=D.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(I,D.offsetX,D.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(h,a,w=0,O=0,D,I){if(!this.contentVisible)return;h=this.getObject(h.data,h);const s=this.ctx;s.save();const d=(0,C.getCurrentTransform)(s);s.transform(a,w,O,D,0,0);const _=this._createMaskCanvas(h);s.setTransform(1,0,0,1,0,0);for(let p=0,v=I.length;p<v;p+=2){const R=S.Util.transform(d,[a,w,O,D,I[p],I[p+1]]),[x,u]=S.Util.applyTransform([0,0],R);s.drawImage(_.canvas,x,u)}s.restore(),this.compose()}paintImageMaskXObjectGroup(h){if(!this.contentVisible)return;const a=this.ctx,w=this.current.fillColor,O=this.current.patternFill;for(const D of h){const{data:I,width:s,height:d,transform:_}=D,p=this.cachedCanvases.getCanvas("maskCanvas",s,d),v=p.context;v.save();const R=this.getObject(I,D);n(v,R),v.globalCompositeOperation="source-in",v.fillStyle=O?w.getPattern(v,this,(0,C.getCurrentTransformInverse)(a),Y.PathType.FILL):w,v.fillRect(0,0,s,d),v.restore(),a.save(),a.transform(..._),a.scale(1,-1),o(a,p.canvas,0,0,s,d,0,-1,1,1),a.restore()}this.compose()}paintImageXObject(h){if(!this.contentVisible)return;const a=this.getObject(h);if(!a){(0,S.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(a)}paintImageXObjectRepeat(h,a,w,O){if(!this.contentVisible)return;const D=this.getObject(h);if(!D){(0,S.warn)("Dependent image isn't ready yet");return}const I=D.width,s=D.height,d=[];for(let _=0,p=O.length;_<p;_+=2)d.push({transform:[a,0,0,w,O[_],O[_+1]],x:0,y:0,w:I,h:s});this.paintInlineImageXObjectGroup(D,d)}paintInlineImageXObject(h){if(!this.contentVisible)return;const a=h.width,w=h.height,O=this.ctx;this.save(),O.scale(1/a,-1/w);let D;if(typeof HTMLElement=="function"&&h instanceof HTMLElement||!h.data)D=h;else{const _=this.cachedCanvases.getCanvas("inlineImage",a,w),p=_.context;l(p,h,this.current.transferMaps),D=_.canvas}const I=this._scaleImage(D,(0,C.getCurrentTransformInverse)(O));O.imageSmoothingEnabled=at((0,C.getCurrentTransform)(O),h.interpolate);const[s,d]=o(O,I.img,0,0,I.paintWidth,I.paintHeight,0,-w,a,w);if(this.imageLayer){const[_,p]=S.Util.applyTransform([0,-w],(0,C.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:_,top:p,width:s,height:d})}this.compose(),this.restore()}paintInlineImageXObjectGroup(h,a){if(!this.contentVisible)return;const w=this.ctx,O=h.width,D=h.height,I=this.cachedCanvases.getCanvas("inlineImage",O,D),s=I.context;l(s,h,this.current.transferMaps);for(const d of a){if(w.save(),w.transform(...d.transform),w.scale(1,-1),o(w,I.canvas,d.x,d.y,d.w,d.h,0,-1,1,1),this.imageLayer){const[_,p]=S.Util.applyTransform([d.x,d.y],(0,C.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:h,left:_,top:p,width:O,height:D})}w.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(h){}markPointProps(h,a){}beginMarkedContent(h){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(h,a){h==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(a)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(h){const a=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(h);const w=this.ctx;this.pendingClip&&(a||(this.pendingClip===W?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const h=(0,C.getCurrentTransform)(this.ctx);if(h[1]===0&&h[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(h[0]),Math.abs(h[3]));else{const a=Math.abs(h[0]*h[3]-h[2]*h[1]),w=Math.hypot(h[0],h[2]),O=Math.hypot(h[1],h[3]);this._cachedGetSinglePixelWidth=Math.max(w,O)/a}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:h}=this.current,a=(0,C.getCurrentTransform)(this.ctx);let w,O;if(a[1]===0&&a[2]===0){const D=Math.abs(a[0]),I=Math.abs(a[3]);if(h===0)w=1/D,O=1/I;else{const s=D*h,d=I*h;w=s<1?1/s:1,O=d<1?1/d:1}}else{const D=Math.abs(a[0]*a[3]-a[2]*a[1]),I=Math.hypot(a[0],a[1]),s=Math.hypot(a[2],a[3]);if(h===0)w=s/D,O=I/D;else{const d=h*D;w=s>d?s/d:1,O=I>d?I/d:1}}this._cachedScaleForStroking=[w,O]}return this._cachedScaleForStroking}rescaleAndStroke(h){const{ctx:a}=this,{lineWidth:w}=this.current,[O,D]=this.getScaleForStroking();if(a.lineWidth=w||1,O===1&&D===1){a.stroke();return}let I,s,d;h&&(I=(0,C.getCurrentTransform)(a),s=a.getLineDash().slice(),d=a.lineDashOffset),a.scale(O,D);const _=Math.max(O,D);a.setLineDash(a.getLineDash().map(p=>p/_)),a.lineDashOffset/=_,a.stroke(),h&&(a.setTransform(...I),a.setLineDash(s),a.lineDashOffset=d)}isContentVisible(){for(let h=this.markedContentStack.length-1;h>=0;h--)if(!this.markedContentStack[h].visible)return!1;return!0}};et=new WeakSet,he=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)};let H=ft;g.CanvasGraphics=H;for(const U in S.OPS)H.prototype[U]!==void 0&&(H.prototype[S.OPS[U]]=H.prototype[U])},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TilingPattern=g.PathType=void 0,g.getShadingPattern=c;var C=K(1),S=K(8),Y=K(3);const G={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};g.PathType=G;function tt(o,b){if(!b||Y.isNodeJS)return;const f=b[2]-b[0],l=b[3]-b[1],n=new Path2D;n.rect(b[0],b[1],f,l),o.clip(n)}class q{constructor(){this.constructor===q&&(0,C.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,C.unreachable)("Abstract method `getPattern` called.")}}class A extends q{constructor(b){super(),this._type=b[1],this._bbox=b[2],this._colorStops=b[3],this._p0=b[4],this._p1=b[5],this._r0=b[6],this._r1=b[7],this.matrix=null}_createGradient(b){let f;this._type==="axial"?f=b.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(f=b.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const l of this._colorStops)f.addColorStop(l[0],l[1]);return f}getPattern(b,f,l,n){let i;if(n===G.STROKE||n===G.FILL){const e=f.current.getClippedPathBoundingBox(n,(0,S.getCurrentTransform)(b))||[0,0,0,0],m=Math.ceil(e[2]-e[0])||1,y=Math.ceil(e[3]-e[1])||1,N=f.cachedCanvases.getCanvas("pattern",m,y,!0),L=N.context;L.clearRect(0,0,L.canvas.width,L.canvas.height),L.beginPath(),L.rect(0,0,L.canvas.width,L.canvas.height),L.translate(-e[0],-e[1]),l=C.Util.transform(l,[1,0,0,1,e[0],e[1]]),L.transform(...f.baseTransform),this.matrix&&L.transform(...this.matrix),tt(L,this._bbox),L.fillStyle=this._createGradient(L),L.fill(),i=b.createPattern(N.canvas,"no-repeat");const nt=new DOMMatrix(l);try{i.setTransform(nt)}catch(at){(0,C.warn)(`RadialAxialShadingPattern.getPattern: "${at==null?void 0:at.message}".`)}}else tt(b,this._bbox),i=this._createGradient(b);return i}}function k(o,b,f,l,n,i,e,m){const y=b.coords,N=b.colors,L=o.data,nt=o.width*4;let at;y[f+1]>y[l+1]&&(at=f,f=l,l=at,at=i,i=e,e=at),y[l+1]>y[n+1]&&(at=l,l=n,n=at,at=e,e=m,m=at),y[f+1]>y[l+1]&&(at=f,f=l,l=at,at=i,i=e,e=at);const J=(y[f]+b.offsetX)*b.scaleX,$=(y[f+1]+b.offsetY)*b.scaleY,B=(y[l]+b.offsetX)*b.scaleX,W=(y[l+1]+b.offsetY)*b.scaleY,H=(y[n]+b.offsetX)*b.scaleX,et=(y[n+1]+b.offsetY)*b.scaleY;if($>=et)return;const lt=N[i],ft=N[i+1],U=N[i+2],h=N[e],a=N[e+1],w=N[e+2],O=N[m],D=N[m+1],I=N[m+2],s=Math.round($),d=Math.round(et);let _,p,v,R,x,u,F,Z;for(let j=s;j<=d;j++){if(j<W){let st;j<$?st=0:st=($-j)/($-W),_=J-(J-B)*st,p=lt-(lt-h)*st,v=ft-(ft-a)*st,R=U-(U-w)*st}else{let st;j>et?st=1:W===et?st=0:st=(W-j)/(W-et),_=B-(B-H)*st,p=h-(h-O)*st,v=a-(a-D)*st,R=w-(w-I)*st}let V;j<$?V=0:j>et?V=1:V=($-j)/($-et),x=J-(J-H)*V,u=lt-(lt-O)*V,F=ft-(ft-D)*V,Z=U-(U-I)*V;const Q=Math.round(Math.min(_,x)),ot=Math.round(Math.max(_,x));let ut=nt*j+Q*4;for(let st=Q;st<=ot;st++)V=(_-st)/(_-x),V<0?V=0:V>1&&(V=1),L[ut++]=p-(p-u)*V|0,L[ut++]=v-(v-F)*V|0,L[ut++]=R-(R-Z)*V|0,L[ut++]=255}}function M(o,b,f){const l=b.coords,n=b.colors;let i,e;switch(b.type){case"lattice":const m=b.verticesPerRow,y=Math.floor(l.length/m)-1,N=m-1;for(i=0;i<y;i++){let L=i*m;for(let nt=0;nt<N;nt++,L++)k(o,f,l[L],l[L+1],l[L+m],n[L],n[L+1],n[L+m]),k(o,f,l[L+m+1],l[L+1],l[L+m],n[L+m+1],n[L+1],n[L+m])}break;case"triangles":for(i=0,e=l.length;i<e;i+=3)k(o,f,l[i],l[i+1],l[i+2],n[i],n[i+1],n[i+2]);break;default:throw new Error("illegal figure")}}class T extends q{constructor(b){super(),this._coords=b[2],this._colors=b[3],this._figures=b[4],this._bounds=b[5],this._bbox=b[7],this._background=b[8],this.matrix=null}_createMeshCanvas(b,f,l){const m=Math.floor(this._bounds[0]),y=Math.floor(this._bounds[1]),N=Math.ceil(this._bounds[2])-m,L=Math.ceil(this._bounds[3])-y,nt=Math.min(Math.ceil(Math.abs(N*b[0]*1.1)),3e3),at=Math.min(Math.ceil(Math.abs(L*b[1]*1.1)),3e3),J=N/nt,$=L/at,B={coords:this._coords,colors:this._colors,offsetX:-m,offsetY:-y,scaleX:1/J,scaleY:1/$},W=nt+2*2,H=at+2*2,et=l.getCanvas("mesh",W,H,!1),lt=et.context,ft=lt.createImageData(nt,at);if(f){const h=ft.data;for(let a=0,w=h.length;a<w;a+=4)h[a]=f[0],h[a+1]=f[1],h[a+2]=f[2],h[a+3]=255}for(const h of this._figures)M(ft,h,B);return lt.putImageData(ft,2,2),{canvas:et.canvas,offsetX:m-2*J,offsetY:y-2*$,scaleX:J,scaleY:$}}getPattern(b,f,l,n){tt(b,this._bbox);let i;if(n===G.SHADING)i=C.Util.singularValueDecompose2dScale((0,S.getCurrentTransform)(b));else if(i=C.Util.singularValueDecompose2dScale(f.baseTransform),this.matrix){const m=C.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*m[0],i[1]*m[1]]}const e=this._createMeshCanvas(i,n===G.SHADING?null:this._background,f.cachedCanvases);return n!==G.SHADING&&(b.setTransform(...f.baseTransform),this.matrix&&b.transform(...this.matrix)),b.translate(e.offsetX,e.offsetY),b.scale(e.scaleX,e.scaleY),b.createPattern(e.canvas,"no-repeat")}}class E extends q{getPattern(){return"hotpink"}}function c(o){switch(o[0]){case"RadialAxial":return new A(o);case"Mesh":return new T(o);case"Dummy":return new E}throw new Error(`Unknown IR type: ${o[0]}`)}const t={COLORED:1,UNCOLORED:2};class r{static get MAX_PATTERN_SIZE(){return(0,C.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(b,f,l,n,i){this.operatorList=b[2],this.matrix=b[3]||[1,0,0,1,0,0],this.bbox=b[4],this.xstep=b[5],this.ystep=b[6],this.paintType=b[7],this.tilingType=b[8],this.color=f,this.ctx=l,this.canvasGraphicsFactory=n,this.baseTransform=i}createPatternCanvas(b){const f=this.operatorList,l=this.bbox,n=this.xstep,i=this.ystep,e=this.paintType,m=this.tilingType,y=this.color,N=this.canvasGraphicsFactory;(0,C.info)("TilingType: "+m);const L=l[0],nt=l[1],at=l[2],J=l[3],$=C.Util.singularValueDecompose2dScale(this.matrix),B=C.Util.singularValueDecompose2dScale(this.baseTransform),W=[$[0]*B[0],$[1]*B[1]],H=this.getSizeAndScale(n,this.ctx.canvas.width,W[0]),et=this.getSizeAndScale(i,this.ctx.canvas.height,W[1]),lt=b.cachedCanvases.getCanvas("pattern",H.size,et.size,!0),ft=lt.context,U=N.createCanvasGraphics(ft);U.groupLevel=b.groupLevel,this.setFillAndStrokeStyleToContext(U,e,y);let h=L,a=nt,w=at,O=J;return L<0&&(h=0,w+=Math.abs(L)),nt<0&&(a=0,O+=Math.abs(nt)),ft.translate(-(H.scale*h),-(et.scale*a)),U.transform(H.scale,0,0,et.scale,0,0),ft.save(),this.clipBbox(U,h,a,w,O),U.baseTransform=(0,S.getCurrentTransform)(U.ctx),U.executeOperatorList(f),U.endDrawing(),{canvas:lt.canvas,scaleX:H.scale,scaleY:et.scale,offsetX:h,offsetY:a}}getSizeAndScale(b,f,l){b=Math.abs(b);const n=Math.max(r.MAX_PATTERN_SIZE,f);let i=Math.ceil(b*l);return i>=n?i=n:l=i/b,{scale:l,size:i}}clipBbox(b,f,l,n,i){const e=n-f,m=i-l;b.ctx.rect(f,l,e,m),b.current.updateRectMinMax((0,S.getCurrentTransform)(b.ctx),[f,l,n,i]),b.clip(),b.endPath()}setFillAndStrokeStyleToContext(b,f,l){const n=b.ctx,i=b.current;switch(f){case t.COLORED:const e=this.ctx;n.fillStyle=e.fillStyle,n.strokeStyle=e.strokeStyle,i.fillColor=e.fillStyle,i.strokeColor=e.strokeStyle;break;case t.UNCOLORED:const m=C.Util.makeHexColor(l[0],l[1],l[2]);n.fillStyle=m,n.strokeStyle=m,i.fillColor=m,i.strokeColor=m;break;default:throw new C.FormatError(`Unsupported paint type: ${f}`)}}getPattern(b,f,l,n){let i=l;n!==G.SHADING&&(i=C.Util.transform(i,f.baseTransform),this.matrix&&(i=C.Util.transform(i,this.matrix)));const e=this.createPatternCanvas(f);let m=new DOMMatrix(i);m=m.translate(e.offsetX,e.offsetY),m=m.scale(1/e.scaleX,1/e.scaleY);const y=b.createPattern(e.canvas,"repeat");try{y.setTransform(m)}catch(N){(0,C.warn)(`TilingPattern.getPattern: "${N==null?void 0:N.message}".`)}return y}}g.TilingPattern=r},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.applyMaskImageData=S;var C=K(1);function S({src:Y,srcPos:G=0,dest:tt,destPos:q=0,width:A,height:k,inverseDecode:M=!1}){const T=C.FeatureTest.isLittleEndian?4278190080:255,[E,c]=M?[0,T]:[T,0],t=A>>3,r=A&7,o=Y.length;tt=new Uint32Array(tt.buffer);for(let b=0;b<k;b++){for(const l=G+t;G<l;G++){const n=G<o?Y[G]:255;tt[q++]=n&128?c:E,tt[q++]=n&64?c:E,tt[q++]=n&32?c:E,tt[q++]=n&16?c:E,tt[q++]=n&8?c:E,tt[q++]=n&4?c:E,tt[q++]=n&2?c:E,tt[q++]=n&1?c:E}if(r===0)continue;const f=G<o?Y[G++]:255;for(let l=0;l<r;l++)tt[q++]=f&1<<7-l?c:E}return{srcPos:G,destPos:q}}},(rt,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.GlobalWorkerOptions=void 0;const K=Object.create(null);g.GlobalWorkerOptions=K,K.workerPort=K.workerPort===void 0?null:K.workerPort,K.workerSrc=K.workerSrc===void 0?"":K.workerSrc},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.MessageHandler=void 0;var C=K(1);const S={DATA:1,ERROR:2},Y={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function G(q){switch(q instanceof Error||typeof q=="object"&&q!==null||(0,C.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),q.name){case"AbortException":return new C.AbortException(q.message);case"MissingPDFException":return new C.MissingPDFException(q.message);case"PasswordException":return new C.PasswordException(q.message,q.code);case"UnexpectedResponseException":return new C.UnexpectedResponseException(q.message,q.status);case"UnknownErrorException":return new C.UnknownErrorException(q.message,q.details);default:return new C.UnknownErrorException(q.message,q.toString())}}class tt{constructor(A,k,M){this.sourceName=A,this.targetName=k,this.comObj=M,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=T=>{const E=T.data;if(E.targetName!==this.sourceName)return;if(E.stream){this._processStreamMessage(E);return}if(E.callback){const t=E.callbackId,r=this.callbackCapabilities[t];if(!r)throw new Error(`Cannot resolve callback ${t}`);if(delete this.callbackCapabilities[t],E.callback===S.DATA)r.resolve(E.data);else if(E.callback===S.ERROR)r.reject(G(E.reason));else throw new Error("Unexpected callback case");return}const c=this.actionHandler[E.action];if(!c)throw new Error(`Unknown action from worker: ${E.action}`);if(E.callbackId){const t=this.sourceName,r=E.sourceName;new Promise(function(o){o(c(E.data))}).then(function(o){M.postMessage({sourceName:t,targetName:r,callback:S.DATA,callbackId:E.callbackId,data:o})},function(o){M.postMessage({sourceName:t,targetName:r,callback:S.ERROR,callbackId:E.callbackId,reason:G(o)})});return}if(E.streamId){this._createStreamSink(E);return}c(E.data)},M.addEventListener("message",this._onComObjOnMessage)}on(A,k){const M=this.actionHandler;if(M[A])throw new Error(`There is already an actionName called "${A}"`);M[A]=k}send(A,k,M){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,data:k},M)}sendWithPromise(A,k,M){const T=this.callbackId++,E=(0,C.createPromiseCapability)();this.callbackCapabilities[T]=E;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:A,callbackId:T,data:k},M)}catch(c){E.reject(c)}return E.promise}sendWithStream(A,k,M,T){const E=this.streamId++,c=this.sourceName,t=this.targetName,r=this.comObj;return new ReadableStream({start:o=>{const b=(0,C.createPromiseCapability)();return this.streamControllers[E]={controller:o,startCall:b,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:c,targetName:t,action:A,streamId:E,data:k,desiredSize:o.desiredSize},T),b.promise},pull:o=>{const b=(0,C.createPromiseCapability)();return this.streamControllers[E].pullCall=b,r.postMessage({sourceName:c,targetName:t,stream:Y.PULL,streamId:E,desiredSize:o.desiredSize}),b.promise},cancel:o=>{(0,C.assert)(o instanceof Error,"cancel must have a valid reason");const b=(0,C.createPromiseCapability)();return this.streamControllers[E].cancelCall=b,this.streamControllers[E].isClosed=!0,r.postMessage({sourceName:c,targetName:t,stream:Y.CANCEL,streamId:E,reason:G(o)}),b.promise}},M)}_createStreamSink(A){const k=A.streamId,M=this.sourceName,T=A.sourceName,E=this.comObj,c=this,t=this.actionHandler[A.action],r={enqueue(o,b=1,f){if(this.isCancelled)return;const l=this.desiredSize;this.desiredSize-=b,l>0&&this.desiredSize<=0&&(this.sinkCapability=(0,C.createPromiseCapability)(),this.ready=this.sinkCapability.promise),E.postMessage({sourceName:M,targetName:T,stream:Y.ENQUEUE,streamId:k,chunk:o},f)},close(){this.isCancelled||(this.isCancelled=!0,E.postMessage({sourceName:M,targetName:T,stream:Y.CLOSE,streamId:k}),delete c.streamSinks[k])},error(o){(0,C.assert)(o instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,E.postMessage({sourceName:M,targetName:T,stream:Y.ERROR,streamId:k,reason:G(o)}))},sinkCapability:(0,C.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:A.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[k]=r,new Promise(function(o){o(t(A.data,r))}).then(function(){E.postMessage({sourceName:M,targetName:T,stream:Y.START_COMPLETE,streamId:k,success:!0})},function(o){E.postMessage({sourceName:M,targetName:T,stream:Y.START_COMPLETE,streamId:k,reason:G(o)})})}_processStreamMessage(A){const k=A.streamId,M=this.sourceName,T=A.sourceName,E=this.comObj,c=this.streamControllers[k],t=this.streamSinks[k];switch(A.stream){case Y.START_COMPLETE:A.success?c.startCall.resolve():c.startCall.reject(G(A.reason));break;case Y.PULL_COMPLETE:A.success?c.pullCall.resolve():c.pullCall.reject(G(A.reason));break;case Y.PULL:if(!t){E.postMessage({sourceName:M,targetName:T,stream:Y.PULL_COMPLETE,streamId:k,success:!0});break}t.desiredSize<=0&&A.desiredSize>0&&t.sinkCapability.resolve(),t.desiredSize=A.desiredSize,new Promise(function(r){r(t.onPull&&t.onPull())}).then(function(){E.postMessage({sourceName:M,targetName:T,stream:Y.PULL_COMPLETE,streamId:k,success:!0})},function(r){E.postMessage({sourceName:M,targetName:T,stream:Y.PULL_COMPLETE,streamId:k,reason:G(r)})});break;case Y.ENQUEUE:if((0,C.assert)(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(A.chunk);break;case Y.CLOSE:if((0,C.assert)(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this._deleteStreamController(c,k);break;case Y.ERROR:(0,C.assert)(c,"error should have stream controller"),c.controller.error(G(A.reason)),this._deleteStreamController(c,k);break;case Y.CANCEL_COMPLETE:A.success?c.cancelCall.resolve():c.cancelCall.reject(G(A.reason)),this._deleteStreamController(c,k);break;case Y.CANCEL:if(!t)break;new Promise(function(r){r(t.onCancel&&t.onCancel(G(A.reason)))}).then(function(){E.postMessage({sourceName:M,targetName:T,stream:Y.CANCEL_COMPLETE,streamId:k,success:!0})},function(r){E.postMessage({sourceName:M,targetName:T,stream:Y.CANCEL_COMPLETE,streamId:k,reason:G(r)})}),t.sinkCapability.reject(G(A.reason)),t.isCancelled=!0,delete this.streamSinks[k];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(A,k){await Promise.allSettled([A.startCall&&A.startCall.promise,A.pullCall&&A.pullCall.promise,A.cancelCall&&A.cancelCall.promise]),delete this.streamControllers[k]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}g.MessageHandler=tt},(rt,g,K)=>{var Y,G;Object.defineProperty(g,"__esModule",{value:!0}),g.Metadata=void 0;var C=K(1);class S{constructor({parsedData:q,rawData:A}){ht(this,Y);ht(this,G);dt(this,Y,q),dt(this,G,A)}getRaw(){return P(this,G)}get(q){return P(this,Y).get(q)??null}getAll(){return(0,C.objectFromMap)(P(this,Y))}has(q){return P(this,Y).has(q)}}Y=new WeakMap,G=new WeakMap,g.Metadata=S},(rt,g,K)=>{var tt,q,A,k,M,T,de;Object.defineProperty(g,"__esModule",{value:!0}),g.OptionalContentConfig=void 0;var C=K(1);const S=Symbol("INTERNAL");class Y{constructor(t,r){ht(this,tt,!0);this.name=t,this.intent=r}get visible(){return P(this,tt)}_setVisible(t,r){t!==S&&(0,C.unreachable)("Internal method `_setVisible` called."),dt(this,tt,r)}}tt=new WeakMap;class G{constructor(t){ht(this,T);ht(this,q,!0);ht(this,A,new Map);ht(this,k,null);ht(this,M,null);if(this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,dt(this,M,t.order);for(const r of t.groups)P(this,A).set(r.id,new Y(r.name,r.intent));if(t.baseState==="OFF")for(const r of P(this,A).values())r._setVisible(S,!1);for(const r of t.on)P(this,A).get(r)._setVisible(S,!0);for(const r of t.off)P(this,A).get(r)._setVisible(S,!1);dt(this,k,new Map);for(const[r,o]of P(this,A))P(this,k).set(r,o.visible)}}isVisible(t){if(P(this,A).size===0)return!0;if(!t)return(0,C.warn)("Optional content group not defined."),!0;if(t.type==="OCG")return P(this,A).has(t.id)?P(this,A).get(t.id).visible:((0,C.warn)(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return ct(this,T,de).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const r of t.ids){if(!P(this,A).has(r))return(0,C.warn)(`Optional content group not found: ${r}`),!0;if(P(this,A).get(r).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const r of t.ids){if(!P(this,A).has(r))return(0,C.warn)(`Optional content group not found: ${r}`),!0;if(!P(this,A).get(r).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const r of t.ids){if(!P(this,A).has(r))return(0,C.warn)(`Optional content group not found: ${r}`),!0;if(!P(this,A).get(r).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const r of t.ids){if(!P(this,A).has(r))return(0,C.warn)(`Optional content group not found: ${r}`),!0;if(P(this,A).get(r).visible)return!1}return!0}return(0,C.warn)(`Unknown optional content policy ${t.policy}.`),!0}return(0,C.warn)(`Unknown group type ${t.type}.`),!0}setVisibility(t,r=!0){if(!P(this,A).has(t)){(0,C.warn)(`Optional content group not found: ${t}`);return}P(this,A).get(t)._setVisible(S,!!r),dt(this,q,null)}get hasInitialVisibility(){if(P(this,q)!==null)return P(this,q);for(const[t,r]of P(this,A)){const o=P(this,k).get(t);if(r.visible!==o)return dt(this,q,!1)}return dt(this,q,!0)}getOrder(){return P(this,A).size?P(this,M)?P(this,M).slice():[...P(this,A).keys()]:null}getGroups(){return P(this,A).size>0?(0,C.objectFromMap)(P(this,A)):null}getGroup(t){return P(this,A).get(t)||null}}q=new WeakMap,A=new WeakMap,k=new WeakMap,M=new WeakMap,T=new WeakSet,de=function(t){const r=t.length;if(r<2)return!0;const o=t[0];for(let b=1;b<r;b++){const f=t[b];let l;if(Array.isArray(f))l=ct(this,T,de).call(this,f);else if(P(this,A).has(f))l=P(this,A).get(f).visible;else return(0,C.warn)(`Optional content group not found: ${f}`),!0;switch(o){case"And":if(!l)return!1;break;case"Or":if(l)return!0;break;case"Not":return!l;default:return!0}}return o==="And"},g.OptionalContentConfig=G},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFDataTransportStream=void 0;var C=K(1),S=K(8);class Y{constructor(A,k){(0,C.assert)(k,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=A.progressiveDone||!1,this._contentDispositionFilename=A.contentDispositionFilename||null;const M=A.initialData;if((M==null?void 0:M.length)>0){const T=new Uint8Array(M).buffer;this._queuedChunks.push(T)}this._pdfDataRangeTransport=k,this._isStreamingSupported=!A.disableStream,this._isRangeSupported=!A.disableRange,this._contentLength=A.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((T,E)=>{this._onReceiveData({begin:T,chunk:E})}),this._pdfDataRangeTransport.addProgressListener((T,E)=>{this._onProgress({loaded:T,total:E})}),this._pdfDataRangeTransport.addProgressiveReadListener(T=>{this._onReceiveData({chunk:T})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(A){const k=new Uint8Array(A.chunk).buffer;if(A.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(k):this._queuedChunks.push(k);else{const M=this._rangeReaders.some(function(T){return T._begin!==A.begin?!1:(T._enqueue(k),!0)});(0,C.assert)(M,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var A;return((A=this._fullRequestReader)==null?void 0:A._loaded)??0}_onProgress(A){if(A.total===void 0){const k=this._rangeReaders[0];k!=null&&k.onProgress&&k.onProgress({loaded:A.loaded})}else{const k=this._fullRequestReader;k!=null&&k.onProgress&&k.onProgress({loaded:A.loaded,total:A.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(A){const k=this._rangeReaders.indexOf(A);k>=0&&this._rangeReaders.splice(k,1)}getFullReader(){(0,C.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const A=this._queuedChunks;return this._queuedChunks=null,new G(this,A,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(A,k){if(k<=this._progressiveDataLength)return null;const M=new tt(this,A,k);return this._pdfDataRangeTransport.requestDataRange(A,k),this._rangeReaders.push(M),M}cancelAllRequests(A){this._fullRequestReader&&this._fullRequestReader.cancel(A);for(const k of this._rangeReaders.slice(0))k.cancel(A);this._pdfDataRangeTransport.abort()}}g.PDFDataTransportStream=Y;class G{constructor(A,k,M=!1,T=null){this._stream=A,this._done=M||!1,this._filename=(0,S.isPdfFile)(T)?T:null,this._queuedChunks=k||[],this._loaded=0;for(const E of this._queuedChunks)this._loaded+=E.byteLength;this._requests=[],this._headersReady=Promise.resolve(),A._fullRequestReader=this,this.onProgress=null}_enqueue(A){this._done||(this._requests.length>0?this._requests.shift().resolve({value:A,done:!1}):this._queuedChunks.push(A),this._loaded+=A.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const A=(0,C.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tt{constructor(A,k,M){this._stream=A,this._begin=k,this._end=M,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(A){if(!this._done){if(this._requests.length===0)this._queuedChunk=A;else{this._requests.shift().resolve({value:A,done:!1});for(const M of this._requests)M.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const k=this._queuedChunk;return this._queuedChunk=null,{value:k,done:!1}}if(this._done)return{value:void 0,done:!0};const A=(0,C.createPromiseCapability)();return this._requests.push(A),A.promise}cancel(A){this._done=!0;for(const k of this._requests)k.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(rt,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaText=void 0;class K{static textContent(S){const Y=[],G={items:Y,styles:Object.create(null)};function tt(q){var M;if(!q)return;let A=null;const k=q.name;if(k==="#text")A=q.value;else if(K.shouldBuildText(k))(M=q==null?void 0:q.attributes)!=null&&M.textContent?A=q.attributes.textContent:q.value&&(A=q.value);else return;if(A!==null&&Y.push({str:A}),!!q.children)for(const T of q.children)tt(T)}return tt(S),G}static shouldBuildText(S){return!(S==="textarea"||S==="input"||S==="option"||S==="select")}}g.XfaText=K},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.NodeStandardFontDataFactory=g.NodeCanvasFactory=g.NodeCMapReaderFactory=void 0;var C=K(9);const S=function(q){return new Promise((A,k)=>{require$$5.readFile(q,(T,E)=>{if(T||!E){k(new Error(T));return}A(new Uint8Array(E))})})};class Y extends C.BaseCanvasFactory{_createCanvas(A,k){return require$$5.createCanvas(A,k)}}g.NodeCanvasFactory=Y;class G extends C.BaseCMapReaderFactory{_fetchData(A,k){return S(A).then(M=>({cMapData:M,compressionType:k}))}}g.NodeCMapReaderFactory=G;class tt extends C.BaseStandardFontDataFactory{_fetchData(A){return S(A)}}g.NodeStandardFontDataFactory=tt},(rt,g,K)=>{var q,A,k,M,T,E,c,t,r,ue,Fe,fe,Re;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationEditorLayer=void 0;var C=K(7),S=K(1),Y=K(23),G=K(24);const n=class n{constructor(e){ht(this,r);ht(this,q);ht(this,A,!1);ht(this,k,this.pointerup.bind(this));ht(this,M,this.pointerdown.bind(this));ht(this,T,new Map);ht(this,E,!1);ht(this,c,!1);ht(this,t);n._initialized||(n._initialized=!0,Y.FreeTextEditor.initialize(e.l10n),G.InkEditor.initialize(e.l10n),e.uiManager.registerEditorTypes([Y.FreeTextEditor,G.InkEditor])),dt(this,t,e.uiManager),this.annotationStorage=e.annotationStorage,this.pageIndex=e.pageIndex,this.div=e.div,dt(this,q,e.accessibilityManager),P(this,t).addLayer(this)}updateToolbar(e){P(this,t).updateToolbar(e)}updateMode(e=P(this,t).getMode()){ct(this,r,Re).call(this),e===S.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),P(this,t).unselectAll()}addInkEditorIfNeeded(e){if(!e&&P(this,t).getMode()!==S.AnnotationEditorType.INK)return;if(!e){for(const y of P(this,T).values())if(y.isEmpty()){y.setInBackground();return}}ct(this,r,fe).call(this,{offsetX:0,offsetY:0}).setInBackground()}setEditingState(e){P(this,t).setEditingState(e)}addCommands(e){P(this,t).addCommands(e)}enable(){this.div.style.pointerEvents="auto";for(const e of P(this,T).values())e.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const e of P(this,T).values())e.disableEditing()}setActiveEditor(e){P(this,t).getActive()!==e&&P(this,t).setActiveEditor(e)}enableClick(){this.div.addEventListener("pointerdown",P(this,M)),this.div.addEventListener("pointerup",P(this,k))}disableClick(){this.div.removeEventListener("pointerdown",P(this,M)),this.div.removeEventListener("pointerup",P(this,k))}attach(e){P(this,T).set(e.id,e)}detach(e){var m;P(this,T).delete(e.id),(m=P(this,q))==null||m.removePointerInTextLayer(e.contentDiv)}remove(e){P(this,t).removeEditor(e),this.detach(e),this.annotationStorage.remove(e.id),e.div.style.display="none",setTimeout(()=>{e.div.style.display="",e.div.remove(),e.isAttachedToDOM=!1,document.activeElement===document.body&&P(this,t).focusMainContainer()},0),P(this,c)||this.addInkEditorIfNeeded(!1)}add(e){if(ct(this,r,ue).call(this,e),P(this,t).addEditor(e),this.attach(e),!e.isAttachedToDOM){const m=e.render();this.div.append(m),e.isAttachedToDOM=!0}this.moveEditorInDOM(e),e.onceAdded(),this.addToAnnotationStorage(e)}moveEditorInDOM(e){var m;(m=P(this,q))==null||m.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addToAnnotationStorage(e){!e.isEmpty()&&!this.annotationStorage.has(e.id)&&this.annotationStorage.setValue(e.id,e)}addOrRebuild(e){e.needsToBeRebuilt()?e.rebuild():this.add(e)}addANewEditor(e){const m=()=>{this.addOrRebuild(e)},y=()=>{e.remove()};this.addCommands({cmd:m,undo:y,mustExec:!0})}addUndoableEditor(e){const m=()=>{this.addOrRebuild(e)},y=()=>{e.remove()};this.addCommands({cmd:m,undo:y,mustExec:!1})}getNextId(){return P(this,t).getId()}deserialize(e){switch(e.annotationType){case S.AnnotationEditorType.FREETEXT:return Y.FreeTextEditor.deserialize(e,this);case S.AnnotationEditorType.INK:return G.InkEditor.deserialize(e,this)}return null}setSelected(e){P(this,t).setSelected(e)}toggleSelected(e){P(this,t).toggleSelected(e)}isSelected(e){return P(this,t).isSelected(e)}unselect(e){P(this,t).unselect(e)}pointerup(e){const m=C.KeyboardManager.platform.isMac;if(!(e.button!==0||e.ctrlKey&&m)&&e.target===this.div&&P(this,E)){if(dt(this,E,!1),!P(this,A)){dt(this,A,!0);return}ct(this,r,fe).call(this,e)}}pointerdown(e){const m=C.KeyboardManager.platform.isMac;if(e.button!==0||e.ctrlKey&&m||e.target!==this.div)return;dt(this,E,!0);const y=P(this,t).getActive();dt(this,A,!y||y.isEmpty())}drop(e){const m=e.dataTransfer.getData("text/plain"),y=P(this,t).getEditor(m);if(!y)return;e.preventDefault(),e.dataTransfer.dropEffect="move",ct(this,r,ue).call(this,y);const N=this.div.getBoundingClientRect(),L=e.clientX-N.x,nt=e.clientY-N.y;y.translate(L-y.startX,nt-y.startY),this.moveEditorInDOM(y),y.div.focus()}dragover(e){e.preventDefault()}destroy(){var e,m;((e=P(this,t).getActive())==null?void 0:e.parent)===this&&P(this,t).setActiveEditor(null);for(const y of P(this,T).values())(m=P(this,q))==null||m.removePointerInTextLayer(y.contentDiv),y.isAttachedToDOM=!1,y.div.remove(),y.parent=null;this.div=null,P(this,T).clear(),P(this,t).removeLayer(this)}render(e){this.viewport=e.viewport,(0,C.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const m of P(this,t).getEditors(this.pageIndex))this.add(m);this.updateMode()}update(e){this.viewport=e.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[e,m,y,N]=this.viewport.viewBox,L=y-e,nt=N-m;return[L,nt]}get viewportBaseDimensions(){const{width:e,height:m,rotation:y}=this.viewport;return y%180===0?[e,m]:[m,e]}setDimensions(){const{width:e,height:m,rotation:y}=this.viewport,N=y%180!==0,L=Math.floor(e)+"px",nt=Math.floor(m)+"px";this.div.style.width=N?nt:L,this.div.style.height=N?L:nt,this.div.setAttribute("data-main-rotation",y)}};q=new WeakMap,A=new WeakMap,k=new WeakMap,M=new WeakMap,T=new WeakMap,E=new WeakMap,c=new WeakMap,t=new WeakMap,r=new WeakSet,ue=function(e){var m;e.parent!==this&&(this.attach(e),e.pageIndex=this.pageIndex,(m=e.parent)==null||m.detach(e),e.parent=this,e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))},Fe=function(e){switch(P(this,t).getMode()){case S.AnnotationEditorType.FREETEXT:return new Y.FreeTextEditor(e);case S.AnnotationEditorType.INK:return new G.InkEditor(e)}return null},fe=function(e){const m=this.getNextId(),y=ct(this,r,Fe).call(this,{parent:this,id:m,x:e.offsetX,y:e.offsetY});return y&&this.add(y),y},Re=function(){dt(this,c,!0);for(const e of P(this,T).values())e.isEmpty()&&e.remove();dt(this,c,!1)},wt(n,"_initialized",!1);let tt=n;g.AnnotationEditorLayer=tt},(rt,g,K)=>{var tt,q,A,k,M,T,E,c,Me,Oe,De,pe;Object.defineProperty(g,"__esModule",{value:!0}),g.FreeTextEditor=void 0;var C=K(1),S=K(7),Y=K(6);const f=class f extends Y.AnnotationEditor{constructor(i){super({...i,name:"freeTextEditor"});ht(this,c);ht(this,tt,this.editorDivBlur.bind(this));ht(this,q,this.editorDivFocus.bind(this));ht(this,A,this.editorDivKeydown.bind(this));ht(this,k);ht(this,M,"");ht(this,T,!1);ht(this,E);dt(this,k,i.color||f._defaultColor||Y.AnnotationEditor._defaultLineColor),dt(this,E,i.fontSize||f._defaultFontSize)}static initialize(i){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(m=>[m,i.get(m)]));const e=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(e.getPropertyValue("--freetext-padding"))}static updateDefaultParams(i,e){switch(i){case C.AnnotationEditorParamsType.FREETEXT_SIZE:f._defaultFontSize=e;break;case C.AnnotationEditorParamsType.FREETEXT_COLOR:f._defaultColor=e;break}}updateParams(i,e){switch(i){case C.AnnotationEditorParamsType.FREETEXT_SIZE:ct(this,c,Me).call(this,e);break;case C.AnnotationEditorParamsType.FREETEXT_COLOR:ct(this,c,Oe).call(this,e);break}}static get defaultPropertiesToUpdate(){return[[C.AnnotationEditorParamsType.FREETEXT_SIZE,f._defaultFontSize],[C.AnnotationEditorParamsType.FREETEXT_COLOR,f._defaultColor||Y.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[C.AnnotationEditorParamsType.FREETEXT_SIZE,P(this,E)],[C.AnnotationEditorParamsType.FREETEXT_COLOR,P(this,k)]]}getInitialTranslation(){return[-f._internalPadding*this.parent.scaleFactor,-(f._internalPadding+P(this,E))*this.parent.scaleFactor]}rebuild(){super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(C.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",P(this,A)),this.editorDiv.addEventListener("focus",P(this,q)),this.editorDiv.addEventListener("blur",P(this,tt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",P(this,A)),this.editorDiv.removeEventListener("focus",P(this,q)),this.editorDiv.removeEventListener("blur",P(this,tt)),this.div.focus(),this.isEditing=!1)}focusin(i){super.focusin(i),i.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}commit(){super.commit(),P(this,T)||(dt(this,T,!0),this.parent.addUndoableEditor(this)),this.disableEditMode(),dt(this,M,ct(this,c,De).call(this).trimEnd()),ct(this,c,pe).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(i){this.enableEditMode(),this.editorDiv.focus()}keydown(i){i.target===this.div&&i.key==="Enter"&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(i){f._keyboardManager.exec(this,i)}editorDivFocus(i){this.isEditing=!0}editorDivBlur(i){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let i,e;this.width&&(i=this.x,e=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),f._l10nPromise.get("editor_free_text_aria_label").then(y=>{var N;return(N=this.editorDiv)==null?void 0:N.setAttribute("aria-label",y)}),f._l10nPromise.get("free_text_default_content").then(y=>{var N;return(N=this.editorDiv)==null?void 0:N.setAttribute("default-content",y)}),this.editorDiv.contentEditable=!0;const{style:m}=this.editorDiv;if(m.fontSize=`calc(${P(this,E)}px * var(--scale-factor))`,m.color=P(this,k),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,S.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[y,N]=this.parent.viewportBaseDimensions;this.setAt(i*y,e*N,this.width*y,this.height*N);for(const L of P(this,M).split(`
`)){const nt=document.createElement("div");nt.append(L?document.createTextNode(L):document.createElement("br")),this.editorDiv.append(nt)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(i,e){const m=super.deserialize(i,e);return dt(m,E,i.fontSize),dt(m,k,C.Util.makeHexColor(...i.color)),dt(m,M,i.value),m}serialize(){if(this.isEmpty())return null;const i=f._internalPadding*this.parent.scaleFactor,e=this.getRect(i,i),m=Y.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:C.AnnotationEditorType.FREETEXT,color:m,fontSize:P(this,E),value:P(this,M),pageIndex:this.parent.pageIndex,rect:e,rotation:this.rotation}}};tt=new WeakMap,q=new WeakMap,A=new WeakMap,k=new WeakMap,M=new WeakMap,T=new WeakMap,E=new WeakMap,c=new WeakSet,Me=function(i){const e=y=>{this.editorDiv.style.fontSize=`calc(${y}px * var(--scale-factor))`,this.translate(0,-(y-P(this,E))*this.parent.scaleFactor),dt(this,E,y),ct(this,c,pe).call(this)},m=P(this,E);this.parent.addCommands({cmd:()=>{e(i)},undo:()=>{e(m)},mustExec:!0,type:C.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Oe=function(i){const e=P(this,k);this.parent.addCommands({cmd:()=>{dt(this,k,i),this.editorDiv.style.color=i},undo:()=>{dt(this,k,e),this.editorDiv.style.color=e},mustExec:!0,type:C.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},De=function(){const i=this.editorDiv.getElementsByTagName("div");if(i.length===0)return this.editorDiv.innerText;const e=[];for(let m=0,y=i.length;m<y;m++){const L=i[m].firstChild;(L==null?void 0:L.nodeName)==="#text"?e.push(L.data):e.push("")}return e.join(`
`)},pe=function(){const[i,e]=this.parent.viewportBaseDimensions,m=this.div.getBoundingClientRect();this.width=m.width/i,this.height=m.height/e},wt(f,"_freeTextDefaultContent",""),wt(f,"_l10nPromise"),wt(f,"_internalPadding",0),wt(f,"_defaultColor",null),wt(f,"_defaultFontSize",10),wt(f,"_keyboardManager",new S.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],f.prototype.commitOrRemove]])),wt(f,"_type","freetext");let G=f;g.FreeTextEditor=G},(rt,g,K)=>{var A,k,M,T,E,c,t,r,o,b,f,l,n,i,e,Ie,Le,Ne,je,ge,Ue,Be,qe,Ot,me,Qt,Zt,Wt,_e,te,h,be,We,He,Ge,Ae,ee,Ht,ye;Object.defineProperty(g,"__esModule",{value:!0}),g.InkEditor=void 0,Object.defineProperty(g,"fitCurve",{enumerable:!0,get:function(){return Y.fitCurve}});var C=K(1),S=K(6),Y=K(25),G=K(7);const tt=16,p=class p extends S.AnnotationEditor{constructor(x){super({...x,name:"inkEditor"});ht(this,e);ht(this,A,0);ht(this,k,0);ht(this,M,0);ht(this,T,this.canvasPointermove.bind(this));ht(this,E,this.canvasPointerleave.bind(this));ht(this,c,this.canvasPointerup.bind(this));ht(this,t,this.canvasPointerdown.bind(this));ht(this,r,!1);ht(this,o,!1);ht(this,b,null);ht(this,f,null);ht(this,l,0);ht(this,n,0);ht(this,i,null);this.color=x.color||null,this.thickness=x.thickness||null,this.opacity=x.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(x){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(u=>[u,x.get(u)]))}static updateDefaultParams(x,u){switch(x){case C.AnnotationEditorParamsType.INK_THICKNESS:p._defaultThickness=u;break;case C.AnnotationEditorParamsType.INK_COLOR:p._defaultColor=u;break;case C.AnnotationEditorParamsType.INK_OPACITY:p._defaultOpacity=u/100;break}}updateParams(x,u){switch(x){case C.AnnotationEditorParamsType.INK_THICKNESS:ct(this,e,Ie).call(this,u);break;case C.AnnotationEditorParamsType.INK_COLOR:ct(this,e,Le).call(this,u);break;case C.AnnotationEditorParamsType.INK_OPACITY:ct(this,e,Ne).call(this,u);break}}static get defaultPropertiesToUpdate(){return[[C.AnnotationEditorParamsType.INK_THICKNESS,p._defaultThickness],[C.AnnotationEditorParamsType.INK_COLOR,p._defaultColor||S.AnnotationEditor._defaultLineColor],[C.AnnotationEditorParamsType.INK_OPACITY,Math.round(p._defaultOpacity*100)]]}get propertiesToUpdate(){return[[C.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||p._defaultThickness],[C.AnnotationEditorParamsType.INK_COLOR,this.color||p._defaultColor||S.AnnotationEditor._defaultLineColor],[C.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??p._defaultOpacity))]]}rebuild(){super.rebuild(),this.div!==null&&(this.canvas||(ct(this,e,Qt).call(this),ct(this,e,Zt).call(this)),this.isAttachedToDOM||(this.parent.add(this),ct(this,e,Wt).call(this)),ct(this,e,Ht).call(this))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,P(this,f).disconnect(),dt(this,f,null),super.remove())}enableEditMode(){P(this,r)||this.canvas===null||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",P(this,t)),this.canvas.addEventListener("pointerup",P(this,c)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",P(this,t)),this.canvas.removeEventListener("pointerup",P(this,c)))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){P(this,r)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),dt(this,r,!0),this.div.classList.add("disabled"),ct(this,e,Ht).call(this,!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(x){super.focusin(x),this.enableEditMode()}canvasPointerdown(x){x.button!==0||!this.isInEditMode()||P(this,r)||(this.setInForeground(),x.type!=="mouse"&&this.div.focus(),x.stopPropagation(),this.canvas.addEventListener("pointerleave",P(this,E)),this.canvas.addEventListener("pointermove",P(this,T)),ct(this,e,Ue).call(this,x.offsetX,x.offsetY))}canvasPointermove(x){x.stopPropagation(),ct(this,e,Be).call(this,x.offsetX,x.offsetY)}canvasPointerup(x){x.button===0&&this.isInEditMode()&&this.currentPath.length!==0&&(x.stopPropagation(),ct(this,e,me).call(this,x),this.setInBackground())}canvasPointerleave(x){ct(this,e,me).call(this,x),this.setInBackground()}render(){if(this.div)return this.div;let x,u;this.width&&(x=this.x,u=this.y),super.render(),p._l10nPromise.get("editor_ink_aria_label").then(Q=>{var ot;return(ot=this.div)==null?void 0:ot.setAttribute("aria-label",Q)});const[F,Z,j,V]=ct(this,e,je).call(this);if(this.setAt(F,Z,0,0),this.setDims(j,V),ct(this,e,Qt).call(this),this.width){const[Q,ot]=this.parent.viewportBaseDimensions;this.setAt(x*Q,u*ot,this.width*Q,this.height*ot),dt(this,o,!0),ct(this,e,Wt).call(this),this.setDims(this.width*Q,this.height*ot),ct(this,e,Ot).call(this),ct(this,e,ye).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return ct(this,e,Zt).call(this),this.div}setDimensions(x,u){const F=Math.round(x),Z=Math.round(u);if(P(this,l)===F&&P(this,n)===Z)return;dt(this,l,F),dt(this,n,Z),this.canvas.style.visibility="hidden",P(this,A)&&Math.abs(P(this,A)-x/u)>.01&&(u=Math.ceil(x/P(this,A)),this.setDims(x,u));const[j,V]=this.parent.viewportBaseDimensions;this.width=x/j,this.height=u/V,P(this,r)&&ct(this,e,_e).call(this,x,u),ct(this,e,Wt).call(this),ct(this,e,Ot).call(this),this.canvas.style.visibility="visible"}static deserialize(x,u){var bt,mt;const F=super.deserialize(x,u);F.thickness=x.thickness,F.color=C.Util.makeHexColor(...x.color),F.opacity=x.opacity;const[Z,j]=u.pageDimensions,V=F.width*Z,Q=F.height*j,ot=u.scaleFactor,ut=x.thickness/2;dt(F,A,V/Q),dt(F,r,!0),dt(F,l,Math.round(V)),dt(F,n,Math.round(Q));for(const{bezier:gt}of x.paths){const At=[];F.paths.push(At);let yt=ot*(gt[0]-ut),xt=ot*(Q-gt[1]-ut);for(let Pt=2,Et=gt.length;Pt<Et;Pt+=6){const Ct=ot*(gt[Pt]-ut),Dt=ot*(Q-gt[Pt+1]-ut),jt=ot*(gt[Pt+2]-ut),Ut=ot*(Q-gt[Pt+3]-ut),it=ot*(gt[Pt+4]-ut),X=ot*(Q-gt[Pt+5]-ut);At.push([[yt,xt],[Ct,Dt],[jt,Ut],[it,X]]),yt=it,xt=X}const vt=ct(this,h,be).call(this,At);F.bezierPath2D.push(vt)}const st=ct(bt=F,e,Ae).call(bt);return dt(F,M,Math.max(tt,st[2]-st[0])),dt(F,k,Math.max(tt,st[3]-st[1])),ct(mt=F,e,_e).call(mt,V,Q),F}serialize(){if(this.isEmpty())return null;const x=this.getRect(0,0),u=this.rotation%180===0?x[3]-x[1]:x[2]-x[0],F=S.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:C.AnnotationEditorType.INK,color:F,thickness:this.thickness,opacity:this.opacity,paths:ct(this,e,We).call(this,this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,u),pageIndex:this.parent.pageIndex,rect:x,rotation:this.rotation}}};A=new WeakMap,k=new WeakMap,M=new WeakMap,T=new WeakMap,E=new WeakMap,c=new WeakMap,t=new WeakMap,r=new WeakMap,o=new WeakMap,b=new WeakMap,f=new WeakMap,l=new WeakMap,n=new WeakMap,i=new WeakMap,e=new WeakSet,Ie=function(x){const u=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=x,ct(this,e,Ht).call(this)},undo:()=>{this.thickness=u,ct(this,e,Ht).call(this)},mustExec:!0,type:C.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Le=function(x){const u=this.color;this.parent.addCommands({cmd:()=>{this.color=x,ct(this,e,Ot).call(this)},undo:()=>{this.color=u,ct(this,e,Ot).call(this)},mustExec:!0,type:C.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Ne=function(x){x/=100;const u=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=x,ct(this,e,Ot).call(this)},undo:()=>{this.opacity=u,ct(this,e,Ot).call(this)},mustExec:!0,type:C.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},je=function(){const{width:x,height:u,rotation:F}=this.parent.viewport;switch(F){case 90:return[0,x,x,u];case 180:return[x,u,x,u];case 270:return[u,0,x,u];default:return[0,0,x,u]}},ge=function(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,G.opacityToHex)(this.opacity)}`},Ue=function(x,u){this.isEditing=!0,P(this,o)||(dt(this,o,!0),ct(this,e,Wt).call(this),this.thickness||(this.thickness=p._defaultThickness),this.color||(this.color=p._defaultColor||S.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=p._defaultOpacity)),this.currentPath.push([x,u]),dt(this,b,null),ct(this,e,ge).call(this),this.ctx.beginPath(),this.ctx.moveTo(x,u),dt(this,i,()=>{P(this,i)&&(P(this,b)&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):ct(this,e,Ot).call(this),this.ctx.lineTo(...P(this,b)),dt(this,b,null),this.ctx.stroke()),window.requestAnimationFrame(P(this,i)))}),window.requestAnimationFrame(P(this,i))},Be=function(x,u){const[F,Z]=this.currentPath.at(-1);x===F&&u===Z||(this.currentPath.push([x,u]),dt(this,b,[x,u]))},qe=function(x,u){var ut;this.ctx.closePath(),dt(this,i,null),x=Math.min(Math.max(x,0),this.canvas.width),u=Math.min(Math.max(u,0),this.canvas.height);const[F,Z]=this.currentPath.at(-1);(x!==F||u!==Z)&&this.currentPath.push([x,u]);let j;if(this.currentPath.length!==1)j=(0,Y.fitCurve)(this.currentPath,30,null);else{const st=[x,u];j=[[st,st.slice(),st.slice(),st]]}const V=ct(ut=p,h,be).call(ut,j);this.currentPath.length=0;const Q=()=>{this.paths.push(j),this.bezierPath2D.push(V),this.rebuild()},ot=()=>{this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(ct(this,e,Qt).call(this),ct(this,e,Zt).call(this)),ct(this,e,Ht).call(this))};this.parent.addCommands({cmd:Q,undo:ot,mustExec:!0})},Ot=function(){if(this.isEmpty()){ct(this,e,te).call(this);return}ct(this,e,ge).call(this);const{canvas:x,ctx:u}=this;u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,x.width,x.height),ct(this,e,te).call(this);for(const F of this.bezierPath2D)u.stroke(F)},me=function(x){ct(this,e,qe).call(this,x.offsetX,x.offsetY),this.canvas.removeEventListener("pointerleave",P(this,E)),this.canvas.removeEventListener("pointermove",P(this,T)),this.parent.addToAnnotationStorage(this)},Qt=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",p._l10nPromise.get("editor_ink_canvas_aria_label").then(x=>{var u;return(u=this.canvas)==null?void 0:u.setAttribute("aria-label",x)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Zt=function(){dt(this,f,new ResizeObserver(x=>{const u=x[0].contentRect;u.width&&u.height&&this.setDimensions(u.width,u.height)})),P(this,f).observe(this.div)},Wt=function(){if(!P(this,o))return;const[x,u]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*x),this.canvas.height=Math.ceil(this.height*u),ct(this,e,te).call(this)},_e=function(x,u){const F=ct(this,e,ee).call(this),Z=(x-F)/P(this,M),j=(u-F)/P(this,k);this.scaleFactor=Math.min(Z,j)},te=function(){const x=ct(this,e,ee).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+x,this.translationY*this.scaleFactor+x)},h=new WeakSet,be=function(x){const u=new Path2D;for(let F=0,Z=x.length;F<Z;F++){const[j,V,Q,ot]=x[F];F===0&&u.moveTo(...j),u.bezierCurveTo(V[0],V[1],Q[0],Q[1],ot[0],ot[1])}return u},We=function(x,u,F,Z){const V=[],Q=this.thickness/2;let ot,ut;for(const st of this.paths){ot=[],ut=[];for(let bt=0,mt=st.length;bt<mt;bt++){const[gt,At,yt,xt]=st[bt],vt=x*(gt[0]+u)+Q,Pt=Z-x*(gt[1]+F)-Q,Et=x*(At[0]+u)+Q,Ct=Z-x*(At[1]+F)-Q,Dt=x*(yt[0]+u)+Q,jt=Z-x*(yt[1]+F)-Q,Ut=x*(xt[0]+u)+Q,it=Z-x*(xt[1]+F)-Q;bt===0&&(ot.push(vt,Pt),ut.push(vt,Pt)),ot.push(Et,Ct,Dt,jt,Ut,it),ct(this,e,He).call(this,vt,Pt,Et,Ct,Dt,jt,Ut,it,4,ut)}V.push({bezier:ot,points:ut})}return V},He=function(x,u,F,Z,j,V,Q,ot,ut,st){if(ct(this,e,Ge).call(this,x,u,F,Z,j,V,Q,ot)){st.push(Q,ot);return}for(let bt=1;bt<ut-1;bt++){const mt=bt/ut,gt=1-mt;let At=mt*x+gt*F,yt=mt*u+gt*Z,xt=mt*F+gt*j,vt=mt*Z+gt*V;const Pt=mt*j+gt*Q,Et=mt*V+gt*ot;At=mt*At+gt*xt,yt=mt*yt+gt*vt,xt=mt*xt+gt*Pt,vt=mt*vt+gt*Et,At=mt*At+gt*xt,yt=mt*yt+gt*vt,st.push(At,yt)}st.push(Q,ot)},Ge=function(x,u,F,Z,j,V,Q,ot){const st=(3*F-2*x-Q)**2,bt=(3*Z-2*u-ot)**2,mt=(3*j-x-2*Q)**2,gt=(3*V-u-2*ot)**2;return Math.max(st,mt)+Math.max(bt,gt)<=10},Ae=function(){let x=1/0,u=-1/0,F=1/0,Z=-1/0;for(const j of this.paths)for(const[V,Q,ot,ut]of j){const st=C.Util.bezierBoundingBox(...V,...Q,...ot,...ut);x=Math.min(x,st[0]),F=Math.min(F,st[1]),u=Math.max(u,st[2]),Z=Math.max(Z,st[3])}return[x,F,u,Z]},ee=function(){return P(this,r)?Math.ceil(this.thickness*this.parent.scaleFactor):0},Ht=function(x=!1){if(this.isEmpty())return;if(!P(this,r)){ct(this,e,Ot).call(this);return}const u=ct(this,e,Ae).call(this),F=ct(this,e,ee).call(this);dt(this,M,Math.max(tt,u[2]-u[0])),dt(this,k,Math.max(tt,u[3]-u[1]));const Z=Math.ceil(F+P(this,M)*this.scaleFactor),j=Math.ceil(F+P(this,k)*this.scaleFactor),[V,Q]=this.parent.viewportBaseDimensions;this.width=Z/V,this.height=j/Q,dt(this,A,Z/j),ct(this,e,ye).call(this);const ot=this.translationX,ut=this.translationY;this.translationX=-u[0],this.translationY=-u[1],ct(this,e,Wt).call(this),ct(this,e,Ot).call(this),dt(this,l,Z),dt(this,n,j),this.setDims(Z,j);const st=x?F/this.scaleFactor/2:0;this.translate(ot-this.translationX-st,ut-this.translationY-st)},ye=function(){const{style:x}=this.div;P(this,A)>=1?(x.minHeight=`${tt}px`,x.minWidth=`${Math.round(P(this,A)*tt)}px`):(x.minWidth=`${tt}px`,x.minHeight=`${Math.round(tt/P(this,A))}px`)},ht(p,h),wt(p,"_defaultColor",null),wt(p,"_defaultOpacity",1),wt(p,"_defaultThickness",1),wt(p,"_l10nPromise"),wt(p,"_type","ink");let q=p;g.InkEditor=q},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.fitCurve=void 0;const C=K(26);g.fitCurve=C},rt=>{function g(c,t,r){if(!Array.isArray(c))throw new TypeError("First argument should be an array");if(c.forEach(l=>{if(!Array.isArray(l)||l.some(n=>typeof n!="number")||l.length!==c[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),c=c.filter((l,n)=>n===0||!l.every((i,e)=>i===c[n-1][e])),c.length<2)return[];const o=c.length,b=M(c[1],c[0]),f=M(c[o-2],c[o-1]);return K(c,b,f,t,r)}function K(c,t,r,o,b){var l,n,i,e,m,y,N,L,nt,at,J,$,B;if(c.length===2)return $=T.vectorLen(T.subtract(c[0],c[1]))/3,l=[c[0],T.addArrays(c[0],T.mulItems(t,$)),T.addArrays(c[1],T.mulItems(r,$)),c[1]],[l];if(n=tt(c),[l,e,y]=C(c,n,n,t,r,b),e===0||e<o)return[l];if(e<o*o)for(i=n,m=e,N=y,B=0;B<20;B++){if(i=Y(l,c,i),[l,e,y]=C(c,n,i,t,r,b),e<o)return[l];if(y===N){let W=e/m;if(W>.9999&&W<1.0001)break}m=e,N=y}return J=[],L=T.subtract(c[y-1],c[y+1]),L.every(W=>W===0)&&(L=T.subtract(c[y-1],c[y]),[L[0],L[1]]=[-L[1],L[0]]),nt=T.normalize(L),at=T.mulItems(nt,-1),J=J.concat(K(c.slice(0,y+1),t,nt,o,b)),J=J.concat(K(c.slice(y),at,r,o,b)),J}function C(c,t,r,o,b,f){var l,n,i;return l=S(c,r,o,b),[n,i]=q(c,l,t),f&&f({bez:l,points:c,params:t,maxErr:n,maxPoint:i}),[l,n,i]}function S(c,t,r,o){var b,f,l,n,i,e,m,y,N,L,nt,at,J,$,B,W,H,et=c[0],lt=c[c.length-1];for(b=[et,null,null,lt],f=T.zeros_Xx2x2(t.length),J=0,$=t.length;J<$;J++)W=t[J],H=1-W,l=f[J],l[0]=T.mulItems(r,3*W*(H*H)),l[1]=T.mulItems(o,3*H*(W*W));for(n=[[0,0],[0,0]],i=[0,0],J=0,$=c.length;J<$;J++)W=t[J],l=f[J],n[0][0]+=T.dot(l[0],l[0]),n[0][1]+=T.dot(l[0],l[1]),n[1][0]+=T.dot(l[0],l[1]),n[1][1]+=T.dot(l[1],l[1]),B=T.subtract(c[J],E.q([et,et,lt,lt],W)),i[0]+=T.dot(l[0],B),i[1]+=T.dot(l[1],B);return e=n[0][0]*n[1][1]-n[1][0]*n[0][1],m=n[0][0]*i[1]-n[1][0]*i[0],y=i[0]*n[1][1]-i[1]*n[0][1],N=e===0?0:y/e,L=e===0?0:m/e,at=T.vectorLen(T.subtract(et,lt)),nt=1e-6*at,N<nt||L<nt?(b[1]=T.addArrays(et,T.mulItems(r,at/3)),b[2]=T.addArrays(lt,T.mulItems(o,at/3))):(b[1]=T.addArrays(et,T.mulItems(r,N)),b[2]=T.addArrays(lt,T.mulItems(o,L))),b}function Y(c,t,r){return r.map((o,b)=>G(c,t[b],o))}function G(c,t,r){var o=T.subtract(E.q(c,r),t),b=E.qprime(c,r),f=T.mulMatrix(o,b),l=T.sum(T.squareItems(b))+2*T.mulMatrix(o,E.qprimeprime(c,r));return l===0?r:r-f/l}function tt(c){var t=[],r,o,b;return c.forEach((f,l)=>{r=l?o+T.vectorLen(T.subtract(f,b)):0,t.push(r),o=r,b=f}),t=t.map(f=>f/o),t}function q(c,t,r){var o,b,f,l,n,i,e,m;b=0,f=Math.floor(c.length/2);const y=A(t,10);for(n=0,i=c.length;n<i;n++)e=c[n],m=k(t,r[n],y,10),l=T.subtract(E.q(t,m),e),o=l[0]*l[0]+l[1]*l[1],o>b&&(b=o,f=n);return[b,f]}var A=function(c,t){for(var r,o=[0],b=c[0],f=0,l=1;l<=t;l++)r=E.q(c,l/t),f+=T.vectorLen(T.subtract(r,b)),o.push(f),b=r;return o=o.map(n=>n/f),o};function k(c,t,r,o){if(t<0)return 0;if(t>1)return 1;for(var b,f,l,n,i,e=1;e<=o;e++)if(t<=r[e]){n=(e-1)/o,l=e/o,f=r[e-1],b=r[e],i=(t-f)/(b-f)*(l-n)+n;break}return i}function M(c,t){return T.normalize(T.subtract(c,t))}class T{static zeros_Xx2x2(t){for(var r=[];t--;)r.push([0,0]);return r}static mulItems(t,r){return t.map(o=>o*r)}static mulMatrix(t,r){return t.reduce((o,b,f)=>o+b*r[f],0)}static subtract(t,r){return t.map((o,b)=>o-r[b])}static addArrays(t,r){return t.map((o,b)=>o+r[b])}static addItems(t,r){return t.map(o=>o+r)}static sum(t){return t.reduce((r,o)=>r+o)}static dot(t,r){return T.mulMatrix(t,r)}static vectorLen(t){return Math.hypot(...t)}static divItems(t,r){return t.map(o=>o/r)}static squareItems(t){return t.map(r=>r*r)}static normalize(t){return this.divItems(t,this.vectorLen(t))}}class E{static q(t,r){var o=1-r,b=T.mulItems(t[0],o*o*o),f=T.mulItems(t[1],3*o*o*r),l=T.mulItems(t[2],3*o*r*r),n=T.mulItems(t[3],r*r*r);return T.addArrays(T.addArrays(b,f),T.addArrays(l,n))}static qprime(t,r){var o=1-r,b=T.mulItems(T.subtract(t[1],t[0]),3*o*o),f=T.mulItems(T.subtract(t[2],t[1]),6*o*r),l=T.mulItems(T.subtract(t[3],t[2]),3*r*r);return T.addArrays(T.addArrays(b,f),l)}static qprimeprime(t,r){return T.addArrays(T.mulItems(T.addArrays(T.subtract(t[2],T.mulItems(t[1],2)),t[0]),6*(1-r)),T.mulItems(T.addArrays(T.subtract(t[3],T.mulItems(t[2],2)),t[1]),6*r))}}rt.exports=g,rt.exports.fitCubic=K,rt.exports.createTangent=M},(rt,g,K)=>{var h,ve,Se,Ee;Object.defineProperty(g,"__esModule",{value:!0}),g.AnnotationLayer=void 0;var C=K(1),S=K(8),Y=K(5),G=K(28),tt=K(29);const q=1e3,A=9,k=new WeakSet;function M(I){return{width:I[2]-I[0],height:I[3]-I[1]}}class T{static create(s){switch(s.data.annotationType){case C.AnnotationType.LINK:return new c(s);case C.AnnotationType.TEXT:return new t(s);case C.AnnotationType.WIDGET:switch(s.data.fieldType){case"Tx":return new o(s);case"Btn":return s.data.radioButton?new f(s):s.data.checkBox?new b(s):new l(s);case"Ch":return new n(s)}return new r(s);case C.AnnotationType.POPUP:return new i(s);case C.AnnotationType.FREETEXT:return new m(s);case C.AnnotationType.LINE:return new y(s);case C.AnnotationType.SQUARE:return new N(s);case C.AnnotationType.CIRCLE:return new L(s);case C.AnnotationType.POLYLINE:return new nt(s);case C.AnnotationType.CARET:return new J(s);case C.AnnotationType.INK:return new $(s);case C.AnnotationType.POLYGON:return new at(s);case C.AnnotationType.HIGHLIGHT:return new B(s);case C.AnnotationType.UNDERLINE:return new W(s);case C.AnnotationType.SQUIGGLY:return new H(s);case C.AnnotationType.STRIKEOUT:return new et(s);case C.AnnotationType.STAMP:return new lt(s);case C.AnnotationType.FILEATTACHMENT:return new ft(s);default:return new E(s)}}}class E{constructor(s,{isRenderable:d=!1,ignoreBorder:_=!1,createQuadrilaterals:p=!1}={}){this.isRenderable=d,this.data=s.data,this.layer=s.layer,this.page=s.page,this.viewport=s.viewport,this.linkService=s.linkService,this.downloadManager=s.downloadManager,this.imageResourcesPath=s.imageResourcesPath,this.renderForms=s.renderForms,this.svgFactory=s.svgFactory,this.annotationStorage=s.annotationStorage,this.enableScripting=s.enableScripting,this.hasJSActions=s.hasJSActions,this._fieldObjects=s.fieldObjects,this._mouseState=s.mouseState,d&&(this.container=this._createContainer(_)),p&&(this.quadrilaterals=this._createQuadrilaterals(_))}_createContainer(s=!1){const d=this.data,_=this.page,p=this.viewport,v=document.createElement("section"),{width:R,height:x}=M(d.rect),[u,F,Z,j]=p.viewBox,V=Z-u,Q=j-F;v.setAttribute("data-annotation-id",d.id);const ot=C.Util.normalizeRect([d.rect[0],_.view[3]-d.rect[1]+_.view[1],d.rect[2],_.view[3]-d.rect[3]+_.view[1]]);if(!s&&d.borderStyle.width>0){v.style.borderWidth=`${d.borderStyle.width}px`;const st=d.borderStyle.horizontalCornerRadius,bt=d.borderStyle.verticalCornerRadius;if(st>0||bt>0){const gt=`calc(${st}px * var(--scale-factor)) / calc(${bt}px * var(--scale-factor))`;v.style.borderRadius=gt}else if(this instanceof f){const gt=`calc(${R}px * var(--scale-factor)) / calc(${x}px * var(--scale-factor))`;v.style.borderRadius=gt}switch(d.borderStyle.style){case C.AnnotationBorderStyleType.SOLID:v.style.borderStyle="solid";break;case C.AnnotationBorderStyleType.DASHED:v.style.borderStyle="dashed";break;case C.AnnotationBorderStyleType.BEVELED:(0,C.warn)("Unimplemented border style: beveled");break;case C.AnnotationBorderStyleType.INSET:(0,C.warn)("Unimplemented border style: inset");break;case C.AnnotationBorderStyleType.UNDERLINE:v.style.borderBottomStyle="solid";break}const mt=d.borderColor||null;mt?v.style.borderColor=C.Util.makeHexColor(mt[0]|0,mt[1]|0,mt[2]|0):v.style.borderWidth=0}v.style.left=`${100*(ot[0]-u)/V}%`,v.style.top=`${100*(ot[1]-F)/Q}%`;const{rotation:ut}=d;return d.hasOwnCanvas||ut===0?(v.style.width=`${100*R/V}%`,v.style.height=`${100*x/Q}%`):this.setRotation(ut,v),v}setRotation(s,d=this.container){const[_,p,v,R]=this.viewport.viewBox,x=v-_,u=R-p,{width:F,height:Z}=M(this.data.rect);let j,V;s%180===0?(j=100*F/x,V=100*Z/u):(j=100*Z/x,V=100*F/u),d.style.width=`${j}%`,d.style.height=`${V}%`,d.setAttribute("data-main-rotation",(360-s)%360)}get _commonActions(){const s=(d,_,p)=>{const v=p.detail[d];p.target.style[_]=G.ColorConverters[`${v[0]}_HTML`](v.slice(1))};return(0,C.shadow)(this,"_commonActions",{display:d=>{const _=d.detail.display%2===1;this.container.style.visibility=_?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:_,print:d.detail.display===0||d.detail.display===3})},print:d=>{this.annotationStorage.setValue(this.data.id,{print:d.detail.print})},hidden:d=>{this.container.style.visibility=d.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:d.detail.hidden})},focus:d=>{setTimeout(()=>d.target.focus({preventScroll:!1}),0)},userName:d=>{d.target.title=d.detail.userName},readonly:d=>{d.detail.readonly?d.target.setAttribute("readonly",""):d.target.removeAttribute("readonly")},required:d=>{this._setRequired(d.target,d.detail.required)},bgColor:d=>{s("bgColor","backgroundColor",d)},fillColor:d=>{s("fillColor","backgroundColor",d)},fgColor:d=>{s("fgColor","color",d)},textColor:d=>{s("textColor","color",d)},borderColor:d=>{s("borderColor","borderColor",d)},strokeColor:d=>{s("strokeColor","borderColor",d)},rotation:d=>{const _=d.detail.rotation;this.setRotation(_),this.annotationStorage.setValue(this.data.id,{rotation:_})}})}_dispatchEventFromSandbox(s,d){const _=this._commonActions;for(const p of Object.keys(d.detail)){const v=s[p]||_[p];v&&v(d)}}_setDefaultPropertiesFromJS(s){if(!this.enableScripting)return;const d=this.annotationStorage.getRawValue(this.data.id);if(!d)return;const _=this._commonActions;for(const[p,v]of Object.entries(d)){const R=_[p];if(R){const x={detail:{[p]:v},target:s};R(x),delete d[p]}}}_createQuadrilaterals(s=!1){if(!this.data.quadPoints)return null;const d=[],_=this.data.rect;for(const p of this.data.quadPoints)this.data.rect=[p[2].x,p[2].y,p[1].x,p[1].y],d.push(this._createContainer(s));return this.data.rect=_,d}_createPopup(s,d){let _=this.container;this.quadrilaterals&&(s=s||this.quadrilaterals,_=this.quadrilaterals[0]),s||(s=document.createElement("div"),s.className="popupTriggerArea",_.append(s));const v=new e({container:_,trigger:s,color:d.color,titleObj:d.titleObj,modificationDate:d.modificationDate,contentsObj:d.contentsObj,richText:d.richText,hideWrapper:!0}).render();v.style.left="100%",_.append(v)}_renderQuadrilaterals(s){for(const d of this.quadrilaterals)d.className=s;return this.quadrilaterals}render(){(0,C.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(s,d=null){const _=[];if(this._fieldObjects){const p=this._fieldObjects[s];if(p)for(const{page:v,id:R,exportValues:x}of p){if(v===-1||R===d)continue;const u=typeof x=="string"?x:null,F=document.querySelector(`[data-element-id="${R}"]`);if(F&&!k.has(F)){(0,C.warn)(`_getElementsByName - element not allowed: ${R}`);continue}_.push({id:R,exportValue:u,domElement:F})}return _}for(const p of document.getElementsByName(s)){const{id:v,exportValue:R}=p;v!==d&&k.has(p)&&_.push({id:v,exportValue:R,domElement:p})}return _}static get platform(){const s=typeof navigator<"u"?navigator.platform:"";return(0,C.shadow)(this,"platform",{isWin:s.includes("Win"),isMac:s.includes("Mac")})}}class c extends E{constructor(s,d=null){super(s,{isRenderable:!0,ignoreBorder:!!(d!=null&&d.ignoreBorder),createQuadrilaterals:!0}),this.isTooltipOnly=s.data.isTooltipOnly}render(){const{data:s,linkService:d}=this,_=document.createElement("a");_.setAttribute("data-element-id",s.id);let p=!1;return s.url?(d.addLinkAttributes(_,s.url,s.newWindow),p=!0):s.action?(this._bindNamedAction(_,s.action),p=!0):s.dest?(this._bindLink(_,s.dest),p=!0):(s.actions&&(s.actions.Action||s.actions["Mouse Up"]||s.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_,s),p=!0),s.resetForm?(this._bindResetFormAction(_,s.resetForm),p=!0):this.isTooltipOnly&&!p&&(this._bindLink(_,""),p=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((v,R)=>{const x=R===0?_:_.cloneNode();return v.append(x),v}):(this.container.className="linkAnnotation",p&&this.container.append(_),this.container)}_bindLink(s,d){s.href=this.linkService.getDestinationHash(d),s.onclick=()=>(d&&this.linkService.goToDestination(d),!1),(d||d==="")&&(s.className="internalLink")}_bindNamedAction(s,d){s.href=this.linkService.getAnchorUrl(""),s.onclick=()=>(this.linkService.executeNamedAction(d),!1),s.className="internalLink"}_bindJSAction(s,d){s.href=this.linkService.getAnchorUrl("");const _=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const p of Object.keys(d.actions)){const v=_.get(p);v&&(s[v]=()=>{var R;return(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d.id,name:p}}),!1})}s.onclick||(s.onclick=()=>!1),s.className="internalLink"}_bindResetFormAction(s,d){const _=s.onclick;if(_||(s.href=this.linkService.getAnchorUrl("")),s.className="internalLink",!this._fieldObjects){(0,C.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_||(s.onclick=()=>!1);return}s.onclick=()=>{var Z;_&&_();const{fields:p,refs:v,include:R}=d,x=[];if(p.length!==0||v.length!==0){const j=new Set(v);for(const V of p){const Q=this._fieldObjects[V]||[];for(const{id:ot}of Q)j.add(ot)}for(const V of Object.values(this._fieldObjects))for(const Q of V)j.has(Q.id)===R&&x.push(Q)}else for(const j of Object.values(this._fieldObjects))x.push(...j);const u=this.annotationStorage,F=[];for(const j of x){const{id:V}=j;switch(F.push(V),j.type){case"text":{const ot=j.defaultValue||"";u.setValue(V,{value:ot});break}case"checkbox":case"radiobutton":{const ot=j.defaultValue===j.exportValues;u.setValue(V,{value:ot});break}case"combobox":case"listbox":{const ot=j.defaultValue||"";u.setValue(V,{value:ot});break}default:continue}const Q=document.querySelector(`[data-element-id="${V}"]`);if(Q){if(!k.has(Q)){(0,C.warn)(`_bindResetFormAction - element not allowed: ${V}`);continue}}else continue;Q.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((Z=this.linkService.eventBus)==null||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:F,name:"ResetForm"}})),!1}}}class t extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d})}render(){this.container.className="textAnnotation";const s=document.createElement("img");return s.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",s.alt="[{{type}} Annotation]",s.dataset.l10nId="text_annotation_type",s.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(s,this.data),this.container.append(s),this.container}}class r extends E{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(s){const{isWin:d,isMac:_}=E.platform;return d&&s.ctrlKey||_&&s.metaKey}_setEventListener(s,d,_,p){d.includes("mouse")?s.addEventListener(d,v=>{var R;(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:p(v),shift:v.shiftKey,modifier:this._getKeyModifier(v)}})}):s.addEventListener(d,v=>{var R;(R=this.linkService.eventBus)==null||R.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:_,value:p(v)}})})}_setEventListeners(s,d,_){var p;for(const[v,R]of d)(R==="Action"||(p=this.data.actions)!=null&&p[R])&&this._setEventListener(s,v,R,_)}_setBackgroundColor(s){const d=this.data.backgroundColor||null;s.style.backgroundColor=d===null?"transparent":C.Util.makeHexColor(d[0],d[1],d[2])}_setTextStyle(s){const d=["left","center","right"],{fontColor:_}=this.data.defaultAppearanceData,p=this.data.defaultAppearanceData.fontSize||A,v=s.style;let R;if(this.data.multiLine){const x=Math.abs(this.data.rect[3]-this.data.rect[1]),u=Math.round(x/(C.LINE_FACTOR*p))||1,F=x/u;R=Math.min(p,Math.round(F/C.LINE_FACTOR))}else{const x=Math.abs(this.data.rect[3]-this.data.rect[1]);R=Math.min(p,Math.round(x/C.LINE_FACTOR))}v.fontSize=`calc(${R}px * var(--scale-factor))`,v.color=C.Util.makeHexColor(_[0],_[1],_[2]),this.data.textAlignment!==null&&(v.textAlign=d[this.data.textAlignment])}_setRequired(s,d){d?s.setAttribute("required",!0):s.removeAttribute("required"),s.setAttribute("aria-required",d)}}class o extends r{constructor(s){const d=s.renderForms||!s.data.hasAppearance&&!!s.data.fieldValue;super(s,{isRenderable:d})}setPropertyOnSiblings(s,d,_,p){const v=this.annotationStorage;for(const R of this._getElementsByName(s.name,s.id))R.domElement&&(R.domElement[d]=_),v.setValue(R.id,{[p]:_})}render(){var p;const s=this.annotationStorage,d=this.data.id;this.container.className="textWidgetAnnotation";let _=null;if(this.renderForms){const v=s.getValue(d,{value:this.data.fieldValue});let R=v.formattedValue||v.value||"";const x=s.getValue(d,{charLimit:this.data.maxLen}).charLimit;x&&R.length>x&&(R=R.slice(0,x));const u={userValue:R,formattedValue:null,valueOnFocus:""};this.data.multiLine?(_=document.createElement("textarea"),_.textContent=R,this.data.doNotScroll&&(_.style.overflowY="hidden")):(_=document.createElement("input"),_.type="text",_.setAttribute("value",R),this.data.doNotScroll&&(_.style.overflowX="hidden")),k.add(_),_.setAttribute("data-element-id",d),_.disabled=this.data.readOnly,_.name=this.data.fieldName,_.tabIndex=q,this._setRequired(_,this.data.required),x&&(_.maxLength=x),_.addEventListener("input",Z=>{s.setValue(d,{value:Z.target.value}),this.setPropertyOnSiblings(_,"value",Z.target.value,"value")}),_.addEventListener("resetform",Z=>{const j=this.data.defaultFieldValue??"";_.value=u.userValue=j,u.formattedValue=null});let F=Z=>{const{formattedValue:j}=u;j!=null&&(Z.target.value=j),Z.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_.addEventListener("focus",j=>{u.userValue&&(j.target.value=u.userValue),u.valueOnFocus=j.target.value}),_.addEventListener("updatefromsandbox",j=>{const V={value(Q){u.userValue=Q.detail.value??"",s.setValue(d,{value:u.userValue.toString()}),Q.target.value=u.userValue},formattedValue(Q){const{formattedValue:ot}=Q.detail;u.formattedValue=ot,ot!=null&&Q.target!==document.activeElement&&(Q.target.value=ot),s.setValue(d,{formattedValue:ot})},selRange(Q){Q.target.setSelectionRange(...Q.detail.selRange)},charLimit:Q=>{var bt;const{charLimit:ot}=Q.detail,{target:ut}=Q;if(ot===0){ut.removeAttribute("maxLength");return}ut.setAttribute("maxLength",ot);let st=u.userValue;!st||st.length<=ot||(st=st.slice(0,ot),ut.value=u.userValue=st,s.setValue(d,{value:st}),(bt=this.linkService.eventBus)==null||bt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:st,willCommit:!0,commitKey:1,selStart:ut.selectionStart,selEnd:ut.selectionEnd}}))}};this._dispatchEventFromSandbox(V,j)}),_.addEventListener("keydown",j=>{var ot;let V=-1;if(j.key==="Escape"?V=0:j.key==="Enter"?V=2:j.key==="Tab"&&(V=3),V===-1)return;const{value:Q}=j.target;u.valueOnFocus!==Q&&(u.userValue=Q,(ot=this.linkService.eventBus)==null||ot.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:Q,willCommit:!0,commitKey:V,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}}))});const Z=F;F=null,_.addEventListener("blur",j=>{var Q;const{value:V}=j.target;u.userValue=V,this._mouseState.isDown&&u.valueOnFocus!==V&&((Q=this.linkService.eventBus)==null||Q.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:V,willCommit:!0,commitKey:1,selStart:j.target.selectionStart,selEnd:j.target.selectionEnd}})),Z(j)}),(p=this.data.actions)!=null&&p.Keystroke&&_.addEventListener("beforeinput",j=>{var gt;const{data:V,target:Q}=j,{value:ot,selectionStart:ut,selectionEnd:st}=Q;let bt=ut,mt=st;switch(j.inputType){case"deleteWordBackward":{const At=ot.substring(0,ut).match(/\w*[^\w]*$/);At&&(bt-=At[0].length);break}case"deleteWordForward":{const At=ot.substring(ut).match(/^[^\w]*\w*/);At&&(mt+=At[0].length);break}case"deleteContentBackward":ut===st&&(bt-=1);break;case"deleteContentForward":ut===st&&(mt+=1);break}j.preventDefault(),(gt=this.linkService.eventBus)==null||gt.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:ot,change:V||"",willCommit:!1,selStart:bt,selEnd:mt}})}),this._setEventListeners(_,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.value)}if(F&&_.addEventListener("blur",F),this.data.comb){const j=(this.data.rect[2]-this.data.rect[0])/x;_.classList.add("comb"),_.style.letterSpacing=`calc(${j}px * var(--scale-factor) - 1ch)`}}else _=document.createElement("div"),_.textContent=this.data.fieldValue,_.style.verticalAlign="middle",_.style.display="table-cell";return this._setTextStyle(_),this._setBackgroundColor(_),this._setDefaultPropertiesFromJS(_),this.container.append(_),this.container}}class b extends r{constructor(s){super(s,{isRenderable:s.renderForms})}render(){const s=this.annotationStorage,d=this.data,_=d.id;let p=s.getValue(_,{value:d.exportValue===d.fieldValue}).value;typeof p=="string"&&(p=p!=="Off",s.setValue(_,{value:p})),this.container.className="buttonWidgetAnnotation checkBox";const v=document.createElement("input");return k.add(v),v.setAttribute("data-element-id",_),v.disabled=d.readOnly,this._setRequired(v,this.data.required),v.type="checkbox",v.name=d.fieldName,p&&v.setAttribute("checked",!0),v.setAttribute("exportValue",d.exportValue),v.tabIndex=q,v.addEventListener("change",R=>{const{name:x,checked:u}=R.target;for(const F of this._getElementsByName(x,_)){const Z=u&&F.exportValue===d.exportValue;F.domElement&&(F.domElement.checked=Z),s.setValue(F.id,{value:Z})}s.setValue(_,{value:u})}),v.addEventListener("resetform",R=>{const x=d.defaultFieldValue||"Off";R.target.checked=x===d.exportValue}),this.enableScripting&&this.hasJSActions&&(v.addEventListener("updatefromsandbox",R=>{const x={value(u){u.target.checked=u.detail.value!=="Off",s.setValue(_,{value:u.target.checked})}};this._dispatchEventFromSandbox(x,R)}),this._setEventListeners(v,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],R=>R.target.checked)),this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class f extends r{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const s=this.annotationStorage,d=this.data,_=d.id;let p=s.getValue(_,{value:d.fieldValue===d.buttonValue}).value;typeof p=="string"&&(p=p!==d.buttonValue,s.setValue(_,{value:p}));const v=document.createElement("input");if(k.add(v),v.setAttribute("data-element-id",_),v.disabled=d.readOnly,this._setRequired(v,this.data.required),v.type="radio",v.name=d.fieldName,p&&v.setAttribute("checked",!0),v.tabIndex=q,v.addEventListener("change",R=>{const{name:x,checked:u}=R.target;for(const F of this._getElementsByName(x,_))s.setValue(F.id,{value:!1});s.setValue(_,{value:u})}),v.addEventListener("resetform",R=>{const x=d.defaultFieldValue;R.target.checked=x!=null&&x===d.buttonValue}),this.enableScripting&&this.hasJSActions){const R=d.buttonValue;v.addEventListener("updatefromsandbox",x=>{const u={value:F=>{const Z=R===F.detail.value;for(const j of this._getElementsByName(F.target.name)){const V=Z&&j.id===_;j.domElement&&(j.domElement.checked=V),s.setValue(j.id,{value:V})}}};this._dispatchEventFromSandbox(u,x)}),this._setEventListeners(v,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],x=>x.target.checked)}return this._setBackgroundColor(v),this._setDefaultPropertiesFromJS(v),this.container.append(v),this.container}}class l extends c{constructor(s){super(s,{ignoreBorder:s.data.hasAppearance})}render(){const s=super.render();s.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(s.title=this.data.alternativeText);const d=s.lastChild;return this.enableScripting&&this.hasJSActions&&d&&(this._setDefaultPropertiesFromJS(d),d.addEventListener("updatefromsandbox",_=>{this._dispatchEventFromSandbox({},_)})),s}}class n extends r{constructor(s){super(s,{isRenderable:s.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const s=this.annotationStorage,d=this.data.id,_=s.getValue(d,{value:this.data.fieldValue}),p=document.createElement("select");k.add(p),p.setAttribute("data-element-id",d),p.disabled=this.data.readOnly,this._setRequired(p,this.data.required),p.name=this.data.fieldName,p.tabIndex=q;let v=this.data.combo&&this.data.options.length>0;this.data.combo||(p.size=this.data.options.length,this.data.multiSelect&&(p.multiple=!0)),p.addEventListener("resetform",F=>{const Z=this.data.defaultFieldValue;for(const j of p.options)j.selected=j.value===Z});for(const F of this.data.options){const Z=document.createElement("option");Z.textContent=F.displayValue,Z.value=F.exportValue,_.value.includes(F.exportValue)&&(Z.setAttribute("selected",!0),v=!1),p.append(Z)}let R=null;if(v){const F=document.createElement("option");F.value=" ",F.setAttribute("hidden",!0),F.setAttribute("selected",!0),p.prepend(F),R=()=>{F.remove(),p.removeEventListener("input",R),R=null},p.addEventListener("input",R)}const x=(F,Z)=>{const j=Z?"value":"textContent",V=F.target.options;return F.target.multiple?Array.prototype.filter.call(V,Q=>Q.selected).map(Q=>Q[j]):V.selectedIndex===-1?null:V[V.selectedIndex][j]},u=F=>{const Z=F.target.options;return Array.prototype.map.call(Z,j=>({displayValue:j.textContent,exportValue:j.value}))};return this.enableScripting&&this.hasJSActions?(p.addEventListener("updatefromsandbox",F=>{const Z={value(j){R==null||R();const V=j.detail.value,Q=new Set(Array.isArray(V)?V:[V]);for(const ot of p.options)ot.selected=Q.has(ot.value);s.setValue(d,{value:x(j,!0)})},multipleSelection(j){p.multiple=!0},remove(j){const V=p.options,Q=j.detail.remove;V[Q].selected=!1,p.remove(Q),V.length>0&&Array.prototype.findIndex.call(V,ut=>ut.selected)===-1&&(V[0].selected=!0),s.setValue(d,{value:x(j,!0),items:u(j)})},clear(j){for(;p.length!==0;)p.remove(0);s.setValue(d,{value:null,items:[]})},insert(j){const{index:V,displayValue:Q,exportValue:ot}=j.detail.insert,ut=p.children[V],st=document.createElement("option");st.textContent=Q,st.value=ot,ut?ut.before(st):p.append(st),s.setValue(d,{value:x(j,!0),items:u(j)})},items(j){const{items:V}=j.detail;for(;p.length!==0;)p.remove(0);for(const Q of V){const{displayValue:ot,exportValue:ut}=Q,st=document.createElement("option");st.textContent=ot,st.value=ut,p.append(st)}p.options.length>0&&(p.options[0].selected=!0),s.setValue(d,{value:x(j,!0),items:u(j)})},indices(j){const V=new Set(j.detail.indices);for(const Q of j.target.options)Q.selected=V.has(Q.index);s.setValue(d,{value:x(j,!0)})},editable(j){j.target.disabled=!j.detail.editable}};this._dispatchEventFromSandbox(Z,F)}),p.addEventListener("input",F=>{var V;const Z=x(F,!0),j=x(F,!1);s.setValue(d,{value:Z}),(V=this.linkService.eventBus)==null||V.dispatch("dispatcheventinsandbox",{source:this,detail:{id:d,name:"Keystroke",value:j,changeEx:Z,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],F=>F.target.checked)):p.addEventListener("input",function(F){s.setValue(d,{value:x(F,!0)})}),this.data.combo&&this._setTextStyle(p),this._setBackgroundColor(p),this._setDefaultPropertiesFromJS(p),this.container.append(p),this.container}}class i extends E{constructor(s){var _,p,v;const d=!!((_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d})}render(){const s=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",s.includes(this.data.parentType))return this.container;const d=`[data-annotation-id="${this.data.parentId}"]`,_=this.layer.querySelectorAll(d);if(_.length===0)return this.container;const p=new e({container:this.container,trigger:Array.from(_),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),v=this.page,R=C.Util.normalizeRect([this.data.parentRect[0],v.view[3]-this.data.parentRect[1]+v.view[1],this.data.parentRect[2],v.view[3]-this.data.parentRect[3]+v.view[1]]),x=R[0]+this.data.parentRect[2]-this.data.parentRect[0],u=R[1],[F,Z,j,V]=this.viewport.viewBox,Q=j-F,ot=V-Z;return this.container.style.left=`${100*(x-F)/Q}%`,this.container.style.top=`${100*(u-Z)/ot}%`,this.container.append(p.render()),this.container}}class e{constructor(s){this.container=s.container,this.trigger=s.trigger,this.color=s.color,this.titleObj=s.titleObj,this.modificationDate=s.modificationDate,this.contentsObj=s.contentsObj,this.richText=s.richText,this.hideWrapper=s.hideWrapper||!1,this.pinned=!1}render(){var x,u;const d=document.createElement("div");d.className="popupWrapper",this.hideElement=this.hideWrapper?d:this.container,this.hideElement.hidden=!0;const _=document.createElement("div");_.className="popup";const p=this.color;if(p){const F=.7*(255-p[0])+p[0],Z=.7*(255-p[1])+p[1],j=.7*(255-p[2])+p[2];_.style.backgroundColor=C.Util.makeHexColor(F|0,Z|0,j|0)}const v=document.createElement("h1");v.dir=this.titleObj.dir,v.textContent=this.titleObj.str,_.append(v);const R=S.PDFDateString.toDateObject(this.modificationDate);if(R){const F=document.createElement("span");F.className="popupDate",F.textContent="{{date}}, {{time}}",F.dataset.l10nId="annotation_date_string",F.dataset.l10nArgs=JSON.stringify({date:R.toLocaleDateString(),time:R.toLocaleTimeString()}),_.append(F)}if((x=this.richText)!=null&&x.str&&(!((u=this.contentsObj)!=null&&u.str)||this.contentsObj.str===this.richText.str))tt.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:_}),_.lastChild.className="richText popupContent";else{const F=this._formatContents(this.contentsObj);_.append(F)}Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const F of this.trigger)F.addEventListener("click",this._toggle.bind(this)),F.addEventListener("mouseover",this._show.bind(this,!1)),F.addEventListener("mouseout",this._hide.bind(this,!1));return _.addEventListener("click",this._hide.bind(this,!0)),d.append(_),d}_formatContents({str:s,dir:d}){const _=document.createElement("p");_.className="popupContent",_.dir=d;const p=s.split(/(?:\r\n?|\n)/);for(let v=0,R=p.length;v<R;++v){const x=p[v];_.append(document.createTextNode(x)),v<R-1&&_.append(document.createElement("br"))}return _}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(s=!1){s&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(s=!0){s&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class m extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0}),this.textContent=s.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const s=document.createElement("div");s.className="annotationTextContent",s.setAttribute("role","comment");for(const d of this.textContent){const _=document.createElement("span");_.textContent=d,s.append(_)}this.container.append(s)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class y extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const s=this.data,{width:d,height:_}=M(s.rect),p=this.svgFactory.create(d,_,!0),v=this.svgFactory.createElement("svg:line");return v.setAttribute("x1",s.rect[2]-s.lineCoordinates[0]),v.setAttribute("y1",s.rect[3]-s.lineCoordinates[1]),v.setAttribute("x2",s.rect[2]-s.lineCoordinates[2]),v.setAttribute("y2",s.rect[3]-s.lineCoordinates[3]),v.setAttribute("stroke-width",s.borderStyle.width||1),v.setAttribute("stroke","transparent"),v.setAttribute("fill","transparent"),p.append(v),this.container.append(p),this._createPopup(v,s),this.container}}class N extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const s=this.data,{width:d,height:_}=M(s.rect),p=this.svgFactory.create(d,_,!0),v=s.borderStyle.width,R=this.svgFactory.createElement("svg:rect");return R.setAttribute("x",v/2),R.setAttribute("y",v/2),R.setAttribute("width",d-v),R.setAttribute("height",_-v),R.setAttribute("stroke-width",v||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),p.append(R),this.container.append(p),this._createPopup(R,s),this.container}}class L extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const s=this.data,{width:d,height:_}=M(s.rect),p=this.svgFactory.create(d,_,!0),v=s.borderStyle.width,R=this.svgFactory.createElement("svg:ellipse");return R.setAttribute("cx",d/2),R.setAttribute("cy",_/2),R.setAttribute("rx",d/2-v/2),R.setAttribute("ry",_/2-v/2),R.setAttribute("stroke-width",v||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),p.append(R),this.container.append(p),this._createPopup(R,s),this.container}}class nt extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const s=this.data,{width:d,height:_}=M(s.rect),p=this.svgFactory.create(d,_,!0);let v=[];for(const x of s.vertices){const u=x.x-s.rect[0],F=s.rect[3]-x.y;v.push(u+","+F)}v=v.join(" ");const R=this.svgFactory.createElement(this.svgElementName);return R.setAttribute("points",v),R.setAttribute("stroke-width",s.borderStyle.width||1),R.setAttribute("stroke","transparent"),R.setAttribute("fill","transparent"),p.append(R),this.container.append(p),this._createPopup(R,s),this.container}}class at extends nt{constructor(s){super(s),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class J extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class $ extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const s=this.data,{width:d,height:_}=M(s.rect),p=this.svgFactory.create(d,_,!0);for(const v of s.inkLists){let R=[];for(const u of v){const F=u.x-s.rect[0],Z=s.rect[3]-u.y;R.push(`${F},${Z}`)}R=R.join(" ");const x=this.svgFactory.createElement(this.svgElementName);x.setAttribute("points",R),x.setAttribute("stroke-width",s.borderStyle.width||1),x.setAttribute("stroke","transparent"),x.setAttribute("fill","transparent"),this._createPopup(x,s),p.append(x)}return this.container.append(p),this.container}}class B extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class W extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class H extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class et extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class lt extends E{constructor(s){var _,p,v;const d=!!(s.data.hasPopup||(_=s.data.titleObj)!=null&&_.str||(p=s.data.contentsObj)!=null&&p.str||(v=s.data.richText)!=null&&v.str);super(s,{isRenderable:d,ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ft extends E{constructor(s){var p;super(s,{isRenderable:!0});const{filename:d,content:_}=this.data.file;this.filename=(0,S.getFilenameFromUrl)(d),this.content=_,(p=this.linkService.eventBus)==null||p.dispatch("fileattachmentannotation",{source:this,filename:d,content:_})}render(){var d,_;this.container.className="fileAttachmentAnnotation";const s=document.createElement("div");return s.className="popupTriggerArea",s.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((d=this.data.titleObj)!=null&&d.str||(_=this.data.contentsObj)!=null&&_.str||this.data.richText)&&this._createPopup(s,this.data),this.container.append(s),this.container}_download(){var s;(s=this.downloadManager)==null||s.openOrDownloadData(this.container,this.content,this.filename)}}const D=class D{static render(s){var x,u;const{annotations:d,div:_,viewport:p,accessibilityManager:v}=s;ct(this,h,Se).call(this,_,p);let R=0;for(const F of d){if(F.annotationType!==C.AnnotationType.POPUP){const{width:j,height:V}=M(F.rect);if(j<=0||V<=0)continue}const Z=T.create({data:F,layer:_,page:s.page,viewport:p,linkService:s.linkService,downloadManager:s.downloadManager,imageResourcesPath:s.imageResourcesPath||"",renderForms:s.renderForms!==!1,svgFactory:new S.DOMSVGFactory,annotationStorage:s.annotationStorage||new Y.AnnotationStorage,enableScripting:s.enableScripting,hasJSActions:s.hasJSActions,fieldObjects:s.fieldObjects,mouseState:s.mouseState||{isDown:!1}});if(Z.isRenderable){const j=Z.render();if(F.hidden&&(j.style.visibility="hidden"),Array.isArray(j))for(const V of j)V.style.zIndex=R++,ct(x=D,h,ve).call(x,V,F.id,_,v);else j.style.zIndex=R++,Z instanceof i?_.prepend(j):ct(u=D,h,ve).call(u,j,F.id,_,v)}}ct(this,h,Ee).call(this,_,s.annotationCanvasMap)}static update(s){const{annotationCanvasMap:d,div:_,viewport:p}=s;ct(this,h,Se).call(this,_,p),ct(this,h,Ee).call(this,_,d),_.hidden=!1}};h=new WeakSet,ve=function(s,d,_,p){const v=s.firstChild||s;v.id=`${S.AnnotationPrefix}${d}`,_.append(s),p==null||p.moveElementInDOM(_,s,v,!1)},Se=function(s,{width:d,height:_,rotation:p}){const{style:v}=s,R=p%180!==0,x=Math.floor(d)+"px",u=Math.floor(_)+"px";v.width=R?u:x,v.height=R?x:u,s.setAttribute("data-main-rotation",p)},Ee=function(s,d){if(d){for(const[_,p]of d){const v=s.querySelector(`[data-annotation-id="${_}"]`);if(!v)continue;const{firstChild:R}=v;R?R.nodeName==="CANVAS"?R.replaceWith(p):R.before(p):v.append(p)}d.clear()}},ht(D,h);let U=D;g.AnnotationLayer=U},(rt,g)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.ColorConverters=void 0;function K(S){return Math.floor(Math.max(0,Math.min(1,S))*255).toString(16).padStart(2,"0")}class C{static CMYK_G([Y,G,tt,q]){return["G",1-Math.min(1,.3*Y+.59*tt+.11*G+q)]}static G_CMYK([Y]){return["CMYK",0,0,0,1-Y]}static G_RGB([Y]){return["RGB",Y,Y,Y]}static G_HTML([Y]){const G=K(Y);return`#${G}${G}${G}`}static RGB_G([Y,G,tt]){return["G",.3*Y+.59*G+.11*tt]}static RGB_HTML([Y,G,tt]){const q=K(Y),A=K(G),k=K(tt);return`#${q}${A}${k}`}static T_HTML(){return"#00000000"}static CMYK_RGB([Y,G,tt,q]){return["RGB",1-Math.min(1,Y+q),1-Math.min(1,tt+q),1-Math.min(1,G+q)]}static CMYK_HTML(Y){const G=this.CMYK_RGB(Y).slice(1);return this.RGB_HTML(G)}static RGB_CMYK([Y,G,tt]){const q=1-Y,A=1-G,k=1-tt,M=Math.min(q,A,k);return["CMYK",q,A,k,M]}}g.ColorConverters=C},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.XfaLayer=void 0;var C=K(20);class S{static setupStorage(G,tt,q,A,k){const M=A.getValue(tt,{value:null});switch(q.name){case"textarea":if(M.value!==null&&(G.textContent=M.value),k==="print")break;G.addEventListener("input",T=>{A.setValue(tt,{value:T.target.value})});break;case"input":if(q.attributes.type==="radio"||q.attributes.type==="checkbox"){if(M.value===q.attributes.xfaOn?G.setAttribute("checked",!0):M.value===q.attributes.xfaOff&&G.removeAttribute("checked"),k==="print")break;G.addEventListener("change",T=>{A.setValue(tt,{value:T.target.checked?T.target.getAttribute("xfaOn"):T.target.getAttribute("xfaOff")})})}else{if(M.value!==null&&G.setAttribute("value",M.value),k==="print")break;G.addEventListener("input",T=>{A.setValue(tt,{value:T.target.value})})}break;case"select":if(M.value!==null)for(const T of q.children)T.attributes.value===M.value&&(T.attributes.selected=!0);G.addEventListener("input",T=>{const E=T.target.options,c=E.selectedIndex===-1?"":E[E.selectedIndex].value;A.setValue(tt,{value:c})});break}}static setAttributes({html:G,element:tt,storage:q=null,intent:A,linkService:k}){const{attributes:M}=tt,T=G instanceof HTMLAnchorElement;M.type==="radio"&&(M.name=`${M.name}-${A}`);for(const[E,c]of Object.entries(M))if(c!=null)switch(E){case"class":c.length&&G.setAttribute(E,c.join(" "));break;case"dataId":break;case"id":G.setAttribute("data-element-id",c);break;case"style":Object.assign(G.style,c);break;case"textContent":G.textContent=c;break;default:(!T||E!=="href"&&E!=="newWindow")&&G.setAttribute(E,c)}T&&k.addLinkAttributes(G,M.href,M.newWindow),q&&M.dataId&&this.setupStorage(G,M.dataId,tt,q)}static render(G){var t;const tt=G.annotationStorage,q=G.linkService,A=G.xfaHtml,k=G.intent||"display",M=document.createElement(A.name);A.attributes&&this.setAttributes({html:M,element:A,intent:k,linkService:q});const T=[[A,-1,M]],E=G.div;if(E.append(M),G.viewport){const r=`matrix(${G.viewport.transform.join(",")})`;E.style.transform=r}k!=="richText"&&E.setAttribute("class","xfaLayer xfaFont");const c=[];for(;T.length>0;){const[r,o,b]=T.at(-1);if(o+1===r.children.length){T.pop();continue}const f=r.children[++T.at(-1)[1]];if(f===null)continue;const{name:l}=f;if(l==="#text"){const i=document.createTextNode(f.value);c.push(i),b.append(i);continue}let n;if((t=f==null?void 0:f.attributes)!=null&&t.xmlns?n=document.createElementNS(f.attributes.xmlns,l):n=document.createElement(l),b.append(n),f.attributes&&this.setAttributes({html:n,element:f,storage:tt,intent:k,linkService:q}),f.children&&f.children.length>0)T.push([f,-1,n]);else if(f.value){const i=document.createTextNode(f.value);C.XfaText.shouldBuildText(l)&&c.push(i),n.append(i)}}for(const r of E.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))r.setAttribute("readOnly",!0);return{textDivs:c}}static update(G){const tt=`matrix(${G.viewport.transform.join(",")})`;G.div.style.transform=tt,G.div.hidden=!1}}g.XfaLayer=S},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.TextLayerRenderTask=void 0,g.renderTextLayer=b;var C=K(1),S=K(8);const Y=1e5,G=30,tt=.8,q=new Map,A=/^\s+$/g;function k(f,l){const n=q.get(f);if(n)return n;l.save(),l.font=`${G}px ${f}`;const i=l.measureText("");let e=i.fontBoundingBoxAscent,m=Math.abs(i.fontBoundingBoxDescent);if(e){l.restore();const N=e/(e+m);return q.set(f,N),N}l.strokeStyle="red",l.clearRect(0,0,G,G),l.strokeText("g",0,0);let y=l.getImageData(0,0,G,G).data;m=0;for(let N=y.length-1-3;N>=0;N-=4)if(y[N]>0){m=Math.ceil(N/4/G);break}l.clearRect(0,0,G,G),l.strokeText("A",0,G),y=l.getImageData(0,0,G,G).data,e=0;for(let N=0,L=y.length;N<L;N+=4)if(y[N]>0){e=G-Math.floor(N/4/G);break}if(l.restore(),e){const N=e/(e+m);return q.set(f,N),N}return q.set(f,tt),tt}function M(f,l,n,i){const e=document.createElement("span"),m=f._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:l.str!=="",hasEOL:l.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:l.str!=="",hasEOL:l.hasEOL,fontSize:0};f._textDivs.push(e);const y=C.Util.transform(f._viewport.transform,l.transform);let N=Math.atan2(y[1],y[0]);const L=n[l.fontName];L.vertical&&(N+=Math.PI/2);const nt=Math.hypot(y[2],y[3]),at=nt*k(L.fontFamily,i);let J,$;N===0?(J=y[4],$=y[5]-at):(J=y[4]+at*Math.sin(N),$=y[5]-at*Math.cos(N)),e.style.left=`${J}px`,e.style.top=`${$}px`,e.style.fontSize=`${nt}px`,e.style.fontFamily=L.fontFamily,m.fontSize=nt,e.setAttribute("role","presentation"),e.textContent=l.str,e.dir=l.dir,f._fontInspectorEnabled&&(e.dataset.fontName=l.fontName),N!==0&&(m.angle=N*(180/Math.PI));let B=!1;if(l.str.length>1||f._enhanceTextSelection&&A.test(l.str))B=!0;else if(l.str!==" "&&l.transform[0]!==l.transform[3]){const W=Math.abs(l.transform[0]),H=Math.abs(l.transform[3]);W!==H&&Math.max(W,H)/Math.min(W,H)>1.5&&(B=!0)}if(B&&(L.vertical?m.canvasWidth=l.height*f._viewport.scale:m.canvasWidth=l.width*f._viewport.scale),f._textDivProperties.set(e,m),f._textContentStream&&f._layoutText(e),f._enhanceTextSelection&&m.hasText){let W=1,H=0;N!==0&&(W=Math.cos(N),H=Math.sin(N));const et=(L.vertical?l.height:l.width)*f._viewport.scale,lt=nt;let ft,U;N!==0?(ft=[W,H,-H,W,J,$],U=C.Util.getAxialAlignedBoundingBox([0,0,et,lt],ft)):U=[J,$,J+et,$+lt],f._bounds.push({left:U[0],top:U[1],right:U[2],bottom:U[3],div:e,size:[et,lt],m:ft})}}function T(f){if(f._canceled)return;const l=f._textDivs,n=f._capability,i=l.length;if(i>Y){f._renderingDone=!0,n.resolve();return}if(!f._textContentStream)for(let e=0;e<i;e++)f._layoutText(l[e]);f._renderingDone=!0,n.resolve()}function E(f,l,n){let i=0;for(let e=0;e<n;e++){const m=f[l++];m>0&&(i=i?Math.min(m,i):m)}return i}function c(f){const l=f._bounds,n=f._viewport,i=t(n.width,n.height,l);for(let e=0;e<i.length;e++){const m=l[e].div,y=f._textDivProperties.get(m);if(y.angle===0){y.paddingLeft=l[e].left-i[e].left,y.paddingTop=l[e].top-i[e].top,y.paddingRight=i[e].right-l[e].right,y.paddingBottom=i[e].bottom-l[e].bottom,f._textDivProperties.set(m,y);continue}const N=i[e],L=l[e],nt=L.m,at=nt[0],J=nt[1],$=[[0,0],[0,L.size[1]],[L.size[0],0],L.size],B=new Float64Array(64);for(let H=0,et=$.length;H<et;H++){const lt=C.Util.applyTransform($[H],nt);B[H+0]=at&&(N.left-lt[0])/at,B[H+4]=J&&(N.top-lt[1])/J,B[H+8]=at&&(N.right-lt[0])/at,B[H+12]=J&&(N.bottom-lt[1])/J,B[H+16]=J&&(N.left-lt[0])/-J,B[H+20]=at&&(N.top-lt[1])/at,B[H+24]=J&&(N.right-lt[0])/-J,B[H+28]=at&&(N.bottom-lt[1])/at,B[H+32]=at&&(N.left-lt[0])/-at,B[H+36]=J&&(N.top-lt[1])/-J,B[H+40]=at&&(N.right-lt[0])/-at,B[H+44]=J&&(N.bottom-lt[1])/-J,B[H+48]=J&&(N.left-lt[0])/J,B[H+52]=at&&(N.top-lt[1])/-at,B[H+56]=J&&(N.right-lt[0])/J,B[H+60]=at&&(N.bottom-lt[1])/-at}const W=1+Math.min(Math.abs(at),Math.abs(J));y.paddingLeft=E(B,32,16)/W,y.paddingTop=E(B,48,16)/W,y.paddingRight=E(B,0,16)/W,y.paddingBottom=E(B,16,16)/W,f._textDivProperties.set(m,y)}}function t(f,l,n){const i=n.map(function(m,y){return{x1:m.left,y1:m.top,x2:m.right,y2:m.bottom,index:y,x1New:void 0,x2New:void 0}});r(f,i);const e=new Array(n.length);for(const m of i){const y=m.index;e[y]={left:m.x1New,top:0,right:m.x2New,bottom:0}}n.map(function(m,y){const N=e[y],L=i[y];L.x1=m.top,L.y1=f-N.right,L.x2=m.bottom,L.y2=f-N.left,L.index=y,L.x1New=void 0,L.x2New=void 0}),r(l,i);for(const m of i){const y=m.index;e[y].top=m.x1New,e[y].bottom=m.x2New}return e}function r(f,l){l.sort(function(e,m){return e.x1-m.x1||e.index-m.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const e of l){let m=0;for(;m<i.length&&i[m].end<=e.y1;)m++;let y=i.length-1;for(;y>=0&&i[y].start>=e.y2;)y--;let N,L,nt,at,J=-1/0;for(nt=m;nt<=y;nt++){N=i[nt],L=N.boundary;let W;L.x2>e.x1?W=L.index>e.index?L.x1New:e.x1:L.x2New===void 0?W=(L.x2+e.x1)/2:W=L.x2New,W>J&&(J=W)}for(e.x1New=J,nt=m;nt<=y;nt++)N=i[nt],L=N.boundary,L.x2New===void 0?L.x2>e.x1?L.index>e.index&&(L.x2New=L.x2):L.x2New=J:L.x2New>J&&(L.x2New=Math.max(J,L.x2));const $=[];let B=null;for(nt=m;nt<=y;nt++){N=i[nt],L=N.boundary;const W=L.x2>e.x2?L:e;B===W?$.at(-1).end=N.end:($.push({start:N.start,end:N.end,boundary:W}),B=W)}for(i[m].start<e.y1&&($[0].start=e.y1,$.unshift({start:i[m].start,end:e.y1,boundary:i[m].boundary})),e.y2<i[y].end&&($.at(-1).end=e.y2,$.push({start:e.y2,end:i[y].end,boundary:i[y].boundary})),nt=m;nt<=y;nt++){if(N=i[nt],L=N.boundary,L.x2New!==void 0)continue;let W=!1;for(at=m-1;!W&&at>=0&&i[at].start>=L.y1;at--)W=i[at].boundary===L;for(at=y+1;!W&&at<i.length&&i[at].end<=L.y2;at++)W=i[at].boundary===L;for(at=0;!W&&at<$.length;at++)W=$[at].boundary===L;W||(L.x2New=J)}Array.prototype.splice.apply(i,[m,y-m+1,...$])}for(const e of i){const m=e.boundary;m.x2New===void 0&&(m.x2New=Math.max(f,m.x2))}}class o{constructor({textContent:l,textContentStream:n,container:i,viewport:e,textDivs:m,textContentItemsStr:y,enhanceTextSelection:N}){var L;N&&(0,S.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=l,this._textContentStream=n,this._container=i,this._document=i.ownerDocument,this._viewport=e,this._textDivs=m||[],this._textContentItemsStr=y||[],this._enhanceTextSelection=!!N,this._fontInspectorEnabled=!!((L=globalThis.FontInspector)!=null&&L.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,C.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new C.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(l,n){for(let i=0,e=l.length;i<e;i++){if(l[i].str===void 0){if(l[i].type==="beginMarkedContentProps"||l[i].type==="beginMarkedContent"){const m=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),l[i].id!==null&&this._container.setAttribute("id",`${l[i].id}`),m.append(this._container)}else l[i].type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(l[i].str),M(this,l[i],n,this._layoutTextCtx)}}_layoutText(l){const n=this._textDivProperties.get(l);let i="";if(n.canvasWidth!==0&&n.hasText){const{fontFamily:e}=l.style,{fontSize:m}=n;(m!==this._layoutTextLastFontSize||e!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${m*this._devicePixelRatio}px ${e}`,this._layoutTextLastFontSize=m,this._layoutTextLastFontFamily=e);const{width:y}=this._layoutTextCtx.measureText(l.textContent);if(y>0){const N=this._devicePixelRatio*n.canvasWidth/y;this._enhanceTextSelection&&(n.scale=N),i=`scaleX(${N})`}}if(n.angle!==0&&(i=`rotate(${n.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(n.originalTransform=i),l.style.transform=i),n.hasText&&this._container.append(l),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),this._container.append(e)}}_render(l=0){const n=(0,C.createPromiseCapability)();let i=Object.create(null);const e=this._document.createElement("canvas");if(e.height=e.width=G,this._layoutTextCtx=e.getContext("2d",{alpha:!1}),this._textContent){const m=this._textContent.items,y=this._textContent.styles;this._processItems(m,y),n.resolve()}else if(this._textContentStream){const m=()=>{this._reader.read().then(({value:y,done:N})=>{if(N){n.resolve();return}Object.assign(i,y.styles),this._processItems(y.items,i),m()},n.reject)};this._reader=this._textContentStream.getReader(),m()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');n.promise.then(()=>{i=null,l?this._renderTimer=setTimeout(()=>{T(this),this._renderTimer=null},l):T(this)},this._capability.reject)}expandTextDivs(l=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(c(this),this._bounds=null);const n=[],i=[];for(let e=0,m=this._textDivs.length;e<m;e++){const y=this._textDivs[e],N=this._textDivProperties.get(y);N.hasText&&(l?(n.length=0,i.length=0,N.originalTransform&&n.push(N.originalTransform),N.paddingTop>0?(i.push(`${N.paddingTop}px`),n.push(`translateY(${-N.paddingTop}px)`)):i.push(0),N.paddingRight>0?i.push(`${N.paddingRight/N.scale}px`):i.push(0),N.paddingBottom>0?i.push(`${N.paddingBottom}px`):i.push(0),N.paddingLeft>0?(i.push(`${N.paddingLeft/N.scale}px`),n.push(`translateX(${-N.paddingLeft/N.scale}px)`)):i.push(0),y.style.padding=i.join(" "),n.length&&(y.style.transform=n.join(" "))):(y.style.padding=null,y.style.transform=N.originalTransform))}}}g.TextLayerRenderTask=o;function b(f){const l=new o({textContent:f.textContent,textContentStream:f.textContentStream,container:f.container,viewport:f.viewport,textDivs:f.textDivs,textContentItemsStr:f.textContentItemsStr,enhanceTextSelection:f.enhanceTextSelection});return l._render(f.timeout),l}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.SVGGraphics=void 0;var C=K(8),S=K(1),Y=K(3);let G=class{constructor(){(0,S.unreachable)("Not implemented: SVGGraphics")}};g.SVGGraphics=G;{let t=function(n){let i=[];const e=[];for(const m of n){if(m.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),e.push(i),i=i.at(-1).items;continue}m.fn==="restore"?i=e.pop():i.push(m)}return i},r=function(n){if(Number.isInteger(n))return n.toString();const i=n.toFixed(10);let e=i.length-1;if(i[e]!=="0")return i;do e--;while(i[e]==="0");return i.substring(0,i[e]==="."?e:e+1)},o=function(n){if(n[4]===0&&n[5]===0){if(n[1]===0&&n[2]===0)return n[0]===1&&n[3]===1?"":`scale(${r(n[0])} ${r(n[3])})`;if(n[0]===n[3]&&n[1]===-n[2]){const i=Math.acos(n[0])*180/Math.PI;return`rotate(${r(i)})`}}else if(n[0]===1&&n[1]===0&&n[2]===0&&n[3]===1)return`translate(${r(n[4])} ${r(n[5])})`;return`matrix(${r(n[0])} ${r(n[1])} ${r(n[2])} ${r(n[3])} ${r(n[4])} ${r(n[5])})`};const tt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},q="http://www.w3.org/XML/1998/namespace",A="http://www.w3.org/1999/xlink",k=["butt","round","square"],M=["miter","round","bevel"],T=function(n,i="",e=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!e)return URL.createObjectURL(new Blob([n],{type:i}));const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${i};base64,`;for(let N=0,L=n.length;N<L;N+=3){const nt=n[N]&255,at=n[N+1]&255,J=n[N+2]&255,$=nt>>2,B=(nt&3)<<4|at>>4,W=N+1<L?(at&15)<<2|J>>6:64,H=N+2<L?J&63:64;y+=m[$]+m[B]+m[W]+m[H]}return y},E=function(){const n=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,e=new Int32Array(256);for(let J=0;J<256;J++){let $=J;for(let B=0;B<8;B++)$&1?$=3988292384^$>>1&2147483647:$=$>>1&2147483647;e[J]=$}function m(J,$,B){let W=-1;for(let H=$;H<B;H++){const et=(W^J[H])&255,lt=e[et];W=W>>>8^lt}return W^-1}function y(J,$,B,W){let H=W;const et=$.length;B[H]=et>>24&255,B[H+1]=et>>16&255,B[H+2]=et>>8&255,B[H+3]=et&255,H+=4,B[H]=J.charCodeAt(0)&255,B[H+1]=J.charCodeAt(1)&255,B[H+2]=J.charCodeAt(2)&255,B[H+3]=J.charCodeAt(3)&255,H+=4,B.set($,H),H+=$.length;const lt=m(B,W+4,H);B[H]=lt>>24&255,B[H+1]=lt>>16&255,B[H+2]=lt>>8&255,B[H+3]=lt&255}function N(J,$,B){let W=1,H=0;for(let et=$;et<B;++et)W=(W+(J[et]&255))%65521,H=(H+W)%65521;return H<<16|W}function L(J){if(!Y.isNodeJS)return nt(J);try{let $;parseInt(process.versions.node)>=8?$=J:$=Buffer.from(J);const B=require$$5.deflateSync($,{level:9});return B instanceof Uint8Array?B:new Uint8Array(B)}catch($){(0,S.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+$)}return nt(J)}function nt(J){let $=J.length;const B=65535,W=Math.ceil($/B),H=new Uint8Array(2+$+W*5+4);let et=0;H[et++]=120,H[et++]=156;let lt=0;for(;$>B;)H[et++]=0,H[et++]=255,H[et++]=255,H[et++]=0,H[et++]=0,H.set(J.subarray(lt,lt+B),et),et+=B,lt+=B,$-=B;H[et++]=1,H[et++]=$&255,H[et++]=$>>8&255,H[et++]=~$&65535&255,H[et++]=(~$&65535)>>8&255,H.set(J.subarray(lt),et),et+=J.length-lt;const ft=N(J,0,J.length);return H[et++]=ft>>24&255,H[et++]=ft>>16&255,H[et++]=ft>>8&255,H[et++]=ft&255,H}function at(J,$,B,W){const H=J.width,et=J.height;let lt,ft,U;const h=J.data;switch($){case S.ImageKind.GRAYSCALE_1BPP:ft=0,lt=1,U=H+7>>3;break;case S.ImageKind.RGB_24BPP:ft=2,lt=8,U=H*3;break;case S.ImageKind.RGBA_32BPP:ft=6,lt=8,U=H*4;break;default:throw new Error("invalid format")}const a=new Uint8Array((1+U)*et);let w=0,O=0;for(let p=0;p<et;++p)a[w++]=0,a.set(h.subarray(O,O+U),w),O+=U,w+=U;if($===S.ImageKind.GRAYSCALE_1BPP&&W){w=0;for(let p=0;p<et;p++){w++;for(let v=0;v<U;v++)a[w++]^=255}}const D=new Uint8Array([H>>24&255,H>>16&255,H>>8&255,H&255,et>>24&255,et>>16&255,et>>8&255,et&255,lt,ft,0,0,0]),I=L(a),s=n.length+i*3+D.length+I.length,d=new Uint8Array(s);let _=0;return d.set(n,_),_+=n.length,y("IHDR",D,d,_),_+=i+D.length,y("IDATA",I,d,_),_+=i+I.length,y("IEND",new Uint8Array(0),d,_),T(d,"image/png",B)}return function($,B,W){const H=$.kind===void 0?S.ImageKind.GRAYSCALE_1BPP:$.kind;return at($,H,B,W)}}();class c{constructor(){this.fontSizeScale=1,this.fontWeight=tt.fontWeight,this.fontSize=0,this.textMatrix=S.IDENTITY_MATRIX,this.fontMatrix=S.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=S.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=tt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,e){this.x=i,this.y=e}}let b=0,f=0,l=0;g.SVGGraphics=G=class{constructor(n,i,e=!1){(0,C.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new C.DOMSVGFactory,this.current=new c,this.transformMatrix=S.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=n,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!e,this._operatorIdMapping=[];for(const m in S.OPS)this._operatorIdMapping[S.OPS[m]]=m}save(){this.transformStack.push(this.transformMatrix);const n=this.current;this.extraStack.push(n),this.current=n.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(n){this.save(),this.executeOpTree(n),this.restore()}loadDependencies(n){const i=n.fnArray,e=n.argsArray;for(let m=0,y=i.length;m<y;m++)if(i[m]===S.OPS.dependency)for(const N of e[m]){const L=N.startsWith("g_")?this.commonObjs:this.objs,nt=new Promise(at=>{L.get(N,at)});this.current.dependencies.push(nt)}return Promise.all(this.current.dependencies)}transform(n,i,e,m,y,N){const L=[n,i,e,m,y,N];this.transformMatrix=S.Util.transform(this.transformMatrix,L),this.tgrp=null}getSVG(n,i){this.viewport=i;const e=this._initialize(i);return this.loadDependencies(n).then(()=>(this.transformMatrix=S.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(n)),e))}convertOpList(n){const i=this._operatorIdMapping,e=n.argsArray,m=n.fnArray,y=[];for(let N=0,L=m.length;N<L;N++){const nt=m[N];y.push({fnId:nt,fn:i[nt],args:e[N]})}return t(y)}executeOpTree(n){for(const i of n){const e=i.fn,m=i.fnId,y=i.args;switch(m|0){case S.OPS.beginText:this.beginText();break;case S.OPS.dependency:break;case S.OPS.setLeading:this.setLeading(y);break;case S.OPS.setLeadingMoveText:this.setLeadingMoveText(y[0],y[1]);break;case S.OPS.setFont:this.setFont(y);break;case S.OPS.showText:this.showText(y[0]);break;case S.OPS.showSpacedText:this.showText(y[0]);break;case S.OPS.endText:this.endText();break;case S.OPS.moveText:this.moveText(y[0],y[1]);break;case S.OPS.setCharSpacing:this.setCharSpacing(y[0]);break;case S.OPS.setWordSpacing:this.setWordSpacing(y[0]);break;case S.OPS.setHScale:this.setHScale(y[0]);break;case S.OPS.setTextMatrix:this.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]);break;case S.OPS.setTextRise:this.setTextRise(y[0]);break;case S.OPS.setTextRenderingMode:this.setTextRenderingMode(y[0]);break;case S.OPS.setLineWidth:this.setLineWidth(y[0]);break;case S.OPS.setLineJoin:this.setLineJoin(y[0]);break;case S.OPS.setLineCap:this.setLineCap(y[0]);break;case S.OPS.setMiterLimit:this.setMiterLimit(y[0]);break;case S.OPS.setFillRGBColor:this.setFillRGBColor(y[0],y[1],y[2]);break;case S.OPS.setStrokeRGBColor:this.setStrokeRGBColor(y[0],y[1],y[2]);break;case S.OPS.setStrokeColorN:this.setStrokeColorN(y);break;case S.OPS.setFillColorN:this.setFillColorN(y);break;case S.OPS.shadingFill:this.shadingFill(y[0]);break;case S.OPS.setDash:this.setDash(y[0],y[1]);break;case S.OPS.setRenderingIntent:this.setRenderingIntent(y[0]);break;case S.OPS.setFlatness:this.setFlatness(y[0]);break;case S.OPS.setGState:this.setGState(y[0]);break;case S.OPS.fill:this.fill();break;case S.OPS.eoFill:this.eoFill();break;case S.OPS.stroke:this.stroke();break;case S.OPS.fillStroke:this.fillStroke();break;case S.OPS.eoFillStroke:this.eoFillStroke();break;case S.OPS.clip:this.clip("nonzero");break;case S.OPS.eoClip:this.clip("evenodd");break;case S.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case S.OPS.paintImageXObject:this.paintImageXObject(y[0]);break;case S.OPS.paintInlineImageXObject:this.paintInlineImageXObject(y[0]);break;case S.OPS.paintImageMaskXObject:this.paintImageMaskXObject(y[0]);break;case S.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(y[0],y[1]);break;case S.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case S.OPS.closePath:this.closePath();break;case S.OPS.closeStroke:this.closeStroke();break;case S.OPS.closeFillStroke:this.closeFillStroke();break;case S.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case S.OPS.nextLine:this.nextLine();break;case S.OPS.transform:this.transform(y[0],y[1],y[2],y[3],y[4],y[5]);break;case S.OPS.constructPath:this.constructPath(y[0],y[1]);break;case S.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,S.warn)(`Unimplemented operator ${e}`);break}}}setWordSpacing(n){this.current.wordSpacing=n}setCharSpacing(n){this.current.charSpacing=n}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(n,i,e,m,y,N){const L=this.current;L.textMatrix=L.lineMatrix=[n,i,e,m,y,N],L.textMatrixScale=Math.hypot(n,i),L.x=L.lineX=0,L.y=L.lineY=0,L.xcoords=[],L.ycoords=[],L.tspan=this.svgFactory.createElement("svg:tspan"),L.tspan.setAttributeNS(null,"font-family",L.fontFamily),L.tspan.setAttributeNS(null,"font-size",`${r(L.fontSize)}px`),L.tspan.setAttributeNS(null,"y",r(-L.y)),L.txtElement=this.svgFactory.createElement("svg:text"),L.txtElement.append(L.tspan)}beginText(){const n=this.current;n.x=n.lineX=0,n.y=n.lineY=0,n.textMatrix=S.IDENTITY_MATRIX,n.lineMatrix=S.IDENTITY_MATRIX,n.textMatrixScale=1,n.tspan=this.svgFactory.createElement("svg:tspan"),n.txtElement=this.svgFactory.createElement("svg:text"),n.txtgrp=this.svgFactory.createElement("svg:g"),n.xcoords=[],n.ycoords=[]}moveText(n,i){const e=this.current;e.x=e.lineX+=n,e.y=e.lineY+=i,e.xcoords=[],e.ycoords=[],e.tspan=this.svgFactory.createElement("svg:tspan"),e.tspan.setAttributeNS(null,"font-family",e.fontFamily),e.tspan.setAttributeNS(null,"font-size",`${r(e.fontSize)}px`),e.tspan.setAttributeNS(null,"y",r(-e.y))}showText(n){const i=this.current,e=i.font,m=i.fontSize;if(m===0)return;const y=i.fontSizeScale,N=i.charSpacing,L=i.wordSpacing,nt=i.fontDirection,at=i.textHScale*nt,J=e.vertical,$=J?1:-1,B=e.defaultVMetrics,W=m*i.fontMatrix[0];let H=0;for(const ft of n){if(ft===null){H+=nt*L;continue}else if(typeof ft=="number"){H+=$*ft*m/1e3;continue}const U=(ft.isSpace?L:0)+N,h=ft.fontChar;let a,w,O=ft.width;if(J){let I;const s=ft.vmetric||B;I=ft.vmetric?s[1]:O*.5,I=-I*W;const d=s[2]*W;O=s?-s[0]:O,a=I/y,w=(H+d)/y}else a=H/y,w=0;(ft.isInFont||e.missingFile)&&(i.xcoords.push(i.x+a),J&&i.ycoords.push(-i.y+w),i.tspan.textContent+=h);let D;J?D=O*W-U*nt:D=O*W+U*nt,H+=D}i.tspan.setAttributeNS(null,"x",i.xcoords.map(r).join(" ")),J?i.tspan.setAttributeNS(null,"y",i.ycoords.map(r).join(" ")):i.tspan.setAttributeNS(null,"y",r(-i.y)),J?i.y-=H:i.x+=H*at,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${r(i.fontSize)}px`),i.fontStyle!==tt.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==tt.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const et=i.textRenderingMode&S.TextRenderingMode.FILL_STROKE_MASK;if(et===S.TextRenderingMode.FILL||et===S.TextRenderingMode.FILL_STROKE?(i.fillColor!==tt.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.textRenderingMode===S.TextRenderingMode.ADD_TO_PATH?i.tspan.setAttributeNS(null,"fill","transparent"):i.tspan.setAttributeNS(null,"fill","none"),et===S.TextRenderingMode.STROKE||et===S.TextRenderingMode.FILL_STROKE){const ft=1/(i.textMatrixScale||1);this._setStrokeAttributes(i.tspan,ft)}let lt=i.textMatrix;i.textRise!==0&&(lt=lt.slice(),lt[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${o(lt)} scale(${r(at)}, -1)`),i.txtElement.setAttributeNS(q,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(n,i){this.setLeading(-i),this.moveText(n,i)}addFontStyle(n){if(!n.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=T(n.data,n.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${n.loadedName}"; src: url(${i}); }
`}setFont(n){const i=this.current,e=this.commonObjs.get(n[0]);let m=n[1];i.font=e,this.embedFonts&&!e.missingFile&&!this.embeddedFonts[e.loadedName]&&(this.addFontStyle(e),this.embeddedFonts[e.loadedName]=e),i.fontMatrix=e.fontMatrix||S.FONT_IDENTITY_MATRIX;let y="normal";e.black?y="900":e.bold&&(y="bold");const N=e.italic?"italic":"normal";m<0?(m=-m,i.fontDirection=-1):i.fontDirection=1,i.fontSize=m,i.fontFamily=e.loadedName,i.fontWeight=y,i.fontStyle=N,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",r(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const n=this.current;n.textRenderingMode&S.TextRenderingMode.ADD_TO_PATH_FLAG&&((i=n.txtElement)!=null&&i.hasChildNodes())&&(n.element=n.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(n){n>0&&(this.current.lineWidth=n)}setLineCap(n){this.current.lineCap=k[n]}setLineJoin(n){this.current.lineJoin=M[n]}setMiterLimit(n){this.current.miterLimit=n}setStrokeAlpha(n){this.current.strokeAlpha=n}setStrokeRGBColor(n,i,e){this.current.strokeColor=S.Util.makeHexColor(n,i,e)}setFillAlpha(n){this.current.fillAlpha=n}setFillRGBColor(n,i,e){this.current.fillColor=S.Util.makeHexColor(n,i,e),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(n){this.current.strokeColor=this._makeColorN_Pattern(n)}setFillColorN(n){this.current.fillColor=this._makeColorN_Pattern(n)}shadingFill(n){const i=this.viewport.width,e=this.viewport.height,m=S.Util.inverseTransform(this.transformMatrix),y=S.Util.applyTransform([0,0],m),N=S.Util.applyTransform([0,e],m),L=S.Util.applyTransform([i,0],m),nt=S.Util.applyTransform([i,e],m),at=Math.min(y[0],N[0],L[0],nt[0]),J=Math.min(y[1],N[1],L[1],nt[1]),$=Math.max(y[0],N[0],L[0],nt[0]),B=Math.max(y[1],N[1],L[1],nt[1]),W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x",at),W.setAttributeNS(null,"y",J),W.setAttributeNS(null,"width",$-at),W.setAttributeNS(null,"height",B-J),W.setAttributeNS(null,"fill",this._makeShadingPattern(n)),this.current.fillAlpha<1&&W.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(W)}_makeColorN_Pattern(n){return n[0]==="TilingPattern"?this._makeTilingPattern(n):this._makeShadingPattern(n)}_makeTilingPattern(n){const i=n[1],e=n[2],m=n[3]||S.IDENTITY_MATRIX,[y,N,L,nt]=n[4],at=n[5],J=n[6],$=n[7],B=`shading${l++}`,[W,H,et,lt]=S.Util.normalizeRect([...S.Util.applyTransform([y,N],m),...S.Util.applyTransform([L,nt],m)]),[ft,U]=S.Util.singularValueDecompose2dScale(m),h=at*ft,a=J*U,w=this.svgFactory.createElement("svg:pattern");w.setAttributeNS(null,"id",B),w.setAttributeNS(null,"patternUnits","userSpaceOnUse"),w.setAttributeNS(null,"width",h),w.setAttributeNS(null,"height",a),w.setAttributeNS(null,"x",`${W}`),w.setAttributeNS(null,"y",`${H}`);const O=this.svg,D=this.transformMatrix,I=this.current.fillColor,s=this.current.strokeColor,d=this.svgFactory.create(et-W,lt-H);if(this.svg=d,this.transformMatrix=m,$===2){const _=S.Util.makeHexColor(...i);this.current.fillColor=_,this.current.strokeColor=_}return this.executeOpTree(this.convertOpList(e)),this.svg=O,this.transformMatrix=D,this.current.fillColor=I,this.current.strokeColor=s,w.append(d.childNodes[0]),this.defs.append(w),`url(#${B})`}_makeShadingPattern(n){switch(typeof n=="string"&&(n=this.objs.get(n)),n[0]){case"RadialAxial":const i=`shading${l++}`,e=n[3];let m;switch(n[1]){case"axial":const y=n[4],N=n[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",y[0]),m.setAttributeNS(null,"y1",y[1]),m.setAttributeNS(null,"x2",N[0]),m.setAttributeNS(null,"y2",N[1]);break;case"radial":const L=n[4],nt=n[5],at=n[6],J=n[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",nt[0]),m.setAttributeNS(null,"cy",nt[1]),m.setAttributeNS(null,"r",J),m.setAttributeNS(null,"fx",L[0]),m.setAttributeNS(null,"fy",L[1]),m.setAttributeNS(null,"fr",at);break;default:throw new Error(`Unknown RadialAxial type: ${n[1]}`)}for(const y of e){const N=this.svgFactory.createElement("svg:stop");N.setAttributeNS(null,"offset",y[0]),N.setAttributeNS(null,"stop-color",y[1]),m.append(N)}return this.defs.append(m),`url(#${i})`;case"Mesh":return(0,S.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${n[0]}`)}}setDash(n,i){this.current.dashArray=n,this.current.dashPhase=i}constructPath(n,i){const e=this.current;let m=e.x,y=e.y,N=[],L=0;for(const nt of n)switch(nt|0){case S.OPS.rectangle:m=i[L++],y=i[L++];const at=i[L++],J=i[L++],$=m+at,B=y+J;N.push("M",r(m),r(y),"L",r($),r(y),"L",r($),r(B),"L",r(m),r(B),"Z");break;case S.OPS.moveTo:m=i[L++],y=i[L++],N.push("M",r(m),r(y));break;case S.OPS.lineTo:m=i[L++],y=i[L++],N.push("L",r(m),r(y));break;case S.OPS.curveTo:m=i[L+4],y=i[L+5],N.push("C",r(i[L]),r(i[L+1]),r(i[L+2]),r(i[L+3]),r(m),r(y)),L+=6;break;case S.OPS.curveTo2:N.push("C",r(m),r(y),r(i[L]),r(i[L+1]),r(i[L+2]),r(i[L+3])),m=i[L+2],y=i[L+3],L+=4;break;case S.OPS.curveTo3:m=i[L+2],y=i[L+3],N.push("C",r(i[L]),r(i[L+1]),r(m),r(y),r(m),r(y)),L+=4;break;case S.OPS.closePath:N.push("Z");break}N=N.join(" "),e.path&&n.length>0&&n[0]!==S.OPS.rectangle&&n[0]!==S.OPS.moveTo?N=e.path.getAttributeNS(null,"d")+N:(e.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(e.path)),e.path.setAttributeNS(null,"d",N),e.path.setAttributeNS(null,"fill","none"),e.element=e.path,e.setCurrentPoint(m,y)}endPath(){const n=this.current;if(n.path=null,!this.pendingClip)return;if(!n.element){this.pendingClip=null;return}const i=`clippath${b++}`,e=this.svgFactory.createElement("svg:clipPath");e.setAttributeNS(null,"id",i),e.setAttributeNS(null,"transform",o(this.transformMatrix));const m=n.element.cloneNode(!0);if(this.pendingClip==="evenodd"?m.setAttributeNS(null,"clip-rule","evenodd"):m.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,e.append(m),this.defs.append(e),n.activeClipUrl){n.clipGroup=null;for(const y of this.extraStack)y.clipGroup=null;e.setAttributeNS(null,"clip-path",n.activeClipUrl)}n.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(n){this.pendingClip=n}closePath(){const n=this.current;if(n.path){const i=`${n.path.getAttributeNS(null,"d")}Z`;n.path.setAttributeNS(null,"d",i)}}setLeading(n){this.current.leading=-n}setTextRise(n){this.current.textRise=n}setTextRenderingMode(n){this.current.textRenderingMode=n}setHScale(n){this.current.textHScale=n/100}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(const[i,e]of n)switch(i){case"LW":this.setLineWidth(e);break;case"LC":this.setLineCap(e);break;case"LJ":this.setLineJoin(e);break;case"ML":this.setMiterLimit(e);break;case"D":this.setDash(e[0],e[1]);break;case"RI":this.setRenderingIntent(e);break;case"FL":this.setFlatness(e);break;case"Font":this.setFont(e);break;case"CA":this.setStrokeAlpha(e);break;case"ca":this.setFillAlpha(e);break;default:(0,S.warn)(`Unimplemented graphic state operator ${i}`);break}}fill(){const n=this.current;n.element&&(n.element.setAttributeNS(null,"fill",n.fillColor),n.element.setAttributeNS(null,"fill-opacity",n.fillAlpha),this.endPath())}stroke(){const n=this.current;n.element&&(this._setStrokeAttributes(n.element),n.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(n,i=1){const e=this.current;let m=e.dashArray;i!==1&&m.length>0&&(m=m.map(function(y){return i*y})),n.setAttributeNS(null,"stroke",e.strokeColor),n.setAttributeNS(null,"stroke-opacity",e.strokeAlpha),n.setAttributeNS(null,"stroke-miterlimit",r(e.miterLimit)),n.setAttributeNS(null,"stroke-linecap",e.lineCap),n.setAttributeNS(null,"stroke-linejoin",e.lineJoin),n.setAttributeNS(null,"stroke-width",r(i*e.lineWidth)+"px"),n.setAttributeNS(null,"stroke-dasharray",m.map(r).join(" ")),n.setAttributeNS(null,"stroke-dashoffset",r(i*e.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const n=this.svgFactory.createElement("svg:rect");n.setAttributeNS(null,"x","0"),n.setAttributeNS(null,"y","0"),n.setAttributeNS(null,"width","1px"),n.setAttributeNS(null,"height","1px"),n.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(n)}paintImageXObject(n){const i=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!i){(0,S.warn)(`Dependent image with object ID ${n} is not ready yet`);return}this.paintInlineImageXObject(i)}paintInlineImageXObject(n,i){const e=n.width,m=n.height,y=E(n,this.forceDataSchema,!!i),N=this.svgFactory.createElement("svg:rect");N.setAttributeNS(null,"x","0"),N.setAttributeNS(null,"y","0"),N.setAttributeNS(null,"width",r(e)),N.setAttributeNS(null,"height",r(m)),this.current.element=N,this.clip("nonzero");const L=this.svgFactory.createElement("svg:image");L.setAttributeNS(A,"xlink:href",y),L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y",r(-m)),L.setAttributeNS(null,"width",r(e)+"px"),L.setAttributeNS(null,"height",r(m)+"px"),L.setAttributeNS(null,"transform",`scale(${r(1/e)} ${r(-1/m)})`),i?i.append(L):this._ensureTransformGroup().append(L)}paintImageMaskXObject(n){const i=this.current,e=n.width,m=n.height,y=i.fillColor;i.maskId=`mask${f++}`;const N=this.svgFactory.createElement("svg:mask");N.setAttributeNS(null,"id",i.maskId);const L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x","0"),L.setAttributeNS(null,"y","0"),L.setAttributeNS(null,"width",r(e)),L.setAttributeNS(null,"height",r(m)),L.setAttributeNS(null,"fill",y),L.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.append(N),this._ensureTransformGroup().append(L),this.paintInlineImageXObject(n,N)}paintFormXObjectBegin(n,i){if(Array.isArray(n)&&n.length===6&&this.transform(n[0],n[1],n[2],n[3],n[4],n[5]),i){const e=i[2]-i[0],m=i[3]-i[1],y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x",i[0]),y.setAttributeNS(null,"y",i[1]),y.setAttributeNS(null,"width",r(e)),y.setAttributeNS(null,"height",r(m)),this.current.element=y,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(n){const i=this.svgFactory.create(n.width,n.height),e=this.svgFactory.createElement("svg:defs");i.append(e),this.defs=e;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",o(n.transform)),i.append(m),this.svg=m,i}_ensureClipGroup(){if(!this.current.clipGroup){const n=this.svgFactory.createElement("svg:g");n.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(n),this.current.clipGroup=n}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",o(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFNodeStream=void 0;var C=K(1),S=K(33);const Y=require$$5,G=require$$5,tt=require$$5,q=require$$5,A=/^file:\/\/\/[a-zA-Z]:\//;function k(f){const l=q.parse(f);return l.protocol==="file:"||l.host?l:/^[a-z]:[/\\]/i.test(f)?q.parse(`file:///${f}`):(l.host||(l.protocol="file:"),l)}class M{constructor(l){this.source=l,this.url=k(l.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&l.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var l;return((l=this._fullRequestReader)==null?void 0:l._loaded)??0}getFullReader(){return(0,C.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new o(this):new t(this),this._fullRequestReader}getRangeReader(l,n){if(n<=this._progressiveDataLength)return null;const i=this.isFsUrl?new b(this,l,n):new r(this,l,n);return this._rangeRequestReaders.push(i),i}cancelAllRequests(l){this._fullRequestReader&&this._fullRequestReader.cancel(l);for(const n of this._rangeRequestReaders.slice(0))n.cancel(l)}}g.PDFNodeStream=M;class T{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null;const n=l.source;this._contentLength=n.length,this._loaded=0,this._filename=null,this._disableRange=n.disableRange||!1,this._rangeChunkSize=n.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!n.disableStream,this._isRangeSupported=!n.disableRange,this._readableStream=null,this._readCapability=(0,C.createPromiseCapability)(),this._headersCapability=(0,C.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=(0,C.createPromiseCapability)(),this.read()):(this._loaded+=l.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",n=>{this._error(n)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new C.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class E{constructor(l){this._url=l.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,C.createPromiseCapability)();const n=l.source;this._isStreamingSupported=!n.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const l=this._readableStream.read();return l===null?(this._readCapability=(0,C.createPromiseCapability)(),this.read()):(this._loaded+=l.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(l).buffer,done:!1})}cancel(l){if(!this._readableStream){this._error(l);return}this._readableStream.destroy(l)}_error(l){this._storedError=l,this._readCapability.resolve()}_setReadableStream(l){this._readableStream=l,l.on("readable",()=>{this._readCapability.resolve()}),l.on("end",()=>{l.destroy(),this._done=!0,this._readCapability.resolve()}),l.on("error",n=>{this._error(n)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(f,l){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:l}}class t extends T{constructor(l){super(l);const n=i=>{if(i.statusCode===404){const N=new C.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=N,this._headersCapability.reject(N);return}this._headersCapability.resolve(),this._setReadableStream(i);const e=N=>this._readableStream.headers[N.toLowerCase()],{allowRangeRequests:m,suggestedLength:y}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:e,isHttp:l.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=y||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(e)};this._request=null,this._url.protocol==="http:"?this._request=G.request(c(this._url,l.httpHeaders),n):this._request=tt.request(c(this._url,l.httpHeaders),n),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class r extends E{constructor(l,n,i){super(l),this._httpHeaders={};for(const m in l.httpHeaders){const y=l.httpHeaders[m];typeof y>"u"||(this._httpHeaders[m]=y)}this._httpHeaders.Range=`bytes=${n}-${i-1}`;const e=m=>{if(m.statusCode===404){const y=new C.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=y;return}this._setReadableStream(m)};this._request=null,this._url.protocol==="http:"?this._request=G.request(c(this._url,this._httpHeaders),e):this._request=tt.request(c(this._url,this._httpHeaders),e),this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class o extends T{constructor(l){super(l);let n=decodeURIComponent(this._url.path);A.test(this._url.href)&&(n=n.replace(/^\//,"")),Y.lstat(n,(i,e)=>{if(i){i.code==="ENOENT"&&(i=new C.MissingPDFException(`Missing PDF "${n}".`)),this._storedError=i,this._headersCapability.reject(i);return}this._contentLength=e.size,this._setReadableStream(Y.createReadStream(n)),this._headersCapability.resolve()})}}class b extends E{constructor(l,n,i){super(l);let e=decodeURIComponent(this._url.path);A.test(this._url.href)&&(e=e.replace(/^\//,"")),this._setReadableStream(Y.createReadStream(e,{start:n,end:i-1}))}}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.createResponseStatusError=q,g.extractFilenameFromHeader=tt,g.validateRangeRequestCapabilities=G,g.validateResponseStatus=A;var C=K(1),S=K(34),Y=K(8);function G({getResponseHeader:k,isHttp:M,rangeChunkSize:T,disableRange:E}){const c={allowRangeRequests:!1,suggestedLength:void 0},t=parseInt(k("Content-Length"),10);return!Number.isInteger(t)||(c.suggestedLength=t,t<=2*T)||E||!M||k("Accept-Ranges")!=="bytes"||(k("Content-Encoding")||"identity")!=="identity"||(c.allowRangeRequests=!0),c}function tt(k){const M=k("Content-Disposition");if(M){let T=(0,S.getFilenameFromContentDispositionHeader)(M);if(T.includes("%"))try{T=decodeURIComponent(T)}catch{}if((0,Y.isPdfFile)(T))return T}return null}function q(k,M){return k===404||k===0&&M.startsWith("file:")?new C.MissingPDFException('Missing PDF "'+M+'".'):new C.UnexpectedResponseException(`Unexpected server response (${k}) while retrieving PDF "${M}".`,k)}function A(k){return k===200||k===206}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.getFilenameFromContentDispositionHeader=S;var C=K(1);function S(Y){let G=!0,tt=q("filename\\*","i").exec(Y);if(tt){tt=tt[1];let t=T(tt);return t=unescape(t),t=E(t),t=c(t),k(t)}if(tt=M(Y),tt){const t=c(tt);return k(t)}if(tt=q("filename","i").exec(Y),tt){tt=tt[1];let t=T(tt);return t=c(t),k(t)}function q(t,r){return new RegExp("(?:^|;)\\s*"+t+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function A(t,r){if(t){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const o=new TextDecoder(t,{fatal:!0}),b=(0,C.stringToBytes)(r);r=o.decode(b),G=!1}catch{}}return r}function k(t){return G&&/[\x80-\xff]/.test(t)&&(t=A("utf-8",t),G&&(t=A("iso-8859-1",t))),t}function M(t){const r=[];let o;const b=q("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(o=b.exec(t))!==null;){let[,l,n,i]=o;if(l=parseInt(l,10),l in r){if(l===0)break;continue}r[l]=[n,i]}const f=[];for(let l=0;l<r.length&&l in r;++l){let[n,i]=r[l];i=T(i),n&&(i=unescape(i),l===0&&(i=E(i))),f.push(i)}return f.join("")}function T(t){if(t.startsWith('"')){const r=t.slice(1).split('\\"');for(let o=0;o<r.length;++o){const b=r[o].indexOf('"');b!==-1&&(r[o]=r[o].slice(0,b),r.length=o+1),r[o]=r[o].replace(/\\(.)/g,"$1")}t=r.join('"')}return t}function E(t){const r=t.indexOf("'");if(r===-1)return t;const o=t.slice(0,r),f=t.slice(r+1).replace(/^[^']*'/,"");return A(o,f)}function c(t){return!t.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(t)?t:t.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,o,b,f){if(b==="q"||b==="Q")return f=f.replace(/_/g," "),f=f.replace(/=([0-9a-fA-F]{2})/g,function(l,n){return String.fromCharCode(parseInt(n,16))}),A(o,f);try{f=atob(f)}catch{}return A(o,f)})}return""}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFNetworkStream=void 0;var C=K(1),S=K(33);const Y=200,G=206;function tt(T){const E=T.response;return typeof E!="string"?E:(0,C.stringToBytes)(E).buffer}class q{constructor(E,c={}){this.url=E,this.isHttp=/^https?:/i.test(E),this.httpHeaders=this.isHttp&&c.httpHeaders||Object.create(null),this.withCredentials=c.withCredentials||!1,this.getXhr=c.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(E,c,t){const r={begin:E,end:c};for(const o in t)r[o]=t[o];return this.request(r)}requestFull(E){return this.request(E)}request(E){const c=this.getXhr(),t=this.currXhrId++,r=this.pendingRequests[t]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const o in this.httpHeaders){const b=this.httpHeaders[o];typeof b>"u"||c.setRequestHeader(o,b)}return this.isHttp&&"begin"in E&&"end"in E?(c.setRequestHeader("Range",`bytes=${E.begin}-${E.end-1}`),r.expectedStatus=G):r.expectedStatus=Y,c.responseType="arraybuffer",E.onError&&(c.onerror=function(o){E.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,t),c.onprogress=this.onProgress.bind(this,t),r.onHeadersReceived=E.onHeadersReceived,r.onDone=E.onDone,r.onError=E.onError,r.onProgress=E.onProgress,c.send(null),t}onProgress(E,c){var r;const t=this.pendingRequests[E];t&&((r=t.onProgress)==null||r.call(t,c))}onStateChange(E,c){var l,n,i;const t=this.pendingRequests[E];if(!t)return;const r=t.xhr;if(r.readyState>=2&&t.onHeadersReceived&&(t.onHeadersReceived(),delete t.onHeadersReceived),r.readyState!==4||!(E in this.pendingRequests))return;if(delete this.pendingRequests[E],r.status===0&&this.isHttp){(l=t.onError)==null||l.call(t,r.status);return}const o=r.status||Y;if(!(o===Y&&t.expectedStatus===G)&&o!==t.expectedStatus){(n=t.onError)==null||n.call(t,r.status);return}const f=tt(r);if(o===G){const e=r.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t.onDone({begin:parseInt(m[1],10),chunk:f})}else f?t.onDone({begin:0,chunk:f}):(i=t.onError)==null||i.call(t,r.status)}getRequestXhr(E){return this.pendingRequests[E].xhr}isPendingRequest(E){return E in this.pendingRequests}abortRequest(E){const c=this.pendingRequests[E].xhr;delete this.pendingRequests[E],c.abort()}}class A{constructor(E){this._source=E,this._manager=new q(E.url,{httpHeaders:E.httpHeaders,withCredentials:E.withCredentials}),this._rangeChunkSize=E.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(E){const c=this._rangeRequestReaders.indexOf(E);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return(0,C.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new k(this._manager,this._source),this._fullRequestReader}getRangeReader(E,c){const t=new M(this._manager,E,c);return t.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(t),t}cancelAllRequests(E){var c;(c=this._fullRequestReader)==null||c.cancel(E);for(const t of this._rangeRequestReaders.slice(0))t.cancel(E)}}g.PDFNetworkStream=A;class k{constructor(E,c){this._manager=E;const t={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._fullRequestId=E.requestFull(t),this._headersReceivedCapability=(0,C.createPromiseCapability)(),this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const E=this._fullRequestId,c=this._manager.getRequestXhr(E),t=b=>c.getResponseHeader(b),{allowRangeRequests:r,suggestedLength:o}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(t),this._isRangeSupported&&this._manager.abortRequest(E),this._headersReceivedCapability.resolve()}_onDone(E){if(E&&(this._requests.length>0?this._requests.shift().resolve({value:E.chunk,done:!1}):this._cachedChunks.push(E.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(E){this._storedError=(0,S.createResponseStatusError)(E,this._url),this._headersReceivedCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(E){var c;(c=this.onProgress)==null||c.call(this,{loaded:E.loaded,total:E.lengthComputable?E.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const E=(0,C.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0,this._headersReceivedCapability.reject(E);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class M{constructor(E,c,t){this._manager=E;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=E.url,this._requestId=E.requestRange(c,t,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var E;(E=this.onClosed)==null||E.call(this,this)}_onDone(E){const c=E.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(E){this._storedError=(0,S.createResponseStatusError)(E,this._url);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(E){var c;this.isStreamingSupported||(c=this.onProgress)==null||c.call(this,{loaded:E.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const c=this._queuedChunk;return this._queuedChunk=null,{value:c,done:!1}}if(this._done)return{value:void 0,done:!0};const E=(0,C.createPromiseCapability)();return this._requests.push(E),E.promise}cancel(E){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(rt,g,K)=>{Object.defineProperty(g,"__esModule",{value:!0}),g.PDFFetchStream=void 0;var C=K(1),S=K(33);function Y(k,M,T){return{method:"GET",headers:k,signal:T.signal,mode:"cors",credentials:M?"include":"same-origin",redirect:"follow"}}function G(k){const M=new Headers;for(const T in k){const E=k[T];typeof E>"u"||M.append(T,E)}return M}class tt{constructor(M){this.source=M,this.isHttp=/^https?:/i.test(M.url),this.httpHeaders=this.isHttp&&M.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var M;return((M=this._fullRequestReader)==null?void 0:M._loaded)??0}getFullReader(){return(0,C.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new q(this),this._fullRequestReader}getRangeReader(M,T){if(T<=this._progressiveDataLength)return null;const E=new A(this,M,T);return this._rangeRequestReaders.push(E),E}cancelAllRequests(M){this._fullRequestReader&&this._fullRequestReader.cancel(M);for(const T of this._rangeRequestReaders.slice(0))T.cancel(M)}}g.PDFFetchStream=tt;class q{constructor(M){this._stream=M,this._reader=null,this._loaded=0,this._filename=null;const T=M.source;this._withCredentials=T.withCredentials||!1,this._contentLength=T.length,this._headersCapability=(0,C.createPromiseCapability)(),this._disableRange=T.disableRange||!1,this._rangeChunkSize=T.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!T.disableStream,this._isRangeSupported=!T.disableRange,this._headers=G(this._stream.httpHeaders);const E=T.url;fetch(E,Y(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,S.validateResponseStatus)(c.status))throw(0,S.createResponseStatusError)(c.status,E);this._reader=c.body.getReader(),this._headersCapability.resolve();const t=b=>c.headers.get(b),{allowRangeRequests:r,suggestedLength:o}=(0,S.validateRangeRequestCapabilities)({getResponseHeader:t,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=o||this._contentLength,this._filename=(0,S.extractFilenameFromHeader)(t),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new C.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:M,done:T}=await this._reader.read();return T?{value:M,done:T}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}class A{constructor(M,T,E){this._stream=M,this._reader=null,this._loaded=0;const c=M.source;this._withCredentials=c.withCredentials||!1,this._readCapability=(0,C.createPromiseCapability)(),this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=G(this._stream.httpHeaders),this._headers.append("Range",`bytes=${T}-${E-1}`);const t=c.url;fetch(t,Y(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,S.validateResponseStatus)(r.status))throw(0,S.createResponseStatusError)(r.status,t);this._readCapability.resolve(),this._reader=r.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:M,done:T}=await this._reader.read();return T?{value:M,done:T}:(this._loaded+=M.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(M).buffer,done:!1})}cancel(M){this._reader&&this._reader.cancel(M),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(rt){var g=__webpack_module_cache__[rt];if(g!==void 0)return g.exports;var K=__webpack_module_cache__[rt]={exports:{}};return __webpack_modules__[rt](K,K.exports,__w_pdfjs_require__),K.exports}var __webpack_exports__={};return(()=>{var rt=__webpack_exports__;Object.defineProperty(rt,"__esModule",{value:!0}),Object.defineProperty(rt,"AnnotationEditorLayer",{enumerable:!0,get:function(){return S.AnnotationEditorLayer}}),Object.defineProperty(rt,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return g.AnnotationEditorParamsType}}),Object.defineProperty(rt,"AnnotationEditorType",{enumerable:!0,get:function(){return g.AnnotationEditorType}}),Object.defineProperty(rt,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return Y.AnnotationEditorUIManager}}),Object.defineProperty(rt,"AnnotationLayer",{enumerable:!0,get:function(){return G.AnnotationLayer}}),Object.defineProperty(rt,"AnnotationMode",{enumerable:!0,get:function(){return g.AnnotationMode}}),Object.defineProperty(rt,"CMapCompressionType",{enumerable:!0,get:function(){return g.CMapCompressionType}}),Object.defineProperty(rt,"GlobalWorkerOptions",{enumerable:!0,get:function(){return tt.GlobalWorkerOptions}}),Object.defineProperty(rt,"InvalidPDFException",{enumerable:!0,get:function(){return g.InvalidPDFException}}),Object.defineProperty(rt,"LoopbackPort",{enumerable:!0,get:function(){return K.LoopbackPort}}),Object.defineProperty(rt,"MissingPDFException",{enumerable:!0,get:function(){return g.MissingPDFException}}),Object.defineProperty(rt,"OPS",{enumerable:!0,get:function(){return g.OPS}}),Object.defineProperty(rt,"PDFDataRangeTransport",{enumerable:!0,get:function(){return K.PDFDataRangeTransport}}),Object.defineProperty(rt,"PDFDateString",{enumerable:!0,get:function(){return C.PDFDateString}}),Object.defineProperty(rt,"PDFWorker",{enumerable:!0,get:function(){return K.PDFWorker}}),Object.defineProperty(rt,"PasswordResponses",{enumerable:!0,get:function(){return g.PasswordResponses}}),Object.defineProperty(rt,"PermissionFlag",{enumerable:!0,get:function(){return g.PermissionFlag}}),Object.defineProperty(rt,"PixelsPerInch",{enumerable:!0,get:function(){return C.PixelsPerInch}}),Object.defineProperty(rt,"RenderingCancelledException",{enumerable:!0,get:function(){return C.RenderingCancelledException}}),Object.defineProperty(rt,"SVGGraphics",{enumerable:!0,get:function(){return k.SVGGraphics}}),Object.defineProperty(rt,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return g.UNSUPPORTED_FEATURES}}),Object.defineProperty(rt,"UnexpectedResponseException",{enumerable:!0,get:function(){return g.UnexpectedResponseException}}),Object.defineProperty(rt,"Util",{enumerable:!0,get:function(){return g.Util}}),Object.defineProperty(rt,"VerbosityLevel",{enumerable:!0,get:function(){return g.VerbosityLevel}}),Object.defineProperty(rt,"XfaLayer",{enumerable:!0,get:function(){return M.XfaLayer}}),Object.defineProperty(rt,"build",{enumerable:!0,get:function(){return K.build}}),Object.defineProperty(rt,"createPromiseCapability",{enumerable:!0,get:function(){return g.createPromiseCapability}}),Object.defineProperty(rt,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return g.createValidAbsoluteUrl}}),Object.defineProperty(rt,"getDocument",{enumerable:!0,get:function(){return K.getDocument}}),Object.defineProperty(rt,"getFilenameFromUrl",{enumerable:!0,get:function(){return C.getFilenameFromUrl}}),Object.defineProperty(rt,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return C.getPdfFilenameFromUrl}}),Object.defineProperty(rt,"getXfaPageViewport",{enumerable:!0,get:function(){return C.getXfaPageViewport}}),Object.defineProperty(rt,"isPdfFile",{enumerable:!0,get:function(){return C.isPdfFile}}),Object.defineProperty(rt,"loadScript",{enumerable:!0,get:function(){return C.loadScript}}),Object.defineProperty(rt,"renderTextLayer",{enumerable:!0,get:function(){return A.renderTextLayer}}),Object.defineProperty(rt,"shadow",{enumerable:!0,get:function(){return g.shadow}}),Object.defineProperty(rt,"version",{enumerable:!0,get:function(){return K.version}});var g=__w_pdfjs_require__(1),K=__w_pdfjs_require__(4),C=__w_pdfjs_require__(8),S=__w_pdfjs_require__(22),Y=__w_pdfjs_require__(7),G=__w_pdfjs_require__(27),tt=__w_pdfjs_require__(15),q=__w_pdfjs_require__(3),A=__w_pdfjs_require__(30),k=__w_pdfjs_require__(31),M=__w_pdfjs_require__(29);if(q.isNodeJS){const{PDFNodeStream:T}=__w_pdfjs_require__(32);(0,K.setPDFNetworkStreamFactory)(E=>new T(E))}else{const{PDFNetworkStream:T}=__w_pdfjs_require__(35),{PDFFetchStream:E}=__w_pdfjs_require__(36);(0,K.setPDFNetworkStreamFactory)(c=>(0,C.isValidFetchUrl)(c.url)?new E(c):new T(c))}})(),__webpack_exports__})())}(pdf$2)),pdf$2.exports}var pdfExports=requirePdf();const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdf$1 as p};
